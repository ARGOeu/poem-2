(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/WES":function(e,t,a){var r=a("kWNB");"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,n);r.locals&&(e.exports=r.locals)},"29KK":function(e,t,a){"use strict";a.d(t,"l",(function(){return ke})),a.d(t,"f",(function(){return we})),a.d(t,"v",(function(){return Oe})),a.d(t,"n",(function(){return Ae})),a.d(t,"d",(function(){return Pe})),a.d(t,"o",(function(){return Ie})),a.d(t,"p",(function(){return Se})),a.d(t,"j",(function(){return Ne})),a.d(t,"m",(function(){return Le})),a.d(t,"r",(function(){return Ue})),a.d(t,"q",(function(){return je})),a.d(t,"s",(function(){return Re})),a.d(t,"u",(function(){return We})),a.d(t,"b",(function(){return Be})),a.d(t,"c",(function(){return Ke})),a.d(t,"i",(function(){return ze})),a.d(t,"a",(function(){return Ve})),a.d(t,"g",(function(){return Qe})),a.d(t,"k",(function(){return Fe})),a.d(t,"e",(function(){return qe})),a.d(t,"t",(function(){return He})),a.d(t,"h",(function(){return Ge}));var r=a("lwsE"),n=a.n(r),i=a("W8MJ"),s=a.n(i),o=a("7W2i"),c=a.n(o),l=a("a1gu"),u=a.n(l),m=a("Nsbk"),d=a.n(m),p=a("J4zp"),_=a.n(p),h=a("o0o1"),f=a.n(h),g=a("yXPU"),E=a.n(g),v=a("pVnL"),b=a.n(v),M=a("QILm"),y=a.n(M),D=a("q1tI"),k=a.n(D),w=a("9ONQ"),O=a("DCcX"),x=a("vkoW"),A=a("CaDr"),P=a("OBzv"),C=a("sOKU"),I=a("XI7o"),S=a("EvW+"),T=a("2Te1"),N=a("tiWs"),L=a("374E"),U=a("a5/R"),j=a("nsn4"),R=a("9a8N"),W=a("F66N"),B=a("iqOp"),K=a("YGfb"),z=a("arvA"),Y=a("BLzl"),V=a("afej"),Q=a("/kxI"),F=a("1Yj4"),q=a("ok1R"),H=a("rhny"),G=a("xdlx"),Z=a("aLZG"),J=a("jrRI"),X=a("q7Gj"),$=a("re1l"),ee=a("0E8A"),te=a("3OM0"),ae=a("55Ip"),re=a("5tO7"),ne=a.n(re),ie=a("RYGk"),se=a.n(ie),oe=a("uU5Y"),ce=a.n(oe),le=a("hQ4L"),ue=a.n(le),me=(a("Pn3v"),a("IP2g")),de=a("wHSu"),pe=a("of9s"),_e=a("KYPV"),he=a("/8CB"),fe=a.n(he),ge=a("a/x8"),Ee=a("XNy0"),ve=a.n(Ee);function be(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,r=d()(e);if(t()){var n=d()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return u()(this,a)}}var Me=["administration","services","probes","metrics","metricprofiles","aggregationprofiles","thresholdsprofiles"],ye=["administration","yumrepos","packages","probes","metrictemplates"],De=new Map;De.set("administration","Administration"),De.set("services","Services"),De.set("reports","Reports"),De.set("probes","Probes"),De.set("public_probes","Public probes"),De.set("metrics","Metrics"),De.set("public_metrics","Public metrics"),De.set("metricprofiles","Metric profiles"),De.set("public_metricprofiles","Metric profiles"),De.set("public_aggregationprofiles","Aggregation profiles"),De.set("aggregationprofiles","Aggregation profiles"),De.set("groupofaggregations","Groups of aggregations"),De.set("groupofmetrics","Groups of metrics"),De.set("groupofmetricprofiles","Groups of metric profiles"),De.set("users","Users"),De.set("apikey","API key"),De.set("metrictemplates","Metric templates"),De.set("yumrepos","YUM repos"),De.set("groupofthresholdsprofiles","Groups of thresholds profiles"),De.set("public_thresholdsprofiles","Thresholds profiles"),De.set("thresholdsprofiles","Thresholds profiles"),De.set("packages","Packages");var ke=function(e){var t=new Map;return t.set("administration",de.v),t.set("services",de.p),t.set("serviceflavour",de.h),t.set("reports",de.g),t.set("probes",de.n),t.set("metrics",de.d),t.set("metrictemplates",de.d),t.set("metricprofiles",de.e),t.set("aggregationprofiles",de.r),t.set("apikey",de.j),t.set("yumrepos",de.b),t.set("thresholdsprofiles",de.f),t.set("users",de.u),t.set("packages",de.a),e.i.startsWith("groupof")?k.a.createElement("span",{className:"fa-layers fa-fw"},k.a.createElement(me.a,{icon:de.q,color:"white",fixedWidth:!0}),k.a.createElement(me.a,{icon:t.get(e.i.replace("groupof","")),transform:"shrink-".concat("groupofmetricprofiles"===e.i?9:8," up-3")}),k.a.createElement(me.a,{icon:t.get(e.i.replace("groupof","")),transform:"shrink-".concat("groupofmetricprofiles"===e.i?9:8," down-4.2 left-5")}),k.a.createElement(me.a,{icon:t.get(e.i.replace("groupof","")),transform:"shrink-".concat("groupofmetricprofiles"===e.i?9:8," down-4.2 right-5")})):k.a.createElement(me.a,{icon:t.get(e.i),size:"yumrepos"===e.i||"metricprofiles"===e.i?"sm":"1x",fixedWidth:!0})},we=function(e){var t=e.field,a=e.data,r=void 0===a?[]:a,n=e.prefix,i=void 0===n?"":n,s=e.class_name,o=void 0===s?"":s,c=e.isnew,l=void 0!==c&&c;return k.a.createElement(_e.a,{component:"select",name:i?"".concat(i,".").concat(t.name):t.name,required:!0,className:"form-control ".concat(o," ").concat(l?"border-success":"")},r.map((function(e,t){return 0===t?k.a.createElement("option",{key:t,hidden:!0},e):k.a.createElement("option",{key:t,value:e},e)})))},Oe=function(e){e.form;var t=e.field,a=y()(e,["form","field"]);return k.a.createElement("div",{className:"input-group"},k.a.createElement("input",b()({type:"text",placeholder:"Search"},t,a)),k.a.createElement("div",{className:"input-group-append"},k.a.createElement("span",{className:"input-group-text",id:"basic-addon"},k.a.createElement(me.a,{icon:de.m}))))},xe=function(){var e=E()(f.a.mark((function e(t,a){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new w.a,a(),e.next=4,fetch("/rest-auth/logout/",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":r.get("csrftoken"),Referer:"same-origin"}});case 4:e.sent.ok&&t.push("/ui/login");case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ae=function(e){var t=e.isOpen,a=e.toggle,r=e.title,n=e.msg,i=e.onYes;return k.a.createElement(O.a,{isOpen:t,toggle:a},k.a.createElement(x.a,{toggle:a},r),k.a.createElement(A.a,null,n),k.a.createElement(P.a,null,k.a.createElement(C.a,{color:"primary",onClick:function(){i(),a()}},"Yes")," ",k.a.createElement(C.a,{color:"secondary",onClick:a},"No")))},Pe=function(e){var t=e.location,a=(e.history,e.publicView),r=void 0!==a&&a,n=new Array,i=new Array,s=new Object;if(r?(n=window.location.pathname.split("/"),s.url="/ui/"+n[2],s.title=De.get(n[2]),i.push({url:s.url,title:s.title})):(i.push({url:"/ui/home",title:"Home"}),n=t.pathname.split("/"),s.url="/ui/"+n[2],s.title=De.get(n[2]),i.push(s)),n.length>3){var o=new Object({url:s.url+"/"+n[3]});o.title="Administration"===s.title?De.get(n[3]):n[3],i.push(o)}if(n.length>4){var c=new Object({url:o.url+"/"+n[4]});c.title=n[4],i.push(c)}if(n.length>5){var l=new Object({url:c.url+"/"+n[5]});l.title=n[5],i.push(l)}if(n.length>6&&"history"===l.title){var u=new Object({url:l.url+"/"+n[6]});u.title=n[6],i.push(u)}return k.a.createElement(I.a,{id:"argo-breadcrumb",className:"border-top rounded"},i.map((function(e,t){return t!==i.length-1?k.a.createElement(S.a,{key:t},k.a.createElement(ae.b,{to:e.url},e.title)):k.a.createElement(S.a,{key:t,active:!0},e.title)})))},Ce=function(e){var t=e.userDetails,a=e.isTenantSchema,r=e.publicView,n=function(e){var t=e.only;return void 0!==t&&t?k.a.createElement("div",{className:"text-center"},k.a.createElement(T.a,{color:"dark",className:"mb-1 mt-1",style:{fontSize:"100%"}},"No permissions")):k.a.createElement(T.a,{color:"dark",className:"mb-1 mt-1"},"No permissions")},i=function(e){var t=e.name;return k.a.createElement("span",null,k.a.createElement(T.a,{color:"primary",className:"mb-1 mt-1"},t)," ")},s=function(){return k.a.createElement("div",null,k.a.createElement("hr",{style:{borderTop:"1px solid black"}}))};return r?k.a.createElement("div",null,k.a.createElement("div",null,k.a.createElement(T.a,{color:"warning",style:{fontSize:"100%"},pill:!0},"Anonymous User")),k.a.createElement(s,null),k.a.createElement(n,{only:!0})):k.a.createElement("div",null,k.a.createElement("div",{className:"text-center"},t.is_superuser?k.a.createElement(T.a,{color:"danger",className:"mt-2 mb-2",style:{fontSize:"100%"},pill:!0},a?"Tenant Admin":"Super Admin"):k.a.createElement(T.a,{color:"success",className:"mt-2 mb-2",style:{fontSize:"100%"},pill:!0},"Tenant User")),t.first_name&&k.a.createElement("div",{className:"text-center"},k.a.createElement("b",null,t.first_name," ",t.last_name)),k.a.createElement("div",{className:"text-center text-primary"},t.first_name?null:k.a.createElement("br",null),t.email),t.is_superuser?null:function(e){var t=!1;for(var a in e)if(e[a].length>0){t=!0;break}return t}(t.groups)?k.a.createElement("div",null,k.a.createElement(s,null),k.a.createElement("div",{className:"text-left"},"Aggregation profiles:",k.a.createElement("br",null),t.groups.aggregations.length>0?t.groups.aggregations.map((function(e,t){return k.a.createElement(i,{name:e,key:t})})):k.a.createElement(n,null)),k.a.createElement("div",{className:"text-left"},"Metrics:",k.a.createElement("br",null),t.groups.metrics.length>0?t.groups.metrics.map((function(e,t){return k.a.createElement(i,{name:e,key:t})})):k.a.createElement(n,null)),k.a.createElement("div",{className:"text-left"},"Metric profiles:",k.a.createElement("br",null),t.groups.metricprofiles.length>0?t.groups.metricprofiles.map((function(e,t){return k.a.createElement(i,{name:e,key:t})})):k.a.createElement(n,null)),k.a.createElement("div",{className:"text-left"},"Thresholds profiles:",k.a.createElement("br",null),t.groups.thresholdsprofiles.length>0?t.groups.thresholdsprofiles.map((function(e,t){return k.a.createElement(i,{name:e,key:t})})):k.a.createElement(n,null))):k.a.createElement("div",null,k.a.createElement(s,null),k.a.createElement(n,{only:!0})))},Ie=function(e){var t=e.history,a=e.onLogout,r=e.isOpenModal,n=e.toggle,i=e.titleModal,s=e.msgModal,o=e.userDetails,c=e.isTenantSchema,l=e.publicView,u=Object(D.useState)(!1),m=_()(u,2),d=m[0],p=m[1];return k.a.createElement(k.a.Fragment,null,k.a.createElement(Ae,{isOpen:r,toggle:n,title:i,msg:s,onYes:function(){return xe(t,a)}}),k.a.createElement(N.a,{expand:"md",id:"argo-nav",className:"border rounded"},k.a.createElement(L.a,{className:"text-light"},k.a.createElement("img",{src:ne.a,alt:"ARGO logo",className:"img-responsive"}),k.a.createElement("span",{className:"pl-3"},k.a.createElement("strong",null,"ARGO")," POEM")),k.a.createElement(U.a,null),k.a.createElement(j.a,{navbar:!0,className:"justify-content-end"},k.a.createElement(R.a,{navbar:!0},k.a.createElement(W.a,{className:"m-2 ml-5 text-light"},"Welcome, ",k.a.createElement("span",{onMouseEnter:function(){return p(!0)},onMouseLeave:function(){return p(!1)},className:"font-weight-bold",href:"#",id:"userToolTip"},k.a.createElement(T.a,{href:"#",color:"dark",style:{fontSize:"100%"}},o.first_name?o.first_name:o.username)),k.a.createElement(B.a,{style:{opacity:.9},placement:"bottom",isOpen:d,target:"userToolTip",toggle:function(){return p(!d)}},k.a.createElement(K.a,null,k.a.createElement(Ce,{userDetails:o,isTenantSchema:c,publicView:l})))),k.a.createElement(W.a,{className:"m-2"},k.a.createElement(C.a,{id:"argo-navbar-logout",size:"sm",onClick:function(){return n()}},k.a.createElement(me.a,{icon:de.o})))))))},Se=function(e){var t=e.location,a=e.isTenantSchema,r=e.userDetails,n=void 0;return n=a?Me:ye,r.is_superuser||(n=n.filter((function(e){return"administration"!==e}))),k.a.createElement(R.a,{vertical:!0,pills:!0,id:"argo-navlinks",className:"border-left border-right border-top rounded-top sticky-top"},n.map((function(e,a){return k.a.createElement(W.a,{key:a},k.a.createElement(z.a,{tag:ae.b,active:t.pathname.split("/")[2]===e,className:t.pathname.split("/")[2]===e?"text-white bg-info":"text-dark",to:"/ui/"+e},k.a.createElement(ke,{i:e})," ",De.get(e)))})))},Te=function(e){var t=e.border,a=void 0!==t&&t;return k.a.createElement(k.a.Fragment,null,a&&k.a.createElement("div",{className:"pt-1"}),k.a.createElement("div",{className:"text-center pt-1"},k.a.createElement("img",{src:ce.a,id:"eulogo",alt:"EU logo"}),k.a.createElement("img",{src:ue.a,id:"eosclogo",alt:"EOSC logo",className:"pl-1"})),k.a.createElement("p",{className:"text-center"},k.a.createElement("small",null,k.a.createElement("strong",null,"ARGO POEM")," is a service jointly developed and maintained by  ",k.a.createElement("a",{href:"http://www.cnrs.fr/",title:"Centre national de la recherche scientifique"},"CNRS"),",  ",k.a.createElement("a",{href:"https://grnet.gr/",title:"Greek Research and Technology Network"},"GRNET")," and  ",k.a.createElement("a",{href:"http://www.srce.unizg.hr/",title:"University computing centre"},"SRCE"),"  co-funded by ",k.a.createElement("a",{href:"https://www.eosc-hub.eu",title:"EOSC-Hub"},"EOSC-Hub")," and  ",k.a.createElement("a",{href:"http://www.egi.eu/",title:"EGI.eu"},"EGI.eu"),k.a.createElement("br",null),k.a.createElement("a",{href:"http://argo.egi.eu/lavoisier/TermsofUse",title:"Terms of use"},"Terms of use"),", ",k.a.createElement("a",{href:"http://www.apache.org/licenses/LICENSE-2.0",title:"License"},"License"))))},Ne=function(e){var t=e.loginPage;return void 0!==t&&t?k.a.createElement("div",{id:"argo-loginfooter"},k.a.createElement(Te,null)):k.a.createElement("div",{id:"argo-footer",className:"border rounded"},k.a.createElement(Te,{border:!0}))},Le=function(){return k.a.createElement(Y.a,{className:"text-center"},k.a.createElement(V.a,{className:"bg-light"},k.a.createElement("h4",{className:"text-dark"},"Loading data...")),k.a.createElement(Q.a,null,k.a.createElement("img",{src:se.a,alt:"ARGO logo anim",className:"img-responsive",height:"300px"})))},Ue=function(e){var t=e.msg,a=void 0===t?"":t,r=e.title,n=void 0===r?"":r,i=e.callback,s=void 0===i?void 0:i;pe.NotificationManager.success(a,n,2e3),setTimeout(s,2e3)},je=function(e){var t=e.msg,a=void 0===t?"":t,r=e.title,n=void 0===r?"":r;pe.NotificationManager.error(a,n)},Re=function(e){var t=e.msg,a=void 0===t?"":t,r=e.title,n=void 0===r?"":r;pe.NotificationManager.warning(a,n)},We=function(e){var t=e.children;return k.a.createElement(F.a,{fluid:!0},k.a.createElement(q.a,null,k.a.createElement(H.a,null,k.a.createElement(Ie,{history:void 0,onLogout:void 0,isOpenModal:void 0,toggle:function(){},titleModal:"Log out",msgModal:"Are you sure you want to log out?",userDetails:{username:"Anonymous"},publicView:!0}))),k.a.createElement(q.a,{className:"no-gutters"},k.a.createElement(H.a,null,k.a.createElement(Pe,{publicView:!0}),t)),k.a.createElement(q.a,null,k.a.createElement(H.a,null,k.a.createElement(Ne,{loginPage:!1}))))},Be=function(e){var t=e.resourcename,a=void 0===t?"":t,r=e.location,n=void 0===r?void 0:r,i=e.infoview,s=void 0!==i&&i,o=e.addview,c=void 0!==o&&o,l=e.listview,u=void 0!==l&&l,m=e.modal,d=void 0!==m&&m,p=e.state,_=void 0===p?void 0:p,h=e.toggle,f=void 0===h?void 0:h,g=e.submitperm,E=void 0===g||g,v=e.history,b=void 0===v||v,M=e.addnew,y=void 0===M||M,D=e.clone,w=void 0!==D&&D,O=e.cloneview,x=void 0!==O&&O,A=e.tenantview,P=void 0!==A&&A,I=e.publicview,S=void 0!==I&&I,T=e.addperm,N=void 0===T||T,L=e.children;return k.a.createElement(k.a.Fragment,null,d&&k.a.createElement(Ae,{isOpen:_.areYouSureModal,toggle:f,title:_.modalTitle,msg:_.modalMsg,onYes:_.modalFunc}),k.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},s?k.a.createElement("h2",{className:"ml-3 mt-1 mb-4"},a):c?k.a.createElement("h2",{className:"ml-3 mt-1 mb-4"},"Add ".concat(a)):u?k.a.createElement(k.a.Fragment,null,y?k.a.createElement("h2",{className:"ml-3 mt-1 mb-4"},"Select ".concat(a," to change")):k.a.createElement("h2",{className:"ml-3 mt-1 mb-4"},"Select ".concat(a," for details")),y&&N?k.a.createElement(ae.b,{className:"btn btn-secondary",to:n.pathname+"/add",role:"button"},"Add"):k.a.createElement(C.a,{className:"btn btn-secondary",onClick:function(){return je({title:"Not allowed",msg:"You do not have permission to add ".concat(a,".")})}},"Add")):x?k.a.createElement(k.a.Fragment,null,k.a.createElement("h2",{className:"ml-3 mt-1 mb-4"},"Clone ".concat(a))):P?k.a.createElement(k.a.Fragment,null,k.a.createElement("h2",{className:"ml-3 mt-1 mb-4"},a),b&&k.a.createElement(ae.b,{className:"btn btn-secondary",to:n.pathname+"/history",role:"button"},"History")):k.a.createElement(k.a.Fragment,null,k.a.createElement("h2",{className:"ml-3 mt-1 mb-4"},"Change ".concat(a)),k.a.createElement(G.a,null,w&&!S&&k.a.createElement(ae.b,{className:"btn btn-secondary mr-2",to:n.pathname+"/clone",role:"button"},"Clone"),b&&!S&&k.a.createElement(ae.b,{className:"btn btn-secondary",to:n.pathname+"/history",role:"button"},"History")))),k.a.createElement("div",{id:"argo-contentwrap",className:"ml-2 mb-2 mt-2 p-3 border rounded"},!E&&!s&&!u&&!S&&k.a.createElement(Z.a,{color:"danger"},k.a.createElement("center",null,"This is a read-only instance, please request the corresponding permissions to perform any changes in this form.")),L))},Ke=function(e){var t=e.field,a=t.name,r=t.value,n=t.onChange,i=t.onBlur,s=e.form,o=s.errors,c=s.touched,l=e.id,u=e.label;y()(e,["field","form","id","label"]);return k.a.createElement("div",null,k.a.createElement("input",{name:a,id:l,type:"checkbox",value:r,checked:r,onChange:n,onBlur:i}),k.a.createElement("label",{htmlFor:l},u),c[a]&&o[a]&&k.a.createElement("div",{className:"error"},o[a]))},ze=function(e){return k.a.createElement("div",{style:{color:"#FF0000",fontSize:"small"}},e)};function Ye(e,t){if(t)return-1!==e.toLowerCase().indexOf(t.toLowerCase())}var Ve=function(e){var t=e.lists,a=e.onselect_handler,r=e.field,n=e.val,i=e.icon,s=e.setFieldValue,o=e.req,c=e.label,l=(e.values,"form-control ".concat(o&&"border-danger"));return k.a.createElement(fe.a,{inputProps:{className:l},getItemValue:function(e){return e},items:t,value:n,renderItem:function(e,a){return k.a.createElement("div",{key:t.indexOf(e),className:"argo-autocomplete-entries ".concat(a?"argo-autocomplete-entries-highlighted":"")},e?k.a.createElement(ke,{i:i}):""," ",e)},renderInput:function(e){return c?k.a.createElement("div",{className:"input-group mb-3"},k.a.createElement("div",{className:"input-group-prepend"},k.a.createElement("span",{className:"input-group-text",id:"basic-addon1"},c)),k.a.createElement("input",b()({},e,{type:"text",className:l,"aria-label":"label"}))):k.a.createElement("input",e)},onChange:function(e){s(r,e.target.value)},onSelect:function(e){s(r,e),a(r,e)},wrapperStyle:{},shouldItemRender:Ye,renderMenu:function(e){return k.a.createElement("div",{className:"argo-autocomplete-menu",children:e})}})},Qe=function(e){var t=e.value,a=e.onChange,r=e.data;return k.a.createElement("select",{onChange:a,style:{width:"100%"},value:t},k.a.createElement("option",{key:0,value:""},"Show all"),r.map((function(e,t){return k.a.createElement("option",{key:t+1,value:e},e)})))};function Fe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(a){c()(o,a);var r,i=be(o);function o(a){var r;return n()(this,o),(r=i.call(this,a)).name=a.match.params.name,r.history=a.history,r.publicView=a.publicView,r.state={loading:!1,list_versions:null,compare1:"",compare2:"",error:null},r.publicView?["metric","metricprofile","aggregationprofile","thresholdsprofile"].includes(e)?r.apiUrl="/api/v2/internal/public_tenantversion/":r.apiUrl="/api/v2/internal/public_version/":["metric","metricprofile","aggregationprofile","thresholdsprofile"].includes(e)?r.apiUrl="/api/v2/internal/tenantversion/":r.apiUrl="/api/v2/internal/version/",t?r.compareUrl="/ui/administration/".concat(e,"s/").concat(r.name,"/history"):r.publicView?r.compareUrl="/ui/public_".concat(e,"s/").concat(r.name,"/history"):r.compareUrl="/ui/".concat(e,"s/").concat(r.name,"/history"),r.backend=new ge.a,r}return s()(o,[{key:"componentDidMount",value:(r=E()(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({loading:!0}),t.prev=1,t.next=4,this.backend.fetchData("".concat(this.apiUrl,"/").concat(e,"/").concat(this.name));case 4:(a=t.sent).length>1?this.setState({list_versions:a,loading:!1,compare1:a[0].version,compare2:a[1].version}):this.setState({list_versions:a,loading:!1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),this.setState({error:t.t0,loading:!1});case 12:case 13:case"end":return t.stop()}}),t,this,[[1,9]])}))),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,r=t.list_versions,n=t.error;return a?k.a.createElement(Le,null):n?k.a.createElement(Ge,{error:n}):!a&&r?k.a.createElement(Be,{resourcename:"Version history",infoview:!0},k.a.createElement("table",{className:"table table-sm"},k.a.createElement("thead",{className:"table-active"},k.a.createElement("tr",null,1===r.length?k.a.createElement("th",{scope:"col"},"Compare"):k.a.createElement("th",{scope:"col"},k.a.createElement(C.a,{color:"info",onClick:function(){return e.history.push("".concat(e.compareUrl,"/compare/").concat(e.state.compare1,"/").concat(e.state.compare2))}},"Compare")),k.a.createElement("th",{scope:"col"},"Version"),k.a.createElement("th",{scope:"col"},"Date/time"),k.a.createElement("th",{scope:"col"},"User"),k.a.createElement("th",{scope:"col"},"Comment"))),k.a.createElement("tbody",null,r.map((function(t,a){return k.a.createElement("tr",{key:a},1===r.length?k.a.createElement("td",null,"-"):0===a?k.a.createElement("td",null,k.a.createElement("input",{type:"radio",name:"radio-1",value:t.version,defaultChecked:!0,onChange:function(t){return e.setState({compare1:t.target.value})}})):k.a.createElement("td",null,k.a.createElement("input",{type:"radio",name:"radio-1",value:t.version,onChange:function(t){return e.setState({compare1:t.target.value})}})," ",k.a.createElement("input",{type:"radio",name:"radio-2",value:t.version,defaultChecked:1===a,onChange:function(t){return e.setState({compare2:t.target.value})}})),k.a.createElement("td",null,t.version?k.a.createElement(ae.b,{to:"".concat(e.compareUrl,"/").concat(t.version)},t.version):""),k.a.createElement("td",null,t.date_created?t.date_created:""),k.a.createElement("td",null,t.user?t.user:""),k.a.createElement("td",{className:"col-md-6"},t.comment?t.comment:""))}))))):null}}]),o}(D.Component)}var qe=function(e){var t=e.title,a=e.item1,r=e.item2;a=a.split("\r\n"),r=r.split("\r\n");var n=Math.max(a.length,r.length);if(a.length>r.length)for(var i=r.length;i<a.length;i++)r.push(" ");else if(r.length>a.length)for(var s=a.length;s<r.length;s++)a.push(" ");for(var o=[],c=0;c<n;c++)o.push(k.a.createElement(ve.a,{oldValue:r[c],newValue:a[c],showDiffOnly:!0,splitView:!1,hideLineNumbers:!0,disableWordDiff:!0,key:"diff-"+c}));return k.a.createElement("div",{id:"argo-contentwrap",className:"ml-2 mb-2 mt-2 p-3 border rounded"},k.a.createElement("h6",{className:"mt-4 font-weight-bold text-uppercase"},t),o)},He=function(e){var t=e.errors,a=e.grouplist,r=void 0===a?void 0:a,n=e.description,i=void 0===n?void 0:n,s=e.fieldsdisable,o=void 0!==s&&s,c=e.profiletype,l=void 0===c?void 0:c;return k.a.createElement(J.a,null,k.a.createElement(q.a,null,k.a.createElement(H.a,{md:6},k.a.createElement(X.a,null,k.a.createElement($.a,{addonType:"prepend"},"Name"),k.a.createElement(_e.a,{type:"text",name:"name",className:"form-control form-control-lg ".concat(t.name&&"border-danger"),disabled:o})),t.name&&ze(t.name),k.a.createElement(ee.a,{color:"muted"},"Name of ".concat(l," profile")))),i&&k.a.createElement(q.a,{className:"mt-3"},k.a.createElement(H.a,{md:10},k.a.createElement(te.a,{for:"profileDescription"},"Description:"),k.a.createElement(_e.a,{id:"profileDescription",className:"form-control",component:"textarea",name:i,disabled:o}),k.a.createElement(ee.a,{color:"muted"},"Free text description outlining the purpose of this profile."))),k.a.createElement(q.a,{className:"mt-4"},k.a.createElement(H.a,{md:3},k.a.createElement(X.a,null,k.a.createElement($.a,{addonType:"prepend"},"Group"),o?k.a.createElement(_e.a,{type:"text",name:"groupname",className:"form-control",disabled:!0}):k.a.createElement(_e.a,{name:"groupname",component:"select",className:"form-control custom-select ".concat(t.groupname&&"border-danger")},k.a.createElement("option",{key:0,value:"",hidden:!0,color:"muted"},"Select group"),r.map((function(e,t){return k.a.createElement("option",{key:t+1,value:e},e)})))),t.groupname&&ze(t.groupname),k.a.createElement(ee.a,{color:"muted"},"".concat(l.charAt(0).toUpperCase()+l.slice(1)," profile is member of given group.")))))},Ge=function(e){var t=e.error,a=[];return t.toString().split("; ").forEach((function(e,t){0===t?a.push(k.a.createElement("h3",{key:t},e)):a.push(k.a.createElement("p",{key:t},e))})),k.a.createElement(k.a.Fragment,null,k.a.createElement("h1",null,"Something went wrong"),a)}},"5tO7":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4xIiAKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgCiAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iNC45MTc4NjU2NTY3NTI0NCA0LjY0MjkwMjM3NzQwOTk2OCAxMDIuMjMzMjE1NTQ3NzAzMiA1MCIgd2lkdGg9Ijk4LjIzIiBoZWlnaHQ9IjQ2Ij4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik0xMDMuMTkgMjkuMDFMMTAyLjIyIDMwLjE2TDEwMS4yMyAzMS4yOUwxMDAuMjMgMzIuMzhMOTkuMjEgMzMuNDVMOTguMTggMzQuNDhMOTcuMTQgMzUuNDlMOTYuMDggMzYuNDZMOTUuMDEgMzcuNDFMOTMuOTMgMzguMzJMOTIuODMgMzkuMkw5MS43MiA0MC4wNkw5MC42IDQwLjg4TDg5LjQ2IDQxLjY3TDg4LjMxIDQyLjQzTDg3LjE0IDQzLjE2TDg1Ljk2IDQzLjg3TDg0Ljc3IDQ0LjU0TDgzLjU3IDQ1LjE4TDgyLjM1IDQ1Ljc5TDgxLjExIDQ2LjM3TDc5Ljg3IDQ2LjkyTDc4LjYxIDQ3LjQ0TDc3LjMzIDQ3LjkzTDc2LjA0IDQ4LjM5TDc0Ljc0IDQ4LjgyTDczLjQzIDQ5LjIyTDcyLjEgNDkuNThMNzAuNzYgNDkuOTJMNjkuNCA1MC4yM0w2OC4wMyA1MC41MUw2Ni42NSA1MC43Nkw2NS4yNSA1MC45N0w2My44NCA1MS4xNkw2Mi40MiA1MS4zMkw2MC45OCA1MS40NEw1OS41MyA1MS41NEw1OC4wNiA1MS42TDU2LjU4IDUxLjY0TDU1LjA5IDUxLjY0TDUzLjYgNTEuNjJMNTIuMTIgNTEuNTdMNTAuNjYgNTEuNDlMNDkuMjEgNTEuMzhMNDcuNzcgNTEuMjRMNDYuMzQgNTEuMDdMNDQuOTMgNTAuODhMNDMuNTMgNTAuNjZMNDIuMTUgNTAuNDFMNDAuNzggNTAuMTNMMzkuNDIgNDkuODJMMzguMDggNDkuNDlMMzYuNzUgNDkuMTJMMzUuNDMgNDguNzNMMzQuMTMgNDguMzFMMzIuODQgNDcuODZMMzEuNTYgNDcuMzlMMzAuMyA0Ni44OEwyOS4wNSA0Ni4zNUwyNy44MSA0NS43OUwyNi41OSA0NS4yTDI1LjM4IDQ0LjU4TDI0LjE4IDQzLjk0TDIzIDQzLjI2TDIxLjgzIDQyLjU2TDIwLjY4IDQxLjgzTDE5LjU0IDQxLjA3TDE4LjQxIDQwLjI5TDE3LjI5IDM5LjQ3TDE2LjE5IDM4LjYzTDE1LjEgMzcuNzZMMTQuMDMgMzYuODZMMTIuOTcgMzUuOTNMMTEuOTIgMzQuOTdMMTAuODkgMzMuOTlMOS44NyAzMi45OEw4Ljg2IDMxLjk0TDcuODYgMzAuODdMNi44OCAyOS43N0w1LjkyIDI4LjY0TDU1LjA5IDUuNjRMMTA0LjE1IDI3LjgyTDEwMy4xOSAyOS4wMVpNNTEuNzkgMTMuNjFMNTAuNTQgMTMuODhMNDkuMzMgMTQuMjVMNDguMTcgMTQuNzJMNDcuMDUgMTUuMjdMNDUuOTkgMTUuOTFMNDQuOTkgMTYuNjNMNDQuMDUgMTcuNDNMNDMuMTggMTguMzFMNDIuMzggMTkuMjRMNDEuNjUgMjAuMjVMNDEuMDEgMjEuMzFMNDAuNDYgMjIuNDJMMzkuOTkgMjMuNTlMMzkuNjIgMjQuOEwzOS4zNSAyNi4wNEwzOS4xOSAyNy4zM0wzOS4xMyAyOC42NEwzOS4xOSAyOS45NkwzOS4zNSAzMS4yNEwzOS42MiAzMi40OUwzOS45OSAzMy43TDQwLjQ2IDM0Ljg3TDQxLjAxIDM1Ljk4TDQxLjY1IDM3LjA0TDQyLjM4IDM4LjA0TDQzLjE4IDM4Ljk4TDQ0LjA1IDM5Ljg2TDQ0Ljk5IDQwLjY1TDQ1Ljk5IDQxLjM4TDQ3LjA1IDQyLjAyTDQ4LjE3IDQyLjU3TDQ5LjMzIDQzLjA0TDUwLjU0IDQzLjQxTDUxLjc5IDQzLjY4TDUzLjA3IDQzLjg0TDU0LjM5IDQzLjlMNTUuNyA0My44NEw1Ni45OSA0My42OEw1OC4yNCA0My40MUw1OS40NCA0My4wNEw2MC42MSA0Mi41N0w2MS43MiA0Mi4wMkw2Mi43OCA0MS4zOEw2My43OSA0MC42NUw2NC43MyAzOS44Nkw2NS42IDM4Ljk4TDY2LjQgMzguMDRMNjcuMTIgMzcuMDRMNjcuNzYgMzUuOThMNjguMzIgMzQuODdMNjguNzggMzMuN0w2OS4xNSAzMi40OUw2OS40MiAzMS4yNEw2OS41OCAyOS45Nkw2OS42NCAyOC42NEw2OS41OCAyNy4zM0w2OS40MiAyNi4wNEw2OS4xNSAyNC44TDY4Ljc4IDIzLjU5TDY4LjMyIDIyLjQyTDY3Ljc2IDIxLjMxTDY3LjEyIDIwLjI1TDY2LjQgMTkuMjRMNjUuNiAxOC4zMUw2NC43MyAxNy40M0w2My43OSAxNi42M0w2Mi43OCAxNS45MUw2MS43MiAxNS4yN0w2MC42MSAxNC43Mkw1OS40NCAxNC4yNUw1OC4yNCAxMy44OEw1Ni45OSAxMy42MUw1NS43IDEzLjQ1TDU0LjM5IDEzLjM5TDUzLjA3IDEzLjQ1TDUxLjc5IDEzLjYxWiIgaWQ9ImIzZHhnVUpTTFciPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNNjYuMTEgMjguODJDNjYuMTEgMzUuMzUgNjAuOCA0MC42NiA1NC4yNyA0MC42NkM0Ny43NCA0MC42NiA0Mi40MyAzNS4zNSA0Mi40MyAyOC44MkM0Mi40MyAyMi4yOSA0Ny43NCAxNi45OCA1NC4yNyAxNi45OEM2MC44IDE2Ljk4IDY2LjExIDIyLjI5IDY2LjExIDI4LjgyWiIgaWQ9ImU0ZXBvZkxQV0wiPjwvcGF0aD4KICAgIDwvZGVmcz4KICAgIDxnPgogICAgICAgIDxnPgogICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNiM2R4Z1VKU0xXIiBvcGFjaXR5PSIxIiBmaWxsPSIjNzViM2Q5IiAgZmlsbC1vcGFjaXR5PSIxIj48L3VzZT4KICAgICAgICA8L2c+CiAgICAgICAgPGc+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI2U0ZXBvZkxQV0wiIG9wYWNpdHk9IjEiIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlPSJ3aGl0ZSIgZmlsbD0iIzZmOGRjNCIgZmlsbC1vcGFjaXR5PSIxIj48L3VzZT4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},ML16:function(e,t,a){var r=a("dtk8");"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,n);r.locals&&(e.exports=r.locals)},Pn3v:function(e,t,a){var r=a("p3/T");"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,n);r.locals&&(e.exports=r.locals)},QjdQ:function(e,t,a){var r=a("tYV+");"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,n);r.locals&&(e.exports=r.locals)},RYGk:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4xIiAKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgCiAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iNC45MTc4NjU2NTY3NTI0NCA0LjY0MjkwMjM3NzQwOTk2OCAxMDIuMjMzMjE1NTQ3NzAzMiA1MCIgd2lkdGg9Ijk4LjIzIiBoZWlnaHQ9IjQ2Ij4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik0xMDMuMTkgMjkuMDFMMTAyLjIyIDMwLjE2TDEwMS4yMyAzMS4yOUwxMDAuMjMgMzIuMzhMOTkuMjEgMzMuNDVMOTguMTggMzQuNDhMOTcuMTQgMzUuNDlMOTYuMDggMzYuNDZMOTUuMDEgMzcuNDFMOTMuOTMgMzguMzJMOTIuODMgMzkuMkw5MS43MiA0MC4wNkw5MC42IDQwLjg4TDg5LjQ2IDQxLjY3TDg4LjMxIDQyLjQzTDg3LjE0IDQzLjE2TDg1Ljk2IDQzLjg3TDg0Ljc3IDQ0LjU0TDgzLjU3IDQ1LjE4TDgyLjM1IDQ1Ljc5TDgxLjExIDQ2LjM3TDc5Ljg3IDQ2LjkyTDc4LjYxIDQ3LjQ0TDc3LjMzIDQ3LjkzTDc2LjA0IDQ4LjM5TDc0Ljc0IDQ4LjgyTDczLjQzIDQ5LjIyTDcyLjEgNDkuNThMNzAuNzYgNDkuOTJMNjkuNCA1MC4yM0w2OC4wMyA1MC41MUw2Ni42NSA1MC43Nkw2NS4yNSA1MC45N0w2My44NCA1MS4xNkw2Mi40MiA1MS4zMkw2MC45OCA1MS40NEw1OS41MyA1MS41NEw1OC4wNiA1MS42TDU2LjU4IDUxLjY0TDU1LjA5IDUxLjY0TDUzLjYgNTEuNjJMNTIuMTIgNTEuNTdMNTAuNjYgNTEuNDlMNDkuMjEgNTEuMzhMNDcuNzcgNTEuMjRMNDYuMzQgNTEuMDdMNDQuOTMgNTAuODhMNDMuNTMgNTAuNjZMNDIuMTUgNTAuNDFMNDAuNzggNTAuMTNMMzkuNDIgNDkuODJMMzguMDggNDkuNDlMMzYuNzUgNDkuMTJMMzUuNDMgNDguNzNMMzQuMTMgNDguMzFMMzIuODQgNDcuODZMMzEuNTYgNDcuMzlMMzAuMyA0Ni44OEwyOS4wNSA0Ni4zNUwyNy44MSA0NS43OUwyNi41OSA0NS4yTDI1LjM4IDQ0LjU4TDI0LjE4IDQzLjk0TDIzIDQzLjI2TDIxLjgzIDQyLjU2TDIwLjY4IDQxLjgzTDE5LjU0IDQxLjA3TDE4LjQxIDQwLjI5TDE3LjI5IDM5LjQ3TDE2LjE5IDM4LjYzTDE1LjEgMzcuNzZMMTQuMDMgMzYuODZMMTIuOTcgMzUuOTNMMTEuOTIgMzQuOTdMMTAuODkgMzMuOTlMOS44NyAzMi45OEw4Ljg2IDMxLjk0TDcuODYgMzAuODdMNi44OCAyOS43N0w1LjkyIDI4LjY0TDU1LjA5IDUuNjRMMTA0LjE1IDI3LjgyTDEwMy4xOSAyOS4wMVpNNTEuNzkgMTMuNjFMNTAuNTQgMTMuODhMNDkuMzMgMTQuMjVMNDguMTcgMTQuNzJMNDcuMDUgMTUuMjdMNDUuOTkgMTUuOTFMNDQuOTkgMTYuNjNMNDQuMDUgMTcuNDNMNDMuMTggMTguMzFMNDIuMzggMTkuMjRMNDEuNjUgMjAuMjVMNDEuMDEgMjEuMzFMNDAuNDYgMjIuNDJMMzkuOTkgMjMuNTlMMzkuNjIgMjQuOEwzOS4zNSAyNi4wNEwzOS4xOSAyNy4zM0wzOS4xMyAyOC42NEwzOS4xOSAyOS45NkwzOS4zNSAzMS4yNEwzOS42MiAzMi40OUwzOS45OSAzMy43TDQwLjQ2IDM0Ljg3TDQxLjAxIDM1Ljk4TDQxLjY1IDM3LjA0TDQyLjM4IDM4LjA0TDQzLjE4IDM4Ljk4TDQ0LjA1IDM5Ljg2TDQ0Ljk5IDQwLjY1TDQ1Ljk5IDQxLjM4TDQ3LjA1IDQyLjAyTDQ4LjE3IDQyLjU3TDQ5LjMzIDQzLjA0TDUwLjU0IDQzLjQxTDUxLjc5IDQzLjY4TDUzLjA3IDQzLjg0TDU0LjM5IDQzLjlMNTUuNyA0My44NEw1Ni45OSA0My42OEw1OC4yNCA0My40MUw1OS40NCA0My4wNEw2MC42MSA0Mi41N0w2MS43MiA0Mi4wMkw2Mi43OCA0MS4zOEw2My43OSA0MC42NUw2NC43MyAzOS44Nkw2NS42IDM4Ljk4TDY2LjQgMzguMDRMNjcuMTIgMzcuMDRMNjcuNzYgMzUuOThMNjguMzIgMzQuODdMNjguNzggMzMuN0w2OS4xNSAzMi40OUw2OS40MiAzMS4yNEw2OS41OCAyOS45Nkw2OS42NCAyOC42NEw2OS41OCAyNy4zM0w2OS40MiAyNi4wNEw2OS4xNSAyNC44TDY4Ljc4IDIzLjU5TDY4LjMyIDIyLjQyTDY3Ljc2IDIxLjMxTDY3LjEyIDIwLjI1TDY2LjQgMTkuMjRMNjUuNiAxOC4zMUw2NC43MyAxNy40M0w2My43OSAxNi42M0w2Mi43OCAxNS45MUw2MS43MiAxNS4yN0w2MC42MSAxNC43Mkw1OS40NCAxNC4yNUw1OC4yNCAxMy44OEw1Ni45OSAxMy42MUw1NS43IDEzLjQ1TDU0LjM5IDEzLjM5TDUzLjA3IDEzLjQ1TDUxLjc5IDEzLjYxWiIgaWQ9ImExcGtjZVVMNDQiPjwvcGF0aD4KICAgICAgICA8cGF0aCBkPSJNNjYuMTEgMjguODJDNjYuMTEgMzUuMzUgNjAuOCA0MC42NiA1NC4yNyA0MC42NkM0Ny43NCA0MC42NiA0Mi40MyAzNS4zNSA0Mi40MyAyOC44MkM0Mi40MyAyMi4yOSA0Ny43NCAxNi45OCA1NC4yNyAxNi45OEM2MC44IDE2Ljk4IDY2LjExIDIyLjI5IDY2LjExIDI4LjgyWiIgaWQ9ImRqWGR6bnhlSSI+PC9wYXRoPgogICAgPC9kZWZzPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCw0MCkiPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsLTQwKSI+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI2ExcGtjZVVMNDQiIG9wYWNpdHk9IjEiIGZpbGw9IiNkMmQyZDIiIGZpbGwtb3BhY2l0eT0iMSI+PC91c2U+CiAgICAgICAgPC9nPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsLTQwKSI+CiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI2RqWGR6bnhlSSIgb3BhY2l0eT0iMSIgZmlsbD0iI2JmYmZiZiIgZmlsbC1vcGFjaXR5PSIxIj48L3VzZT4KICAgICAgICA8L2c+CiAgICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIgogICAgICAgICAgICAgdHlwZT0ic2NhbGUiCiAgICAgICAgICAgICBhZGRpdGl2ZT0ic3VtIiAKICAgICAgICAgICAgIGZyb209IjEgMSIKICAgICAgICAgICAgIHRvPSIxIDEiCiAgICAgICAgICAgICBiZWdpbj0iMHMiCiAgICAgICAgICAgICBkdXI9IjFzIgogICAgICAgICAgICAgdmFsdWVzPSIxIDE7IDEgMTsgMSAwOyAxIDE7IDEgMTsgMSAwOyAxIDE7IDEgMDsgMSAxIgogICAgICAgICAgICAga2V5VGltZXM9IjA7IDAuMzsgMC40OyAwLjU7IDAuNzsgMC43NjsgMC44OyAwLjk7IDEiCiAgICAgICAgICAgICByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIKICAgICAgICAvPgogICAgPC9nPgo8L3N2Zz4="},SKq3:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return MetricList})),__webpack_require__.d(__webpack_exports__,"e",(function(){return MetricHistory})),__webpack_require__.d(__webpack_exports__,"h",(function(){return MetricVersonCompare})),__webpack_require__.d(__webpack_exports__,"i",(function(){return ProbeVersionLink})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ListOfMetrics})),__webpack_require__.d(__webpack_exports__,"d",(function(){return MetricForm})),__webpack_require__.d(__webpack_exports__,"a",(function(){return CompareMetrics})),__webpack_require__.d(__webpack_exports__,"c",(function(){return MetricChange})),__webpack_require__.d(__webpack_exports__,"g",(function(){return MetricVersionDetails}));var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("pVnL"),_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lSNA"),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("o0o1"),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("yXPU"),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("lwsE"),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("W8MJ"),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__),_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("PJYZ"),_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("7W2i"),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7__),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("a1gu"),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8__),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("Nsbk"),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9__),react__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("q1tI"),react__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_10__),_DataManager__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("a/x8"),react_router_dom__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("55Ip"),_UIElements__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("29KK"),react_table__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("0enf"),formik__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("KYPV"),reactstrap__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("ok1R"),reactstrap__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("rhny"),reactstrap__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("3OM0"),reactstrap__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("sOKU"),reactstrap__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("aLZG"),reactstrap__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("jrRI"),reactstrap__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("q7Gj"),reactstrap__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("re1l"),reactstrap__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("0E8A"),reactstrap__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("iqOp"),reactstrap__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("glTy"),reactstrap__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("YGfb"),_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("IP2g"),_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("wHSu"),react_diff_viewer__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("XNy0"),react_diff_viewer__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(react_diff_viewer__WEBPACK_IMPORTED_MODULE_30__);function _createSuper2(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,r=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(e);if(t()){var n=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_9___default()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_8___default()(this,a)}}var MetricList=ListOfMetrics("metric"),MetricHistory=Object(_UIElements__WEBPACK_IMPORTED_MODULE_13__.k)("metric"),MetricVersonCompare=CompareMetrics("metric"),DefaultFilterComponent=function(e){var t=e.value,a=e.onChange,r=e.field;return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("input",{type:"text",placeholder:"Search by "+r,value:t,onChange:a,style:{width:"100%"}})};function validateConfig(e){var t;return e||(t="Required"),t}var InlineDiffElement=function(e){for(var t=e.title,a=e.item1,r=e.item2,n=Math.max(a.length,r.length),i=[],s=0;s<a.length;s++)i.push("key: "+a[s].key+", value: "+a[s].value);for(var o=[],c=0;c<r.length;c++)o.push("key: "+r[c].key+", value: "+r[c].value);if(a.length>r.length)for(var l=r.length;l<a.length;l++)o.push(" ");else if(r.length>a.length)for(var u=a.length;u<r.length;u++)i.push(" ");for(var m=[],d=0;d<n;d++)m.push(react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(react_diff_viewer__WEBPACK_IMPORTED_MODULE_30___default.a,{oldValue:o[d],newValue:i[d],showDiffOnly:!0,splitView:!1,hideLineNumbers:!0,disableWordDiff:!0,key:"diff-"+d}));return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div",{id:"argo-contentwrap",className:"ml-2 mb-2 mt-2 p-3 border rounded"},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("h6",{className:"mt-4 font-weight-bold text-uppercase"},t),m)};function arraysEqual(e,t){if(e.length!==t.length)return!1;for(var a=e.length;a--;)if(e[a].key!==t[a].key||e[a].value!==t[a].value)return!1;return!0}var InlineFields=function(e){var t=e.values,a=e.errors,r=e.field,n=e.addnew,i=void 0!==n&&n,s=e.readonly,o=void 0!==s&&s;return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("h6",{className:"mt-4 font-weight-bold text-uppercase",hidden:"Passive"===t.type&&"flags"!==r},r.replace("_"," ")),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.b,{name:r,render:function(e){return t[r]&&t[r].length>0?t[r].map((function(n,s){return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_10___default.a.Fragment,{key:"fragment.".concat(r,".").concat(s)},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_16__.a,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:5},0===s&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_18__.a,{hidden:"Passive"===t.type&&"flags"!==r,for:"".concat(r,".0.key")},"Key")),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:5},0===s&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_18__.a,{hidden:"Passive"===t.type&&"flags"!==r,for:"".concat(r,".0.value")},"Value"))),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_16__.a,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:5},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.a,{type:"text",name:"".concat(r,".").concat(s,".key"),id:"".concat(r,".").concat(s,".key"),className:"form-control ".concat(t[r][s].isNew&&"border-success"),readOnly:!i||"config"===r||"Passive"===t.type&&"PASSIVE"===n.key,hidden:"Passive"===t.type&&"flags"!==r})),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:5},"Active"===t.type&&"config"===r?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.a,{type:"text",name:"".concat(r,".").concat(s,".value"),id:"".concat(r,".").concat(s,".value"),className:"form-control ".concat(a.config&&a.config[s]&&"border-danger"),readOnly:o||!i&&"config"===r&&"path"===n.key,validate:validateConfig}):react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.a,{type:"text",name:"".concat(r,".").concat(s,".value"),id:"".concat(r,".").concat(s,".value"),className:"form-control ".concat(t[r][s].isNew&&"border-success"),style:{overflowX:"auto"},readOnly:o||!i&&("config"!==r||"config"===r&&"path"===n.key)||"Passive"===t.type&&"PASSIVE"===n.key,hidden:"Passive"===t.type&&"flags"!==r}),a.config&&"config"===r&&a.config[s]&&Object(_UIElements__WEBPACK_IMPORTED_MODULE_13__.i)(a.config[s].value)),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:2},i&&"config"!==r&&(""!==t[r][0].key||""!==t[r][0].value||t[r].length>1)&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_19__.a,{hidden:"Passive"===t.type&&"flags"!==r||"flags"===r&&"Passive"===t.type&&("PASSIVE"===t[r][s].key||""===t[r][s].key&&""===t[r][s].value),size:"sm",color:"danger",type:"button",onClick:function(){e.remove(s),1===t[r].length&&e.push({key:"",value:""})}},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_28__.a,{icon:_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_29__.k})))),i&&"config"!==r&&s===t[r].length-1&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_16__.a,{className:"Passive"===t.type?"mt-0":"mt-2"},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:2},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_19__.a,{hidden:"Passive"===t.type&&"flags"!==r,size:"sm",color:"success",type:"button",onClick:function(){return e.push({key:"",value:"",isNew:!0})}},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_28__.a,{icon:_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_29__.l})," Add another ","s"===r.slice(-1)?r.slice(0,-1).replace("_"," "):r.replace("_"," ")))))})):react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_10___default.a.Fragment,{key:"fragment.".concat(r)},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_16__.a,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:5},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_18__.a,{to:"empty-key",hidden:"Passive"===t.type&&"flags"!==r},"Key"),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.a,{type:"text",className:"form-control",value:"",id:"empty-key",readOnly:!i,hidden:"Passive"===t.type&&"flags"!==r})),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:5},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_18__.a,{to:"empty-value",hidden:"Passive"===t.type&&"flags"!==r},"Value"),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.a,{type:"text",value:"",className:"form-control",id:"empty-value",readOnly:!i,hidden:"Passive"===t.type&&"flags"!==r}))),i&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_16__.a,{className:"Passive"===t.type?"mt-0":"mt-2"},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:2},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_19__.a,{hidden:"Passive"===t.type&&"flags"!==r,size:"sm",color:"success",type:"button",onClick:function(){return e.push({key:"",value:""})}},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_28__.a,{icon:_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_29__.l})," Add another ","s"===r.slice(-1)?r.slice(0,-1).replace("_"," "):r.replace("_"," ")))))}}))},ProbeVersionLink=function(e){var t=e.probeversion,a=e.publicView,r=void 0!==a&&a;return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_12__.b,{to:"/ui/".concat(r?"public_":"","probes/")+t.split(" ")[0]+"/history/"+t.split(" ")[1].substring(1,t.split(" ")[1].length-1)},t)};function ListOfMetrics(type){var imp=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(_Component){_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default()(_class,_Component);var _super=_createSuper2(_class),_componentDidMount,_importMetrics;function _class(e){var t;return _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default()(this,_class),(t=_super.call(this,e)).location=e.location,t.state="metric"===type?{loading:!1,list_metric:null,list_tags:null,list_groups:null,list_types:null,search_name:"",search_probeversion:"",search_type:"",search_group:"",userDetails:void 0,error:null}:{loading:!1,list_metric:null,list_types:null,list_ostags:null,search_name:"",search_probeversion:"",search_ostag:"",search_type:"",selected:{},selectAll:0,userDetails:void 0,error:null},t.backend=new _DataManager__WEBPACK_IMPORTED_MODULE_11__.a,t.publicView=e.publicView,t.doFilter=t.doFilter.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(t)),t.toggleRow=t.toggleRow.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(t)),t.importMetrics=t.importMetrics.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(t)),t}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default()(_class,[{key:"doFilter",value:function doFilter(list_metric,field,filter){return list_metric.filter((function(row){return eval("row.".concat(field)).toLowerCase().includes(filter.toLowerCase())}))}},{key:"toggleRow",value:function(e){var t=Object.assign({},this.state.selected);t[e]=!this.state.selected[e],this.setState({selected:t,selectAll:2})}},{key:"toggleSelectAll",value:function(){var e=this,t=this.state.list_metric;this.state.search_name&&(t=this.doFilter(t,"name",this.state.search_name)),this.state.search_probeversion&&(t=this.doFilter(t,"probeversion",this.state.search_probeversion)),this.state.search_type&&(t=this.doFilter(t,"mtype",this.state.search_type)),this.state.search_ostag&&(t=t.filter((function(t){return"".concat(t.ostag.join(", ")).includes(e.state.search_ostag)})));var a={};0===this.state.selectAll&&t.forEach((function(e){a[e.name]=!0})),this.setState({selected:a,selectAll:0===this.state.selectAll?1:0})}},{key:"importMetrics",value:(_importMetrics=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){var t,a,r,n;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.selected,!((a=Object.keys(t).filter((function(e){return t[e]}))).length>0)){e.next=13;break}return e.next=5,this.backend.importMetrics({metrictemplates:a});case 5:return r=e.sent,e.next=8,r.json();case 8:(n=e.sent).imported&&Object(_UIElements__WEBPACK_IMPORTED_MODULE_13__.r)({msg:n.imported,title:"Imported"}),n.err&&Object(_UIElements__WEBPACK_IMPORTED_MODULE_13__.s)({msg:n.err,title:"Not imported"}),e.next=14;break;case 13:Object(_UIElements__WEBPACK_IMPORTED_MODULE_13__.q)({msg:"No metric templates were selected!",title:"Error"});case 14:case 15:case"end":return e.stop()}}),e,this)}))),function(){return _importMetrics.apply(this,arguments)})},{key:"componentDidMount",value:(_componentDidMount=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){var t,a,r,n,i,s,o,c,l,u,m;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.backend.isTenantSchema();case 3:if(t=e.sent,e.prev=4,this.publicView){e.next=36;break}return e.next=8,this.backend.isActiveSession(t);case 8:if(!(a=e.sent).active){e.next=33;break}if("metric"!==type){e.next=23;break}return e.next=13,this.backend.fetchData("/api/v2/internal/metric");case 13:return r=e.sent,e.next=16,this.backend.fetchResult("/api/v2/internal/usergroups");case 16:return n=e.sent,e.next=19,this.backend.fetchData("/api/v2/internal/mtypes");case 19:i=e.sent,this.setState({list_metric:r,list_groups:n.metrics,list_types:i,loading:!1,search_name:"",search_probeversion:"",search_group:"",search_type:"",userDetails:a.userdetails}),e.next=33;break;case 23:return e.next=25,this.backend.fetchData("/api/v2/internal/metrictemplates".concat(imp?"-import":""));case 25:return s=e.sent,e.next=28,this.backend.fetchData("/api/v2/internal/mttypes");case 28:return o=e.sent,e.next=31,this.backend.fetchData("/api/v2/internal/ostags");case 31:c=e.sent,this.setState({list_metric:s,list_types:o,list_ostags:c,loading:!1,search_name:"",search_probeversion:"",search_type:"",search_ostag:"",userDetails:a.userdetails});case 33:e.next=46;break;case 36:return e.next=38,this.backend.fetchData("/api/v2/internal/public_metric");case 38:return l=e.sent,e.next=41,this.backend.fetchResult("/api/v2/internal/public_usergroups");case 41:return u=e.sent,e.next=44,this.backend.fetchData("/api/v2/internal/public_mtypes");case 44:m=e.sent,this.setState({list_metric:l,list_groups:u.metrics,list_types:m,loading:!1,search_name:"",search_probeversion:"",search_group:"",search_type:"",userDetails:{username:"Anonymous"}});case 46:e.next=51;break;case 48:e.prev=48,e.t0=e.catch(4),this.setState({error:e.t0,loading:!1});case 51:case 52:case"end":return e.stop()}}),e,this,[[4,48]])}))),function(){return _componentDidMount.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=void 0;t="metric"===type?this.publicView?"/ui/public_metrics/":"/ui/metrics/":imp?"/ui/administration/metrictemplates/":"/ui/metrictemplates/";var a=[{Header:"Name",id:"name",minWidth:100,accessor:function(a){return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_12__.b,{to:imp?"CentOS 6"===e.state.search_ostag&&a.centos6_probeversion?"".concat(t).concat(a.name,"/history/").concat(a.centos6_probeversion.split(" ")[1].substring(1,a.centos6_probeversion.split(" ")[1].length-1)):"CentOS 7"===e.state.search_ostag&&a.centos7_probeversion?"".concat(t).concat(a.name,"/history/").concat(a.centos7_probeversion.split(" ")[1].substring(1,a.centos7_probeversion.split(" ")[1].length-1)):"".concat(t).concat(a.name):"".concat(t).concat(a.name)},a.name)},filterable:!0,Filter:react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(DefaultFilterComponent,{field:"name",value:this.state.search_name,onChange:function(t){return e.setState({search_name:t.target.value})}})},{Header:"Probe version",id:"probeversion",minWidth:80,accessor:function(t){return t.probeversion?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(ProbeVersionLink,{publicView:e.publicView,probeversion:imp?"CentOS 6"===e.state.search_ostag&&t.centos6_probeversion?t.centos6_probeversion:"CentOS 7"===e.state.search_ostag&&t.centos7_probeversion?t.centos7_probeversion:t.probeversion:t.probeversion}):""},Cell:function(e){return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div",{style:{textAlign:"center"}},e.value)},filterable:!0,Filter:react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(DefaultFilterComponent,{field:"probe version",value:this.state.search_probeversion,onChange:function(t){return e.setState({search_probeversion:t.target.value})}})},{Header:"Type",minWidth:30,accessor:"mtype",Cell:function(e){return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div",{style:{textAlign:"center"}},e.value)},filterable:!0,Filter:react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.g,{value:this.state.mtype,onChange:function(t){return e.setState({search_type:t.target.value})},data:this.state.list_types})}];imp&&this.state.userDetails&&this.state.userDetails.is_superuser?a.splice(0,0,{id:"checkbox",accessor:"",Cell:function(t){var a=t.original;return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("input",{type:"checkbox",className:"checkbox",checked:!0===e.state.selected[a.name],onChange:function(){return e.toggleRow(a.name)}}))},Header:"Select all",Filter:react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("input",{type:"checkbox",className:"checkbox",checked:1===this.state.selectAll,ref:function(t){t&&(t.indeterminate=2===e.state.selectAll)},onChange:function(){return e.toggleSelectAll()}})),filterable:!0,sortable:!1,minWidth:12}):a.splice(0,0,{Header:"#",id:"row",minWidth:12,Cell:function(e){return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div",{style:{textAlign:"center"}},e.index+1)}}),"metric"===type&&a.splice(4,0,{Header:"Group",minWidth:30,accessor:"group",Cell:function(e){return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div",{style:{textAlign:"center"}},e.value)},filterable:!0,Filter:react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.g,{value:this.state.search_group,onChange:function(t){return e.setState({search_group:t.target.value})},data:this.state.list_groups})}),imp&&a.splice(4,0,{Header:"OS",minWidth:30,accessor:"ostag",Cell:function(e){return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div",{style:{textAlign:"center"}},e.value.join(", "))},filterable:!0,Filter:react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.g,{value:this.state.ostag,onChange:function(t){return e.setState({search_ostag:t.target.value})},data:this.state.list_ostags})});var r=this.state,n=r.loading,i=r.list_metric,s=r.error;return this.state.search_name&&(i=this.doFilter(i,"name",this.state.search_name)),this.state.search_probeversion&&(i=this.doFilter(i,"probeversion",this.state.search_probeversion)),this.state.search_type&&(i=this.doFilter(i,"mtype",this.state.search_type)),this.state.search_ostag&&(i=i.filter((function(t){return"".concat(t.ostag.join(", ")).toLowerCase().includes(e.state.search_ostag.toLowerCase())}))),"metric"===type&&this.state.search_group&&(i=this.doFilter(i,"group",this.state.search_group)),n?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.m,null):s?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.h,{error:s}):!n&&i&&this.state.userDetails?"metric"===type?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.b,{resourcename:"metric",location:this.location,listview:!0,addnew:!1},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(react_table__WEBPACK_IMPORTED_MODULE_14__.a,{data:i,columns:a,className:"-highlight",defaultPageSize:50,rowsText:"metrics",getTheadThProps:function(){return{className:"table-active font-weight-bold p-2"}}})):imp?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_10___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("h2",{className:"ml-3 mt-1 mb-4"},"Select metric template".concat(this.state.userDetails.is_superuser?"(s) to import":" for details")),this.state.userDetails.is_superuser&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_19__.a,{className:"btn btn-secondary",disabled:!this.state.search_ostag,onClick:function(){return e.importMetrics()}},"Import")),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div",{id:"argo-contentwrap",className:"ml-2 mb-2 mt-2 p-3 border rounded"},!this.state.search_ostag&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_20__.a,{color:"danger"},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("center",null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_28__.a,{icon:_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_29__.i,size:"lg",color:"black"}),"   You should choose OS for import.")),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(react_table__WEBPACK_IMPORTED_MODULE_14__.a,{data:i,columns:a,className:"-highlight",defaultPageSize:50,rowsText:"metrics",getTheadThProps:function(){return{className:"table-active font-weight-bold p-2"}}}))):react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.b,{resourcename:"metric template",location:this.location,listview:!imp,importlistview:imp,addnew:!0},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(react_table__WEBPACK_IMPORTED_MODULE_14__.a,{data:i,columns:a,className:"-highlight",defaultPageSize:50,rowsText:"metrics",getTheadThProps:function(){return{className:"table-active font-weight-bold p-2"}}})):null}}]),_class}(react__WEBPACK_IMPORTED_MODULE_10__.Component)}var MetricForm=function(e){var t=e.values,a=void 0===t?void 0:t,r=e.errors,n=void 0===r?{name:void 0,probeversion:void 0,probeexecutable:void 0}:r,i=e.setFieldValue,s=void 0===i?void 0:i,o=e.handleChange,c=e.obj,l=void 0===c?"":c,u=e.state,m=void 0===u?void 0:u,d=e.togglePopOver,p=void 0===d?void 0:d,_=e.onSelect,h=void 0===_?void 0:_,f=e.isHistory,g=void 0!==f&&f,E=e.isTenantSchema,v=void 0!==E&&E,b=e.addview,M=void 0!==b&&b,y=e.probeversions,D=void 0===y?[]:y,k=e.groups,w=void 0===k?[]:k,O=e.metrictemplatelist,x=void 0===O?[]:O,A=e.types,P=void 0===A?[]:A,C=e.publicView,I=void 0!==C&&C;return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_10___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_21__.a,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_16__.a,{className:"mb-3"},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:6},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_22__.a,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_23__.a,{addonType:"prepend"},"Name"),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.a,{type:"text",name:"name",className:"form-control ".concat(n.name&&"border-danger"),id:"name",readOnly:g||v})),n.name&&Object(_UIElements__WEBPACK_IMPORTED_MODULE_13__.i)(n.name),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_24__.a,{color:"muted"},"Metric name.")),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:4,className:"mt-1"},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_22__.a,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_23__.a,{addonType:"prepend"},"Type"),v||g?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.a,{type:"text",name:"type",className:"form-control",id:"mtype",readOnly:!0}):react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.a,{component:"select",name:"type",className:"form-control custom-select",id:"mtype",onChange:function(e){if(o(e),"Passive"===e.target.value){var t=a.flags.length;1===t&&""===a.flags[0].key?(s("flags[0].key","PASSIVE"),s("flags[0].value","1")):(s("flags[".concat(t,"].key"),"PASSIVE"),s("flags[".concat(t,"].value"),"1"))}else if("Active"===e.target.value){var r=void 0;a.flags.forEach((function(e,t){"PASSIVE"===e.key&&(r=t)})),1===a.flags.length?a.flags.splice(r,1,{key:"",value:""}):a.flags.splice(r,1)}}},P.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("option",{key:t,value:e},e)})))),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_24__.a,{color:"muted"},"Metric is of given type."))),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_16__.a,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:6},"Passive"===a.type?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_22__.a,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_23__.a,{addonType:"prepend"},"Probe"),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("input",{type:"text",className:"form-control",disabled:!0,id:"passive-probeversion"})):g||v&&"metrictemplate"===l?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_22__.a,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_23__.a,{addonType:"prepend"},"Probe"),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.a,{type:"text",name:"probeversion",className:"form-control",id:"probeversion",disabled:!0})):v&&"metric"===l?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_22__.a,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_23__.a,{addonType:"prepend"},"Probe"),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.a,{component:"select",name:"probeversion",className:"form-control custom-select",id:"probeversion",onChange:function(e){return h("probeversion",e.target.value)}},D.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("option",{key:t,value:e},e)})))):react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.a,{setFieldValue:s,lists:D,icon:"probes",field:"probeversion",val:a.probeversion,onselect_handler:h,req:n.probeversion,label:"Probe"}),n.probeversion&&Object(_UIElements__WEBPACK_IMPORTED_MODULE_13__.i)(n.probeversion),"Active"===a.type&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_24__.a,{color:"muted"},"Probe name and version ",!g&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_10___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_28__.a,{id:"probe-popover",hidden:"Passive"==="state.".concat(l,".mtype")||M,icon:_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_29__.i,style:{color:"#416090"}}),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_25__.a,{placement:"bottom",isOpen:m.popoverOpen,target:"probe-popover",toggle:p,trigger:"click"},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_26__.a,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(ProbeVersionLink,{probeversion:"metric"===l?m.metric.probeversion:m.metrictemplate.probeversion,publicView:I})),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_27__.a,null,m.probe.description))))),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:4,className:"mt-1"},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_22__.a,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_23__.a,{addonType:"prepend"},"Package"),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.a,{type:"text",className:"form-control",value:m.probe.package,disabled:!0})),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_24__.a,{color:"muted"},"Package which contains probe."))),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_16__.a,{className:"mb-4 mt-2"},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:10},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_18__.a,{for:"description"},"Description:"),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.a,{id:"description",className:"form-control",component:"textarea",name:"description",disabled:v||g}))),"metric"===l&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_16__.a,{className:"mb-4"},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:3},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_22__.a,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_23__.a,{addonType:"prepend"},"Group"),g?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.a,{type:"text",name:"group",className:"form-control",disabled:!0,id:"group"}):react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.a,{component:"select",name:"group",className:"form-control custom-select",id:"group"},w.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("option",{key:t,value:e},e)})))),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_24__.a,{color:"muted"},"Metric is member of selected group.")))),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_21__.a,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("h4",{className:"mt-2 p-1 pl-3 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"Metric configuration"),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("h6",{className:"mt-4 font-weight-bold text-uppercase",hidden:"Passive"===a.type},"probe executable"),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_16__.a,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:5},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.a,{type:"text",name:"probeexecutable",id:"probeexecutable",className:"form-control ".concat(n.probeexecutable&&"border-danger"),hidden:"Passive"===a.type,readOnly:v||g}),n.probeexecutable&&Object(_UIElements__WEBPACK_IMPORTED_MODULE_13__.i)(n.probeexecutable))),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(InlineFields,{values:a,errors:n,field:"config",addnew:!v&&!g,readonly:"metrictemplate"===l&&v||g}),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(InlineFields,{values:a,errors:n,field:"attributes",addnew:!v&&!g}),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(InlineFields,{values:a,errors:n,field:"dependency",addnew:!v&&!g}),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(InlineFields,{values:a,errors:n,field:"parameter",addnew:!v&&!g}),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(InlineFields,{values:a,errors:n,field:"flags",addnew:!v&&!g}),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("h6",{className:"mt-4 font-weight-bold text-uppercase"},"parent"),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_16__.a,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_17__.a,{md:5},v||g?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.a,{type:"text",name:"parent",id:"parent",className:"form-control",readOnly:!0}):react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_10___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.a,{setFieldValue:s,lists:x,field:"parent",val:a.parent,icon:"metrics",className:"form-control ".concat(n.parent&&"border-danger"),onselect_handler:h,req:n.parent}),n.parent&&Object(_UIElements__WEBPACK_IMPORTED_MODULE_13__.i)(n.parent))))))};function CompareMetrics(e){return function(t){_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default()(n,t);var a,r=_createSuper2(n);function n(e){var t;return _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default()(this,n),(t=r.call(this,e)).version1=e.match.params.id1,t.version2=e.match.params.id2,t.name=e.match.params.name,t.state={loading:!1,name1:"",probeversion1:"",type1:"",group1:"",description1:"",probeexecutable1:"",parent1:"",config1:"",attribute1:"",dependency1:"",parameter1:"",flags1:"",files1:"",fileparameter1:"",name2:"",probeversion2:"",type2:"",group2:"",description2:"",probeexecutable2:"",parent2:"",config2:"",attribute2:"",dependency2:"",parameter2:"",flags2:"",files2:"",fileparameter2:"",error:null},t.backend=new _DataManager__WEBPACK_IMPORTED_MODULE_11__.a,t}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default()(n,[{key:"componentDidMount",value:(a=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function t(){var a,r,n,i,s,o,c,l,u,m,d,p,_,h,f,g,E,v,b,M,y,D,k,w,O,x,A,P,C,I,S=this;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({loading:!0}),a=void 0,a="metric"===e?"/api/v2/internal/tenantversion/metric/".concat(this.name):"/api/v2/internal/version/metrictemplate/".concat(this.name),t.prev=3,t.next=6,this.backend.fetchData(a);case 6:r=t.sent,n="",i="",s="",o="",c="",l="",u="",m="",d="",p="",_="",h="",f="",g="",E="",v="",b="",M="",y="",D="",k="",w="",O="",x="",A="",P="",C="",I="",r.forEach((function(t){t.version==S.version1?(n=t.fields.name,i=t.fields.probeversion,s=t.fields.mtype,"metric"===e?(o=t.fields.group,p=t.fields.dependancy):p=t.fields.dependency,c=t.fields.description,l=t.fields.probeexecutable,u=t.fields.parent,m=t.fields.config,d=t.fields.attribute,f=t.fields.parameter,_=t.fields.flags,h=t.fields.files,g=t.fields.fileparameter):t.version==S.version2&&(E=t.fields.name,v=t.fields.probeversion,b=t.fields.mtype,"metric"===e?(M=t.fields.group,x=t.fields.dependancy):x=t.fields.dependency,y=t.fields.description,D=t.fields.probeexecutable,k=t.fields.parent,w=t.fields.config,O=t.fields.attribute,A=t.fields.flags,P=t.fields.files,C=t.fields.parameter,I=t.fields.fileparameter)})),this.setState({name1:n,probeversion1:i,type1:s,group1:o,description1:c,probeexecutable1:l,parent1:u,config1:m,attribute1:d,dependency1:p,parameter1:f,flags1:_,files1:h,fileparameter1:g,name2:E,probeversion2:v,type2:b,group2:M,description2:y,probeexecutable2:D,parent2:k,config2:w,attribute2:O,dependency2:x,parameter2:C,flags2:A,files2:P,fileparameter2:I,loading:!1}),t.next=42;break;case 39:t.prev=39,t.t0=t.catch(3),this.setState({error:t.t0,loading:!1});case 42:case 43:case"end":return t.stop()}}),t,this,[[3,39]])}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.name1,a=e.name2,r=e.probeversion1,n=e.probeversion2,i=e.type1,s=e.type2,o=e.probeexecutable1,c=e.probeexecutable2,l=e.parent1,u=e.parent2,m=e.config1,d=e.config2,p=e.attribute1,_=e.attribute2,h=e.dependency1,f=e.dependency2,g=e.parameter1,E=e.parameter2,v=e.flags1,b=e.flags2,M=e.group1,y=e.group2,D=e.loading,k=e.description1,w=e.description2,O=e.error;return D?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.m,null):O?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.h,{error:O}):!D&&t&&a?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_10___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("h2",{className:"ml-3 mt-1 mb-4"},"Compare ".concat(this.name))),t!==a&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.e,{title:"name",item1:t,item2:a}),r!==n&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.e,{title:"probe version",item1:r,item2:n}),i!==s&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.e,{title:"type",item1:i,item2:s}),M&&y&&M!==y&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.e,{title:"group",item1:M,item2:y}),k!==w&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.e,{title:"description",item1:k,item2:w}),o!==c&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.e,{title:"probe executable",item1:o,item2:c}),l!==u&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.e,{title:"parent",item1:l,item2:u}),!arraysEqual(m,d)&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(InlineDiffElement,{title:"config",item1:m,item2:d}),!arraysEqual(p,_)&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(InlineDiffElement,{title:"attribute",item1:p,item2:_}),!arraysEqual(h,f)&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(InlineDiffElement,{title:"dependency",item1:h,item2:f}),!arraysEqual(g,E)&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(InlineDiffElement,{title:"parameter",item1:g,item2:E}),!arraysEqual(v,b)&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(InlineDiffElement,{title:"flags",item1:v,item2:b})):null}}]),n}(react__WEBPACK_IMPORTED_MODULE_10__.Component)}var MetricChange=function(e){_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default()(i,e);var t,a,r,n=_createSuper2(i);function i(e){var t;return _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default()(this,i),(t=n.call(this,e)).name=e.match.params.name,t.addview=e.addview,t.location=e.location,t.history=e.history,t.backend=new _DataManager__WEBPACK_IMPORTED_MODULE_11__.a,t.publicView=e.publicView,t.state={metric:{},probe:{},groups:[],probeversions:[],allprobeversions:[],metrictemplateversions:[],loading:!1,popoverOpen:!1,write_perm:!1,areYouSureModal:!1,modalFunc:void 0,modalTitle:void 0,modalMsg:void 0,error:null},t.toggleAreYouSure=t.toggleAreYouSure.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(t)),t.toggleAreYouSureSetModal=t.toggleAreYouSureSetModal.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(t)),t.onSubmitHandle=t.onSubmitHandle.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(t)),t.doChange=t.doChange.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(t)),t.doDelete=t.doDelete.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(t)),t.togglePopOver=t.togglePopOver.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(t)),t.onSelect=t.onSelect.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(t)),t}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default()(i,[{key:"togglePopOver",value:function(){this.setState({popoverOpen:!this.state.popoverOpen})}},{key:"toggleAreYouSure",value:function(){this.setState((function(e){return{areYouSureModal:!e.areYouSureModal}}))}},{key:"toggleAreYouSureSetModal",value:function(e,t,a){this.setState((function(r){return{areYouSureModal:!r.areYouSureModal,modalFunc:a,modalMsg:e,modalTitle:t}}))}},{key:"onSelect",value:function(e,t){var a=this,r=this.state.metric;this.state.metrictemplateversions.forEach((function(e){if(e.fields.probeversion===t){var n,i=(n={name:e.fields.name,probeversion:e.fields.probeversion,description:e.fields.description,group:r.group,mtype:e.fields.mtype,probeexecutable:e.fields.probeexecutable,parent:e.fields.parent,config:e.fields.config,attribute:e.fields.attribute,dependancy:e.fields.dependency,parameter:e.fields.parameter,flags:e.fields.flags,files:e.fields.flags},_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(n,"files",e.fields.files),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(n,"fileparameter",e.fields.fileparameter),n),s={};a.state.allprobeversions.forEach((function(e){e.object_repr===t&&(s=e.fields)})),a.setState({metric:i,probe:s})}}))}},{key:"onSubmitHandle",value:function(e,t){var a=this;this.toggleAreYouSureSetModal("Are you sure you want to change metric?","Change metric",(function(){return a.doChange(e,t)}))}},{key:"doChange",value:(r=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(t,a){var r,n,i,s=this;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backend.changeObject("/api/v2/internal/metric/",{name:t.name,mtype:t.type,group:t.group,description:t.description,parent:t.parent,probeversion:t.probeversion,probeexecutable:t.probeexecutable,config:t.config,attribute:t.attributes,dependancy:t.dependency,flags:t.flags,files:t.file_attributes,parameter:t.parameter,fileparameter:t.file_parameters});case 2:if(!(r=e.sent).ok){e.next=7;break}Object(_UIElements__WEBPACK_IMPORTED_MODULE_13__.r)({msg:"Metric successfully changed",title:"Changed",callback:function(){return s.history.push("/ui/metrics")}}),e.next=20;break;case 7:return n="",e.prev=8,e.next=11,r.json();case 11:i=e.sent,n=i.detail,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),n="Error changing metric";case 18:Object(_UIElements__WEBPACK_IMPORTED_MODULE_13__.q)({title:"Error: ".concat(r.status," ").concat(r.statusText),msg:n});case 20:case 21:case"end":return e.stop()}}),e,this,[[8,15]])}))),function(e,t){return r.apply(this,arguments)})},{key:"doDelete",value:(a=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(t){var a,r,n,i=this;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backend.deleteObject("/api/v2/internal/metric/".concat(t));case 2:if(!(a=e.sent).ok){e.next=7;break}Object(_UIElements__WEBPACK_IMPORTED_MODULE_13__.r)({msg:"Metric successfully deleted",title:"Deleted",callback:function(){return i.history.push("/ui/metrics")}}),e.next=19;break;case 7:return r="",e.prev=8,e.next=11,a.json();case 11:n=e.sent,r=n.detail,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),r="Error deleting metric";case 18:Object(_UIElements__WEBPACK_IMPORTED_MODULE_13__.q)({title:"Error: ".concat(a.status," ").concat(a.statusText),msg:r});case 19:case 20:case"end":return e.stop()}}),e,this,[[8,15]])}))),function(e){return a.apply(this,arguments)})},{key:"componentDidMount",value:(t=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){var t,a,r,n,i,s,o,c,l,u,m;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({loading:!0}),e.prev=1,this.addview){e.next=46;break}if(this.publicView){e.next=28;break}return e.next=6,this.backend.isActiveSession();case 6:return t=e.sent,e.next=9,this.backend.fetchData("/api/v2/internal/metric/".concat(this.name));case 9:return a=e.sent,e.next=12,this.backend.fetchData("/api/v2/internal/version/metrictemplate/".concat(this.name));case 12:if(r=e.sent,!t.active){e.next=25;break}if(!a.probeversion){e.next=24;break}return e.next=17,this.backend.fetchData("/api/v2/internal/version/probe/".concat(a.probeversion.split(" ")[0]));case 17:n=e.sent,i={},s=[],n.forEach((function(e){s.push(e.object_repr),e.object_repr===a.probeversion&&(i=e.fields)})),this.setState({metric:a,probe:i,probeversions:s,allprobeversions:n,metrictemplateversions:r,groups:t.userdetails.groups.metrics,loading:!1,write_perm:t.userdetails.is_superuser||t.userdetails.groups.metrics.indexOf(a.group)>=0}),e.next=25;break;case 24:this.setState({metric:a,groups:t.userdetails.groups.metrics,loading:!1,write_perm:t.userdetails.is_superuser||t.userdetails.groups.metrics.indexOf(a.group)>=0});case 25:e.next=46;break;case 28:return e.next=30,this.backend.fetchData("/api/v2/internal/public_metric/".concat(this.name));case 30:return o=e.sent,e.next=33,this.backend.fetchData("/api/v2/internal/public_version/metrictemplate/".concat(this.name));case 33:if(c=e.sent,!o.probeversion){e.next=44;break}return e.next=37,this.backend.fetchData("/api/v2/internal/public_version/probe/".concat(o.probeversion.split(" ")[0]));case 37:l=e.sent,u={},m=[],l.forEach((function(e){m.push(e.object_repr),e.object_repr===o.probeversion&&(u=e.fields)})),this.setState({metric:o,probe:u,probeversions:m,allprobeversions:l,metrictemplateversions:c,groups:[],loading:!1,write_perm:!1}),e.next=45;break;case 44:this.setState({metric:o,groups:[],loading:!1,write_perm:!1});case 45:case 46:e.next=52;break;case 49:e.prev=49,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 52:case 53:case"end":return e.stop()}}),e,this,[[1,49]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,a=t.metric,r=t.probeversions,n=t.groups,i=t.loading,s=t.write_perm,o=t.error;return n.includes(a.group)||n.push(a.group),i?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.m,null):o?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.h,{error:o}):i?void 0:react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.b,{resourcename:"metric",location:this.location,addview:this.addview,modal:!0,state:this.state,toggle:this.toggleAreYouSure,publicview:this.publicView,submitperm:s},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.d,{enableReinitialize:!0,initialValues:{name:a.name,probeversion:a.probeversion,description:a.description,type:a.mtype,group:a.group,probeexecutable:a.probeexecutable,parent:a.parent,config:a.config,attributes:a.attribute,dependency:a.dependancy,parameter:a.parameter,flags:a.flags,file_attributes:a.files,file_parameters:a.fileparameter},onSubmit:function(t,a){return e.onSubmitHandle(t,a)},render:function(t){return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.c,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(MetricForm,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({},t,{obj:"metric",isTenantSchema:!0,state:e.state,onSelect:e.onSelect,togglePopOver:e.togglePopOver,probeversions:r,groups:n,publicView:e.publicView})),s&&react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement("div",{className:"submit-row d-flex align-items-center justify-content-between bg-light p-3 mt-5"},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_19__.a,{color:"danger",onClick:function(){e.toggleAreYouSureSetModal("Are you sure you want to delete Metric?","Delete metric",(function(){return e.doDelete(t.values.name)}))}},"Delete"),react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(reactstrap__WEBPACK_IMPORTED_MODULE_19__.a,{color:"success",id:"submit-button",type:"submit"},"Save")))}}))}}]),i}(react__WEBPACK_IMPORTED_MODULE_10__.Component),MetricVersionDetails=function(e){_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default()(r,e);var t,a=_createSuper2(r);function r(e){var t;return _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default()(this,r),(t=a.call(this,e)).name=e.match.params.name,t.version=e.match.params.version,t.backend=new _DataManager__WEBPACK_IMPORTED_MODULE_11__.a,t.state={name:"",probeversion:"",probe:{package:""},description:"",mtype:"",group:"",probeexecutable:"",parent:"",config:[],attribute:[],dependancy:[],parameter:[],flags:[],files:[],fileparameter:[],loading:!1,error:null},t}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default()(r,[{key:"componentDidMount",value:(t=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){var t=this;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData("/api/v2/internal/tenantversion/metric/".concat(this.name));case 4:e.sent.forEach(function(){var e=_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(a){var r,n;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.version!=t.version){e.next=7;break}return e.next=3,t.backend.fetchData("/api/v2/internal/version/probe/".concat(a.fields.probeversion.split(" ")[0]));case 3:r=e.sent,n={},r.forEach((function(e){e.object_repr===a.fields.probeversion&&(n=e.fields)})),t.setState({name:a.fields.name,probeversion:a.fields.probeversion,probe:n,description:a.fields.description,type:a.fields.mtype,group:a.fields.group,probeexecutable:a.fields.probeexecutable,parent:a.fields.parent,config:a.fields.config,attribute:a.fields.attribute,dependancy:a.fields.dependancy,parameter:a.fields.parameter,flags:a.fields.flags,files:a.fields.files,fileparameter:a.fields.fileparameter,date_created:a.date_created,loading:!1});case 7:case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 11:case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,a=t.name,r=t.probeversion,n=t.type,i=t.group,s=t.probeexecutable,o=t.parent,c=t.config,l=t.attribute,u=t.dependancy,m=t.parameter,d=t.flags,p=t.files,_=t.fileparameter,h=t.date_created,f=t.loading,g=t.description,E=t.error;return f?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.m,null):E?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.h,{error:E}):!f&&a?react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(_UIElements__WEBPACK_IMPORTED_MODULE_13__.b,{resourcename:"".concat(a," (").concat(h,")"),infoview:!0},react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.d,{initialValues:{name:a,probeversion:r,type:n,group:i,description:g,probeexecutable:s,parent:o,config:c,attributes:l,dependency:u,parameter:m,flags:d,files:p,fileparameter:_},render:function(t){return react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(formik__WEBPACK_IMPORTED_MODULE_15__.c,null,react__WEBPACK_IMPORTED_MODULE_10___default.a.createElement(MetricForm,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({},t,{obj:"metric",state:e.state,isHistory:!0})))}})):null}}]),r}(react__WEBPACK_IMPORTED_MODULE_10__.Component)},ZnWx:function(e,t,a){(e.exports=a("JPst")(!1)).push([e.i,".metricprofiles-autocomplete-menu {\n  display: block;\n  width: 40%;\n  color: #495057;\n  position: absolute;\n  background-color: white;\n  z-index: 1000;\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  border: 1px solid #ced4da;\n  border-radius: 0.25rem;\n  overflow-y: auto;\n  max-height: 400px;\n}\n\n.metricprofiles-autocomplete-entries {\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  color: #495057;\n  padding: 0.375rem 1.75rem 0.375rem 0.75rem;\n}\n\n.metricprofiles-autocomplete-entries-highlighted {\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  background-color: #4A90D9;\n  color: white;\n  padding: 0.375rem 1.75rem 0.375rem 0.75rem;\n}\n\n.ReactTable .rt-thead.-header {\n  box-shadow: none;\n}\n\n.ReactTable .-pagination {\n  box-shadow: none;\n}\n\n.ReactTable .-pagination select {\n  display: inline-block;\n  transition: background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;\n  width: 100%;\n  height: calc(1.5em + .75rem + 2px);\n  padding: .375rem 1.75rem .375rem .75rem;\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  color: #495057;\n  vertical-align: middle;\n  background: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e\") no-repeat right .75rem center/8px 10px;\n  background-color: rgba(0, 0, 0, 0);\n  background-color: #fff;\n  border: 1px solid #ced4da;\n  border-radius: .25rem;\n  border-top-left-radius: 0.25rem;\n  border-bottom-left-radius: 0.25rem;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n",""])},"a/x8":function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return p}));var r=a("o0o1"),n=a.n(r),i=a("yXPU"),s=a.n(i),o=a("lwsE"),c=a.n(o),l=a("W8MJ"),u=a.n(l),m=a("9ONQ"),d=function(){function e(){c()(this,e)}var t,a,r,i,o,l,d;return u()(e,[{key:"isActiveSession",value:(d=s()(n.a.mark((function e(){var t,a,r=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(r.length>0&&void 0!==r[0])||r[0],e.prev=1,e.next=4,fetch("/api/v2/internal/sessionactive/".concat(t));case 4:if(!(a=e.sent).ok){e.next=9;break}return e.abrupt("return",a.json());case 9:return e.abrupt("return",!1);case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[1,12]])}))),function(){return d.apply(this,arguments)})},{key:"isTenantSchema",value:(l=s()(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v2/internal/istenantschema");case 3:if(!(t=e.sent).ok){e.next=11;break}return e.next=7,t.json();case 7:return a=e.sent,e.abrupt("return",a.isTenantSchema);case 11:return e.abrupt("return",null);case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),function(){return l.apply(this,arguments)})},{key:"fetchPublicToken",value:(o=s()(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v2/internal/public_apikey");case 3:if(!(t=e.sent).ok){e.next=11;break}return e.next=7,t.json();case 7:return a=e.sent,e.abrupt("return",a.token);case 11:return e.abrupt("return",null);case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),function(){return o.apply(this,arguments)})},{key:"fetchConfigOptions",value:(i=s()(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v2/internal/config_options");case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"fetchData",value:(r=s()(n.a.mark((function e(t){var a,r,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",e.prev=1,e.next=4,fetch(t);case 4:if(!(r=e.sent).ok){e.next=9;break}return e.abrupt("return",r.json());case 9:return e.prev=9,e.next=12,r.json();case 12:i=e.sent,a="".concat(r.status," ").concat(r.statusText,"; in fetch ").concat(t,"; ").concat(i.detail),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),a="".concat(r.status," ").concat(r.statusText,"; in fetch ").concat(t);case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(1),a="".concat(e.t1,"; in fetch ").concat(t);case 24:if(!a){e.next=27;break}throw Error(a);case 27:case"end":return e.stop()}}),e,null,[[1,21],[9,16]])}))),function(e){return r.apply(this,arguments)})},{key:"fetchListOfNames",value:(a=s()(n.a.mark((function e(t){var a,r,i,s,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",e.prev=1,e.next=4,fetch(t);case 4:if(!(r=e.sent).ok){e.next=14;break}return e.next=8,r.json();case 8:return i=e.sent,s=[],i.forEach((function(e){return s.push(e.name)})),e.abrupt("return",s);case 14:return e.prev=14,e.next=17,r.json();case 17:o=e.sent,a="".concat(r.status," ").concat(r.statusText,"; in fetch ").concat(t,"; ").concat(o.detail),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(14),a="".concat(r.status," ").concat(r.statusText,"; in fetch ").concat(t);case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(1),a="".concat(e.t1,"; in fetch ").concat(t);case 29:if(!a){e.next=32;break}throw Error(a);case 32:case"end":return e.stop()}}),e,null,[[1,26],[14,21]])}))),function(e){return a.apply(this,arguments)})},{key:"fetchResult",value:(t=s()(n.a.mark((function e(t){var a,r,i,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",e.prev=1,e.next=4,fetch(t);case 4:if(!(r=e.sent).ok){e.next=12;break}return e.next=8,r.json();case 8:return i=e.sent,e.abrupt("return",i.result);case 12:return e.prev=12,e.next=15,r.json();case 15:s=e.sent,a="".concat(r.status," ").concat(r.statusText,"; in fetch ").concat(t,"; ").concat(s.detail),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(12),a="".concat(r.status," ").concat(r.statusText,"; in fetch ").concat(t);case 22:case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(1),a="".concat(e.t1,"; in fetch ").concat(t);case 28:if(!a){e.next=31;break}throw Error(a);case 31:case"end":return e.stop()}}),e,null,[[1,25],[12,19]])}))),function(e){return t.apply(this,arguments)})},{key:"changeObject",value:function(e,t){return this.send(e,"PUT",t)}},{key:"addObject",value:function(e,t){return this.send(e,"POST",t)}},{key:"deleteObject",value:function(e){return this.send(e,"DELETE")}},{key:"importMetrics",value:function(e){return this.send("/api/v2/internal/importmetrics/","POST",e)}},{key:"send",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=new m.a;return fetch(e,{method:t,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":r.get("csrftoken"),Referer:"same-origin"},body:a&&JSON.stringify(a)})}}]),e}(),p=function(){function e(t){var a=t.token,r=void 0===a?void 0:a,n=t.metricProfiles,i=void 0===n?void 0:n,s=t.aggregationProfiles,o=void 0===s?void 0:s,l=t.thresholdsProfiles,u=void 0===l?void 0:l;t.reportsConfigurations;c()(this,e),this.token=r,this.metricprofiles=i,this.aggregationprofiles=o,this.thresholdsprofiles=u}var t,a;return u()(e,[{key:"fetchMetricProfiles",value:(a=s()(n.a.mark((function e(){var t,a,r,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.prev=1,e.next=4,fetch(this.metricprofiles,{headers:{Accept:"application/json","x-api-key":this.token}});case 4:if(!(a=e.sent).ok){e.next=12;break}return e.next=8,a.json();case 8:return r=e.sent,e.abrupt("return",r.data);case 12:return e.prev=12,e.next=15,a.json();case 15:i=e.sent,t="".concat(a.status," ").concat(a.statusText,"; in fetch ").concat(this.metricprofiles,"; ").concat(i.status.details),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(12),t="".concat(a.status," ").concat(a.statusText,"; in fetch ").concat(this.metricprofiles);case 22:case 23:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(1),t="".concat(e.t1,"; in fetch ").concat(this.metricprofiles);case 29:if(!t){e.next=32;break}throw Error(t);case 32:case"end":return e.stop()}}),e,this,[[1,26],[12,19]])}))),function(){return a.apply(this,arguments)})},{key:"fetchMetricProfile",value:function(e){return this.fetchProfile("".concat(this.metricprofiles,"/").concat(e))}},{key:"fetchAggregationProfile",value:function(e){return this.fetchProfile("".concat(this.aggregationprofiles,"/").concat(e))}},{key:"fetchThresholdsProfile",value:function(e){return this.fetchProfile("".concat(this.thresholdsprofiles,"/").concat(e))}},{key:"changeAggregation",value:function(e){return this.changeProfile(this.aggregationprofiles,e)}},{key:"changeMetricProfile",value:function(e){return this.changeProfile(this.metricprofiles,e)}},{key:"changeThresholdsProfile",value:function(e){return this.changeProfile(this.thresholdsprofiles,e)}},{key:"addMetricProfile",value:function(e){return this.addProfile(this.metricprofiles,e)}},{key:"addAggregation",value:function(e){return this.addProfile(this.aggregationprofiles,e)}},{key:"addThresholdsProfile",value:function(e){return this.addProfile(this.thresholdsprofiles,e)}},{key:"deleteMetricProfile",value:function(e){return this.deleteProfile("".concat(this.metricprofiles,"/").concat(e))}},{key:"deleteAggregation",value:function(e){return this.deleteProfile("".concat(this.aggregationprofiles,"/").concat(e))}},{key:"deleteThresholdsProfile",value:function(e){return this.deleteProfile("".concat(this.thresholdsprofiles,"/").concat(e))}},{key:"fetchProfile",value:(t=s()(n.a.mark((function e(t){var a,r,i,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",e.prev=1,e.next=4,fetch(t,{headers:{Accept:"application/json","x-api-key":this.token}});case 4:if(!(r=e.sent).ok){e.next=12;break}return e.next=8,r.json();case 8:return i=e.sent,e.abrupt("return",i.data[0]);case 12:return e.prev=12,e.next=15,r.json();case 15:s=e.sent,a=s.status.details?"".concat(r.status," ").concat(r.statusText,"; in fetch ").concat(t,"; ").concat(s.status.details):s.errors[0].details?"".concat(r.status," ").concat(r.statusText,"; in fetch ").concat(t,"; ").concat(s.errors[0].details):"".concat(r.status," ").concat(r.statusText,"; in fetch ").concat(t),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(12),a="".concat(r.status," ").concat(r.statusText,"; in fetch ").concat(t);case 22:case 23:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(1),a="".concat(e.t1,"; in fetch ").concat(t);case 29:if(!a){e.next=32;break}throw Error(a);case 32:case"end":return e.stop()}}),e,this,[[1,26],[12,19]])}))),function(e){return t.apply(this,arguments)})},{key:"changeProfile",value:function(e,t){return this.send("".concat(e,"/").concat(t.id),"PUT",t)}},{key:"addProfile",value:function(e,t){return this.send(e,"POST",t)}},{key:"deleteProfile",value:function(e){return this.send(e,"DELETE")}},{key:"send",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return fetch(e,{method:t,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","x-api-key":this.token},body:a&&JSON.stringify(a)})}}]),e}()},acgP:function(e,t,a){var r=a("ZnWx");"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,n);r.locals&&(e.exports=r.locals)},b4bE:function(e,t,a){var r=a("s1Uj");"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,n);r.locals&&(e.exports=r.locals)},dLgX:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return r}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}}).call(this,a("8oxB"))},dtk8:function(e,t,a){(e.exports=a("JPst")(!1)).push([e.i,".bodyreact {\n  background-color: #ecf0f5;\n}\n.login-first-row {\n  margin-top: 10%;\n}\n#argo-loginheader {\n  background-color:#416090;\n}\n#argo-loginfooter {\n  background-color:#ffffff;\n}\n",""])},eVqg:function(e,t,a){(e.exports=a("JPst")(!1)).push([e.i,".group-operation {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n       appearance: none;\n  text-align: center;\n}\n\n.group-operation > select {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n       appearance: none;\n  text-align: center;\n}\n\n.aggregation-autocomplete-menu {\n  display: block;\n  width: 100%;\n  color: #495057;\n  position: absolute;\n  background-color: white;\n  z-index: 1000;\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  border: 1px solid #ced4da;\n  border-radius: 0.25rem;\n  overflow-y: auto;\n  max-height: 400px;\n}\n\n.aggregation-autocomplete-entries {\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  color: #495057;\n  padding: 0.375rem 1.75rem 0.375rem 0.75rem;\n}\n\n.aggregation-autocomplete-entries-highlighted {\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  background-color: #4A90D9;\n  color: white;\n  padding: 0.375rem 1.75rem 0.375rem 0.75rem;\n}\n\n",""])},f1jT:function(e,t,a){"use strict";a.r(t);var r=a("q1tI"),n=a.n(r),i=a("i8i4"),s=a.n(i),o=a("o0o1"),c=a.n(o),l=a("yXPU"),u=a.n(l),m=a("lwsE"),d=a.n(m),p=a("W8MJ"),_=a.n(p),h=a("PJYZ"),f=a.n(h),g=a("7W2i"),E=a.n(g),v=a("a1gu"),b=a.n(v),M=a("Nsbk"),y=a.n(M),D=a("pVnL"),k=a.n(D),w=a("QILm"),O=a.n(w),x=a("1Yj4"),A=a("ok1R"),P=a("rhny"),C=a("BLzl"),I=a("afej"),S=a("/kxI"),T=a("jrRI"),N=a("3OM0"),L=a("aLZG"),U=a("sOKU"),j=a("cZcL"),R=a("KYPV"),W=a("5tO7"),B=a.n(W),K=(a("ML16"),a("29KK")),z=a("a/x8");var Y=function(e){E()(s,e);var t,a,r,i=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,r=y()(e);if(t()){var n=y()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return b()(this,a)}}(s);function s(e){var t;return d()(this,s),(t=i.call(this,e))._isMounted=!1,t.state={samlIdpString:null,loginFailedVisible:!1,isTenantSchema:null,loading:!1},t.backend=new z.a,t.dismissLoginAlert=t.dismissLoginAlert.bind(f()(t)),t.AppOnLogin=e.onLogin,t}return _()(s,[{key:"fetchSamlButtonString",value:(r=u()(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v2/internal/config_options");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(0),alert("Something went wrong: ".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),function(){return r.apply(this,arguments)})},{key:"componentDidMount",value:(a=u()(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._isMounted=!0,this.setState({loading:!0}),e.next=4,this.backend.isTenantSchema();case 4:if(!(t=e.sent)){e.next=12;break}return e.next=8,this.fetchSamlButtonString();case 8:a=e.sent,this._isMounted&&this.setState({isTenantSchema:t,samlIdpString:a.result.saml_login_string,loading:!1}),e.next=13;break;case 12:this._isMounted&&this.setState({isTenantSchema:t,loading:!1});case 13:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"doUserPassLogin",value:(t=u()(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/rest-auth/login/",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json",Referer:"same-origin"},body:JSON.stringify({username:t,password:a})});case 2:return e.sent,e.abrupt("return",this.backend.isActiveSession(this.state.isTenantSchema));case 4:case"end":return e.stop()}}),e,this)}))),function(e,a){return t.apply(this,arguments)})},{key:"dismissLoginAlert",value:function(){this._isMounted&&this.setState({loginFailedVisible:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isTenantSchema,r=t.loading;return null===a||r?null!==a||r?null:n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Something went wrong"),n.a.createElement("p",null,"Cannot obtain schema")):n.a.createElement(x.a,null,n.a.createElement(A.a,{className:"login-first-row"},n.a.createElement(P.a,{sm:{size:4,offset:4}},n.a.createElement(C.a,null,n.a.createElement(I.a,{id:"argo-loginheader",className:"d-sm-inline-flex align-items-center justify-content-around"},n.a.createElement("img",{src:B.a,id:"argologo",alt:"ARGO logo"}),n.a.createElement("h4",{className:"text-light"},n.a.createElement("strong",null,"ARGO")," POEM")),n.a.createElement(S.a,null,n.a.createElement(R.d,{initialValues:{username:"",password:""},onSubmit:function(){var t=u()(c.a.mark((function t(a){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.doUserPassLogin(a.username,a.password);case 2:(r=t.sent).active?e.AppOnLogin(r.userdetails):e.setState({loginFailedVisible:!0});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},n.a.createElement(R.c,null,n.a.createElement(T.a,null,n.a.createElement(N.a,{for:"username"},"Username: "),n.a.createElement(R.a,{name:"username",className:"form-control"})),n.a.createElement(T.a,null,n.a.createElement(N.a,{for:"password"},"Password: "),n.a.createElement(R.a,{name:"password",className:"form-control",type:"password"})),n.a.createElement(T.a,null,n.a.createElement(L.a,{color:"danger",isOpen:this.state.loginFailedVisible,toggle:this.dismissLoginAlert,fade:!1},n.a.createElement("p",{className:"text-center"},"Login failed, invalid username and password provided"))),n.a.createElement("div",{className:"pt-3"}),n.a.createElement(T.a,null,n.a.createElement(U.a,{color:"success",type:"submit",block:!0},"Login using username and password"),this.state.isTenantSchema&&n.a.createElement("a",{className:"btn btn-success btn-block",role:"button",href:"/saml2/login"},this.state.samlIdpString))))),n.a.createElement(j.a,{id:"argo-loginfooter"},n.a.createElement(K.j,{loginPage:!0}))))))}}]),s}(r.Component),V=a("MVZn"),Q=a.n(V),F=a("lSNA"),q=a.n(F),H=a("RIqP"),G=a.n(H),Z=a("55Ip"),J=a("/8CB"),X=a.n(J),$=a("0enf"),ee=(a("qBGJ"),a("IP2g")),te=a("wHSu"),ae=a("XNy0"),re=a.n(ae),ne=a("lCZi");a("acgP");function ie(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,r=y()(e);if(t()){var n=y()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return b()(this,a)}}var se=Object(K.k)("metricprofile"),oe=de(!0),ce=de();function le(e,t){return-1!==e.toLowerCase().indexOf(t.toLowerCase())}var ue=function(e){var t=e.view_services,a=e.name,r=e.groupname,n=new Object,i=!1,s=!1;n.view_services=new Array(t.length);var o=!0,c=!1,l=void 0;try{for(var u,m=t[Symbol.iterator]();!(o=(u=m.next()).done);o=!0){var d=u.value,p=!0,_=!1,h=void 0;try{for(var f,g=t[Symbol.iterator]();!(p=(f=g.next()).done);p=!0){var E=f.value;d.index!==E.index&&d.service===E.service&&d.metric===E.metric&&(d.isNew||d.serviceChanged||d.metricChanged)&&(n.view_services[d.index]=new Object,n.view_services[d.index].dup="Duplicated",i=!0)}}catch(e){_=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(_)throw h}}}}catch(e){c=!0,l=e}finally{try{o||null==m.return||m.return()}finally{if(c)throw l}}a||(n.name="Required",s=!0),r||(n.groupname="Required",s=!0);var v=!0,b=!1,M=void 0;try{for(var y,D=t[Symbol.iterator]();!(v=(y=D.next()).done);v=!0){d=y.value;var k=void 0;n.view_services[d.index]||(n.view_services[d.index]=new Object),k=n.view_services[d.index],!d.service&&d.isNew&&(k.service="Required",s=!0),!d.metric&&d.isNew&&(k.metric="Required",s=!0)}}catch(e){b=!0,M=e}finally{try{v||null==D.return||D.return()}finally{if(b)throw M}}return i||s?n:new Object},me=function(e){var t=e.serviceflavours_all,a=e.metrics_all,r=e.search_handler,i=e.remove_handler,s=e.insert_handler,o=e.onselect_handler,c=e.form,l=e.remove,u=e.insert;return n.a.createElement("table",{className:"table table-bordered table-sm table-hover"},n.a.createElement("thead",{className:"table-active"},n.a.createElement("tr",null,n.a.createElement("th",{className:"align-middle text-center",style:{width:"5%"}},"#"),n.a.createElement("th",{style:{width:"42.5%"}},n.a.createElement(K.l,{i:"serviceflavour"})," Service flavour"),n.a.createElement("th",{style:{width:"42.5%"}},n.a.createElement(K.l,{i:"metrics"})," Metric"),n.a.createElement("th",{style:{width:"10%"}},"Actions"))),n.a.createElement("tbody",null,n.a.createElement("tr",{style:{background:"#ECECEC"}},n.a.createElement("td",{className:"align-middle text-center"},n.a.createElement(ee.a,{icon:te.m})),n.a.createElement("td",null,n.a.createElement(R.a,{type:"text",name:"search_serviceflavour",required:!1,className:"form-control",id:"searchServiceFlavour",onChange:function(e){return r(e,"view_services","searchServiceFlavour","service","searchMetric","metric")},component:K.v})),n.a.createElement("td",null,n.a.createElement(R.a,{type:"text",name:"search_metric",required:!1,className:"form-control",id:"searchMetric",onChange:function(e){return r(e,"view_services","searchMetric","metric","searchServiceFlavour","service")},component:K.v})),n.a.createElement("td",null,"")),c.values.view_services.map((function(e,r){return n.a.createElement(n.a.Fragment,{key:r},n.a.createElement("tr",{key:r},n.a.createElement("td",{className:e.isNew?"bg-light align-middle text-center":"align-middle text-center"},r+1),n.a.createElement("td",{className:e.isNew?"bg-light":""},n.a.createElement(X.a,{inputProps:{className:'"form-control custom-select " '.concat(e.isNew?"border border-success":e.serviceChanged?"border border-danger":"")},getItemValue:function(e){return e},items:t,value:e.service,renderItem:function(e,a){return n.a.createElement("div",{key:t.indexOf(e),className:"metricprofiles-autocomplete-entries ".concat(a?"metricprofiles-autocomplete-entries-highlighted":"")},e?n.a.createElement(K.l,{i:"serviceflavour"}):""," ",e)},onChange:function(e){return c.setFieldValue("view_services.".concat(r,".service"),e.target.value)},onSelect:function(e){c.setFieldValue("view_services.".concat(r,".service"),e),c.setFieldValue("view_services.".concat(r,".serviceChanged"),!0),o(c.values.view_services[r],"service",e)},wrapperStyle:{},shouldItemRender:le,renderMenu:function(e){return n.a.createElement("div",{className:"metricprofiles-autocomplete-menu"},e)}}),c.errors&&c.errors.view_services&&c.errors.view_services[r]&&c.errors.view_services[r].service?Object(K.i)(c.errors.view_services[r].service):null),n.a.createElement("td",{className:e.isNew?"bg-light":""},n.a.createElement(X.a,{inputProps:{className:'"form-control custom-select " '.concat(e.isNew?"border border-success":e.metricChanged?"border border-danger":"")},getItemValue:function(e){return e},items:a,value:e.metric,renderItem:function(e,t){return n.a.createElement("div",{key:a.indexOf(e),className:"metricprofiles-autocomplete-entries ".concat(t?"metricprofiles-autocomplete-entries-highlighted":"")},e?n.a.createElement(K.l,{i:"metrics"}):""," ",e)},onChange:function(e){return c.setFieldValue("view_services.".concat(r,".metric"),e.target.value)},onSelect:function(e){c.setFieldValue("view_services.".concat(r,".metric"),e),c.setFieldValue("view_services.".concat(r,".metricChanged"),!0),o(c.values.view_services[r],"metric",e)},wrapperStyle:{},shouldItemRender:le,renderMenu:function(e){return n.a.createElement("div",{className:"metricprofiles-autocomplete-menu"},e)}}),c.errors&&c.errors.view_services&&c.errors.view_services[r]&&c.errors.view_services[r].metric?Object(K.i)(c.errors.view_services[r].metric):null),n.a.createElement("td",{className:e.isNew?"bg-light align-middle pl-3":"align-middle pl-3"},n.a.createElement(U.a,{size:"sm",color:"light",type:"button",onClick:function(){if(i(c.values.view_services[r]),r>0&&c.values.view_services.length>1)return l(r)}},n.a.createElement(ee.a,{icon:te.s})),n.a.createElement(U.a,{size:"sm",color:"light",type:"button",onClick:function(){var e={index:r+1,service:"",metric:"",isNew:!0};return s(e,r+1,c.values.groupname,c.values.name,c.values.description),u(r+1,e)}},n.a.createElement(ee.a,{icon:te.l})))),c.errors&&c.errors.view_services&&c.errors.view_services[r]&&c.errors.view_services[r].dup?n.a.createElement("tr",{key:r+c.values.view_services.length},n.a.createElement("td",{className:"bg-light"}),n.a.createElement("td",{colSpan:"2",className:"bg-light text-center"},Object(K.i)(c.errors.view_services[r].dup)),n.a.createElement("td",{className:"bg-light"})):null)}))))};function de(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){E()(o,t);var a,r,i,s=ie(o);function o(t){var a;return d()(this,o),(a=s.call(this,t)).tenant_name=t.tenant_name,a.token=t.webapitoken,a.webapimetric=t.webapimetric,a.profile_name=t.match.params.name,a.addview=t.addview,a.history=t.history,a.location=t.location,a.cloneview=e,a.publicView=t.publicView,a.state={metric_profile:{},metric_profile_name:void 0,metric_profile_description:void 0,groupname:void 0,list_user_groups:void 0,view_services:void 0,list_services:void 0,write_perm:!1,serviceflavours_all:void 0,metrics_all:void 0,areYouSureModal:!1,loading:!1,modalFunc:void 0,modalTitle:void 0,modalMsg:void 0,searchServiceFlavour:"",searchMetric:"",error:null},a.backend=new z.a,a.webapi=new z.b({token:t.webapitoken,metricProfiles:t.webapimetric}),a.toggleAreYouSure=a.toggleAreYouSure.bind(f()(a)),a.toggleAreYouSureSetModal=a.toggleAreYouSureSetModal.bind(f()(a)),a.handleSearch=a.handleSearch.bind(f()(a)),a.onRemove=a.onRemove.bind(f()(a)),a.onInsert=a.onInsert.bind(f()(a)),a.onSelect=a.onSelect.bind(f()(a)),a}return _()(o,[{key:"flattenServices",value:function(e){var t=[],a=0;return e.forEach((function(e){var r=e.service;e.metrics.forEach((function(e){t.push({index:a,service:r,metric:e}),a+=1}))})),t}},{key:"componentDidMount",value:(i=u()(c.a.mark((function e(){var t,a,r,n,i,s,o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({loading:!0}),e.prev=1,!this.publicView){e.next=12;break}return e.next=5,this.backend.fetchData("/api/v2/internal/public_metricprofiles/".concat(this.profile_name));case 5:return t=e.sent,e.next=8,this.webapi.fetchMetricProfile(t.apiid);case 8:a=e.sent,this.setState({metric_profile:a,metric_profile_name:a.name,metric_profile_description:a.description,groupname:t.groupname,list_user_groups:[],write_perm:!1,view_services:this.flattenServices(a.services).sort(this.sortServices),serviceflavours_all:[],metrics_all:[],list_services:this.flattenServices(a.services).sort(this.sortServices),loading:!1}),e.next=35;break;case 12:return e.next=14,this.backend.isActiveSession();case 14:if(!(r=e.sent).active){e.next=35;break}return e.next=18,this.backend.fetchListOfNames("/api/v2/internal/serviceflavoursall");case 18:return n=e.sent,e.next=21,this.backend.fetchListOfNames("/api/v2/internal/metricsall");case 21:if(i=e.sent,this.addview&&!this.cloneview){e.next=32;break}return e.next=25,this.backend.fetchData("/api/v2/internal/metricprofiles/".concat(this.profile_name));case 25:return s=e.sent,e.next=28,this.webapi.fetchMetricProfile(s.apiid);case 28:o=e.sent,this.setState({metric_profile:o,metric_profile_name:o.name,metric_profile_description:o.description,groupname:s.groupname,list_user_groups:r.userdetails.groups.metricprofiles,write_perm:r.userdetails.is_superuser||r.userdetails.groups.metricprofiles.indexOf(s.groupname)>=0,view_services:this.flattenServices(o.services).sort(this.sortServices),serviceflavours_all:n,metrics_all:i,list_services:this.flattenServices(o.services).sort(this.sortServices),loading:!1}),e.next=34;break;case 32:l={id:"",name:"",services:[]},this.setState({metric_profile:l,metric_profile_name:"",metric_profile_description:"",groupname:"",list_user_groups:r.userdetails.groups.metricprofiles,write_perm:r.userdetails.is_superuser||r.userdetails.groups.metricprofiles.length>0,view_services:[{service:"",metric:"",index:0,isNew:!0}],serviceflavours_all:n,metrics_all:i,list_services:[{service:"",metric:"",index:0,isNew:!0}],loading:!1});case 34:case 35:e.next=41;break;case 38:e.prev=38,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 41:case 42:case"end":return e.stop()}}),e,this,[[1,38]])}))),function(){return i.apply(this,arguments)})},{key:"toggleAreYouSureSetModal",value:function(e,t,a){this.setState((function(r){return{areYouSureModal:!r.areYouSureModal,modalFunc:a,modalMsg:e,modalTitle:t}}))}},{key:"toggleAreYouSure",value:function(){this.setState((function(e){return{areYouSureModal:!e.areYouSureModal}}))}},{key:"sortServices",value:function(e,t){if(e.service.toLowerCase()<t.service.toLowerCase())return-1;if(e.service.toLowerCase()>t.service.toLowerCase())return 1;if(e.service.toLowerCase()===t.service.toLowerCase()){if(e.metric.toLowerCase()<t.metric.toLowerCase())return-1;if(e.metric.toLowerCase()>t.metric.toLowerCase())return 1;if(e.metric.toLowerCase()===t.metric.toLowerCase())return 0}}},{key:"handleSearch",value:function(e,t,a,r,n,i){var s,o=this,c=this.state[t.replace("view_","list_")],l=G()(this.state.list_services);if(this.state[a].length>e.target.value.length){c=this.state[t.replace("view_","list_")].filter((function(t){return le(t[r],e.target.value)}));var u=0;l.forEach((function(e){e.index=u,u+=1})),l.sort(this.sortServices)}else""!==e.target.value&&(c=this.state[t].filter((function(t){return le(t[r],e.target.value)})));this.state[n].length&&(c=c.filter((function(e){return le(e[i],o.state[n])}))),c.sort(this.sortServices),this.setState((s={},q()(s,"".concat(a),e.target.value),q()(s,"".concat(t),c),q()(s,"list_services",l),s))}},{key:"onInsert",value:function(e,t,a,r,n){if(""===this.state.searchServiceFlavour&&""===this.state.searchMetric){var i=e.service,s=e.metric,o=G()(this.state.list_services),c=G()(o).slice(0,t),l=G()(o).slice(t);c.push({index:t,service:i,metric:s,isNew:!0});var u=0;c.forEach((function(e){e.index=u,u+=1})),u=c.length,l.forEach((function(e){e.index=u,u+=1})),o=[].concat(G()(c),G()(l)),this.setState({list_services:o,view_services:o,groupname:a,metric_profile_name:r,metric_profile_description:n})}else{var m=G()(this.state.view_services),d=G()(this.state.list_services),p=G()(m).slice(0,t),_=G()(m).slice(t);p.push(Q()({},e,{isNew:!0}));var h=0;p.forEach((function(e){e.index=h,h+=1})),h=t+1,_.forEach((function(e){e.index=h,h+=1})),d.push(Q()({},e,{isNew:!0})),this.setState({view_services:[].concat(G()(p),G()(_)),list_services:d})}}},{key:"onSubmitHandle",value:function(e,t){var a=this,r=e.formValues,n=e.servicesList,i=void 0,s=void 0;this.addview||this.cloneview?(i="Are you sure you want to add Metric profile?",s="Add metric profile"):(i="Are you sure you want to change Metric profile?",s="Change metric profile"),this.toggleAreYouSureSetModal(i,s,(function(){return a.doChange({formValues:r,servicesList:n},t)}))}},{key:"groupMetricsByServices",value:function(e){var t=[];return e.forEach((function(e){var a=t.filter((function(t){return t.service===e.service}));a.length?a[0].metrics.push(e.metric):t.push({service:e.service,metrics:[e.metric]})})),t}},{key:"doChange",value:(r=u()(c.a.mark((function e(t,a){var r,n,i,s,o,l,u,m,d,p,_,h,f,g,E,v,b,M,y,D,k=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.formValues,n=t.servicesList,i=[],s=new Object,this.addview||this.cloneview){e.next=52;break}return o=this.state.metric_profile.id,i=this.groupMetricsByServices(n),s={id:o,name:r.name,description:r.description,services:i},e.next=9,this.webapi.changeMetricProfile(s);case 9:if((l=e.sent).ok){e.next=28;break}return u="",e.prev=12,e.next=15,l.json();case 15:m=e.sent,d=[],m.errors.forEach((function(e){return d.push(e.details)})),u=d.join(" "),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(12),u="Web API error changing metric profile";case 24:Object(K.q)({title:"Web API error: ".concat(l.status," ").concat(l.statusText),msg:u}),e.next=49;break;case 28:return e.next=30,this.backend.changeObject("/api/v2/internal/metricprofiles/",{apiid:s.id,name:s.name,description:s.description,groupname:r.groupname,services:r.view_services});case 30:if(!(p=e.sent).ok){e.next=35;break}Object(K.r)({msg:"Metric profile succesfully changed",title:"Changed",callback:function(){return k.history.push("/ui/metricprofiles")}}),e.next=48;break;case 35:return _="",e.prev=36,e.next=39,p.json();case 39:h=e.sent,_=h.detail,e.next=46;break;case 43:e.prev=43,e.t1=e.catch(36),_="Internal API error changing metric profile";case 46:Object(K.q)({title:"Internal API error: ".concat(p.status," ").concat(p.statusText),msg:_});case 48:case 49:e.next=99;break;case 52:return i=this.groupMetricsByServices(n),s={name:r.name,description:r.description,services:i},e.next=56,this.webapi.addMetricProfile(s);case 56:if((f=e.sent).ok){e.next=75;break}return g="",e.prev=59,e.next=62,f.json();case 62:E=e.sent,v=[],E.errors.forEach((function(e){return v.push(e.details)})),g=v.join(" "),e.next=71;break;case 68:e.prev=68,e.t2=e.catch(59),g="Web API error adding metric profile";case 71:Object(K.q)({title:"Web API error: ".concat(f.status," ").concat(f.statusText),msg:g}),e.next=98;break;case 75:return e.next=77,f.json();case 77:return b=e.sent,e.next=80,this.backend.addObject("/api/v2/internal/metricprofiles/",{apiid:b.data.id,name:s.name,groupname:r.groupname,description:r.description,services:r.view_services});case 80:if(!(M=e.sent).ok){e.next=85;break}Object(K.r)({msg:"Metric profile successfully added",title:"Added",callback:function(){return k.history.push("/ui/metricprofiles")}}),e.next=98;break;case 85:return y="",e.prev=86,e.next=89,M.json();case 89:D=e.sent,y=D.detail,e.next=96;break;case 93:e.prev=93,e.t3=e.catch(86),y="Internal API error adding metric profile";case 96:Object(K.q)({title:"Internal API error: ".concat(M.status," ").concat(M.statusText),msg:y});case 98:case 99:case 100:case"end":return e.stop()}}),e,this,[[12,21],[36,43],[59,68],[86,93]])}))),function(e,t){return r.apply(this,arguments)})},{key:"doDelete",value:(a=u()(c.a.mark((function e(t){var a,r,n,i,s,o,l,u=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.webapi.deleteMetricProfile(t);case 2:if((a=e.sent).ok){e.next=21;break}return r="",e.prev=5,e.next=8,a.json();case 8:n=e.sent,i=[],n.errors.forEach((function(e){return i.push(e.details)})),r=i.join(" "),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),r="Web API error deleting metric profile";case 17:Object(K.q)({title:"Web API error: ".concat(a.status," ").concat(a.statusText),msg:r}),e.next=42;break;case 21:return e.next=23,this.backend.deleteObject("/api/v2/internal/metricprofiles/".concat(t));case 23:if(!(s=e.sent).ok){e.next=28;break}Object(K.r)({msg:"Metric profile sucessfully deleted",title:"Deleted",callback:function(){return u.history.push("/ui/metricprofiles")}}),e.next=41;break;case 28:return o="",e.prev=29,e.next=32,s.json();case 32:l=e.sent,o=l.detail,e.next=39;break;case 36:e.prev=36,e.t1=e.catch(29),o="Internal API error deleting metric profile";case 39:Object(K.q)({title:"Internal API error: ".concat(s.status," ").concat(s.statusText),msg:o});case 41:case 42:case 43:case"end":return e.stop()}}),e,this,[[5,14],[29,36]])}))),function(e){return a.apply(this,arguments)})},{key:"onSelect",value:function(e,t,a){var r=e.index,n=G()(this.state.list_services),i=G()(this.state.view_services),s=n.findIndex((function(e){return e.index===r&&!0===e.isNew}));s>=0?(n[s][t]=a,n[s][t+"Changed"]=a):(n[r][t]=a,n[r][t+"Changed"]=a);for(var o=0;o<i.length;o++)i[o].index===r&&(i[o][t]=a,i[o][t+"Changed"]=!0);this.setState({list_services:n,view_services:i})}},{key:"onRemove",value:function(e){var t=[],a=[],r=this.state.list_services.findIndex((function(t){return e.index===t.index&&e.service===t.service&&e.metric===t.metric})),n=this.state.view_services.findIndex((function(t){return e.index===t.index&&e.service===t.service&&e.metric===t.metric}));if(1===this.state.view_services.length&&1===this.state.list_services.length)a=[{index:0,service:"",metric:""}],t=[{index:0,service:"",metric:""}];else if(r>=0&&n>=0){a=G()(this.state.list_services),t=G()(this.state.view_services),a.splice(r,1),t.splice(n,1);for(var i=r;i<a.length;i++){var s=a[i].index;a[i].index=s-1}for(i=n;i<t.length;i++){var o=t[i].index;t[i].index=o-1}}this.setState({list_services:a,view_services:t})}},{key:"render",value:function(){var e,t=this,a=this.state,r=a.write_perm,i=a.loading,s=a.metric_profile_description,o=a.view_services,c=a.groupname,l=a.list_user_groups,u=a.serviceflavours_all,m=a.metrics_all,d=a.searchMetric,p=a.searchServiceFlavour,_=a.error,h=this.state,f=h.metric_profile,g=h.metric_profile_name;return this.cloneview&&f&&g&&f.id&&(f.id="",g="Cloned "+g),i?n.a.createElement(K.m,null):_?n.a.createElement(K.h,{error:_}):!i&&f&&o?n.a.createElement(K.b,(e={resourcename:"Metric profile",location:this.location,addview:this.addview,modal:!0,cloneview:this.cloneview,clone:!0,state:this.state,toggle:this.toggleAreYouSure},q()(e,"addview",this.publicView?!this.publicView:this.addview),q()(e,"publicview",this.publicView),q()(e,"submitperm",r),e),n.a.createElement(R.d,{initialValues:{id:f.id,name:g,description:s,groupname:c,view_services:o,search_metric:d,search_serviceflavour:p},onSubmit:function(e,a){return t.onSubmitHandle({formValues:e,servicesList:t.state.list_services},a)},enableReinitialize:!0,validate:ue,render:function(e){return n.a.createElement(R.c,null,n.a.createElement(K.t,k()({},e,{description:"description",grouplist:r?l:[c],profiletype:"metric"})),n.a.createElement("h4",{className:"mt-4 alert-info p-1 pl-3 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"Metric instances"),n.a.createElement(R.b,{name:"view_services",render:function(e){return n.a.createElement(me,k()({},e,{serviceflavours_all:u,metrics_all:m,search_handler:t.handleSearch,remove_handler:t.onRemove,insert_handler:t.onInsert,onselect_handler:t.onSelect}))}}),r&&n.a.createElement("div",{className:"submit-row d-flex align-items-center justify-content-between bg-light p-3 mt-5"},n.a.createElement(U.a,{color:"danger",onClick:function(){t.toggleAreYouSureSetModal("Are you sure you want to delete Metric profile?","Delete metric profile",(function(){return t.doDelete(e.values.id)}))}},"Delete"),n.a.createElement(U.a,{color:"success",id:"submit-button",type:"submit"},"Save")))}})):null}}]),o}(r.Component)}var pe=function(e){E()(r,e);var t,a=ie(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).state={loading:!1,list_metricprofiles:null,write_perm:!1,error:null},t.location=e.location,t.backend=new z.a,t.publicView=e.publicView,t.publicView?t.apiUrl="/api/v2/internal/public_metricprofiles":t.apiUrl="/api/v2/internal/metricprofiles",t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData(this.apiUrl);case 4:if(t=e.sent,this.publicView){e.next=12;break}return e.next=8,this.backend.isActiveSession();case 8:a=e.sent,this.setState({list_metricprofiles:t,loading:!1,write_perm:a.userdetails.is_superuser||a.userdetails.groups.metricprofiles.length>0}),e.next=13;break;case 12:this.setState({list_metricprofiles:t,loading:!1});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 18:case 19:case"end":return e.stop()}}),e,this,[[1,15]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=[{Header:"Name",id:"name",maxWidth:350,accessor:function(t){return n.a.createElement(Z.b,{to:"/ui/".concat(e.publicView?"public_":"","metricprofiles/")+t.name},t.name)}},{Header:"Description",accessor:"description"},{Header:"Group",accessor:"groupname",className:"text-center",maxWidth:150}],a=this.state,r=a.loading,i=a.list_metricprofiles,s=a.write_perm,o=a.error;return r?n.a.createElement(K.m,null):o?n.a.createElement(K.h,{error:o}):!r&&i?n.a.createElement(K.b,{resourcename:"metric profile",location:this.location,listview:!0,addnew:!this.publicView,addperm:s,publicview:this.publicView},n.a.createElement($.a,{data:i,columns:t,className:"-highlight",defaultPageSize:12,rowsText:"profiles",getTheadThProps:function(){return{className:"table-active font-weight-bold p-2"}}})):null}}]),r}(r.Component),_e=function(e){for(var t=e.title,a=e.item1,r=e.item2,i=[],s=[],o=0;o<a.length;o++)i.push("service: ".concat(a[o].service,", metric: ").concat(a[o].metric));for(var c=0;c<r.length;c++)s.push("service: ".concat(r[c].service,", metric: ").concat(r[c].metric));return n.a.createElement("div",{id:"argo-contentwrap",className:"ml-2 mb-2 mt-2 p-3 border rounded"},n.a.createElement("h6",{className:"mt-4 font-weight-bold text-uppercase"},t),n.a.createElement(re.a,{oldValue:s.join("\n"),newValue:i.join("\n"),showDiffOnly:!1,splitView:!0,hideLineNumbers:!0}))},he=function(e){E()(r,e);var t,a=ie(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).version1=e.match.params.id1,t.version2=e.match.params.id2,t.name=e.match.params.name,t.state={loading:!1,name1:"",groupname1:"",metricinstances1:[],name2:"",groupname2:"",metricinstances2:[],error:null},t.backend=new z.a,t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t,a,r,n,i,s,o,l,u,m=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData("/api/v2/internal/tenantversion/metricprofile/".concat(this.name));case 4:t=e.sent,a="",r="",n="",i=[],s="",o="",l="",u=[],t.forEach((function(e){e.version==m.version1?(a=e.fields.name,n=e.fields.description,r=e.fields.groupname,i=e.fields.metricinstances):e.version==m.version2&&(s=e.fields.name,o=e.fields.groupname,l=e.fields.description,u=e.fields.metricinstances)})),this.setState({name1:a,groupname1:r,description1:n,metricinstances1:i,name2:s,description2:l,groupname2:o,metricinstances2:u,loading:!1}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 20:case 21:case"end":return e.stop()}}),e,this,[[1,17]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.name1,a=e.name2,r=e.description1,i=e.description2,s=e.groupname1,o=e.groupname2,c=e.metricinstances1,l=e.metricinstances2,u=e.loading,m=e.error;return u?n.a.createElement(K.m,null):m?n.a.createElement(K.h,{error:m}):!u&&t&&a?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},n.a.createElement("h2",{className:"ml-3 mt-1 mb-4"},"Compare ".concat(this.name," versions"))),t!==a&&n.a.createElement(K.e,{title:"name",item1:t,item2:a}),t!==a&&n.a.createElement(K.e,{title:"name",item1:t,item2:a}),r!==i&&n.a.createElement(K.e,{title:"name",item1:r,item2:i}),s!==o&&n.a.createElement(K.e,{title:"groupname",item1:s,item2:o}),c!==l&&n.a.createElement(_e,{title:"metric instances",item1:c,item2:l})):null}}]),r}(r.Component),fe=function(e){E()(r,e);var t,a=ie(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).name=e.match.params.name,t.version=e.match.params.version,t.backend=new z.a,t.state={name:"",groupname:"",description:"",date_created:"",metricinstances:[],loading:!1,error:null},t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData("/api/v2/internal/tenantversion/metricprofile/".concat(this.name));case 4:e.sent.forEach((function(e){e.version==t.version&&t.setState({name:e.fields.name,groupname:e.fields.groupname,description:e.fields.description,date_created:e.date_created,metricinstances:e.fields.metricinstances,loading:!1})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 11:case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.name,a=e.description,r=e.groupname,i=e.date_created,s=e.metricinstances,o=e.loading,c=e.error;return o?n.a.createElement(K.m,null):c?n.a.createElement(K.h,{error:c}):!o&&t?n.a.createElement(K.b,{resourcename:"".concat(t," (").concat(i,")"),infoview:!0},n.a.createElement(R.d,{initialValues:{name:t,description:a,groupname:r,metricinstances:s},render:function(e){return n.a.createElement(R.c,null,n.a.createElement(K.t,k()({},e,{fieldsdisable:!0,description:"description",profiletype:"metric"})),n.a.createElement("h4",{className:"mt-4 alert-info p-1 pl-3 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"Metric instances"),n.a.createElement(R.b,{name:"metricinstances",render:function(t){return n.a.createElement("table",{className:"table table-bordered table-sm"},n.a.createElement("thead",{className:"table-active"},n.a.createElement("tr",null,n.a.createElement("th",{className:"align-middle text-center",style:{width:"5%"}},"#"),n.a.createElement("th",{style:{width:"47.5%"}},n.a.createElement(K.l,{i:"serviceflavour"}),"Service flavour"),n.a.createElement("th",{style:{width:"47.5%"}},n.a.createElement(K.l,{i:"metrics"}),"Metric"))),n.a.createElement("tbody",null,e.values.metricinstances.map((function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",{className:"align-middle text-center"},t+1),n.a.createElement("td",null,e.service),n.a.createElement("td",null,e.metric))}))))}}))}})):null}}]),r}(r.Component),ge=function(e){return n.a.createElement("div",null,'"I\'m Home"')},Ee=a("q7Gj"),ve=a("re1l"),be=a("0E8A");function Me(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,r=y()(e);if(t()){var n=y()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return b()(this,a)}}var ye=Object(K.k)("probe"),De=Pe(),ke=Pe(!0),we=ne.object().shape({name:ne.string().matches(/^\S*$/,"Name cannot contain white spaces").required("Required"),package:ne.string().required("Required"),repository:ne.string().url("Invalid url").required("Required"),docurl:ne.string().url("Invalid url").required("Required"),description:ne.string().required("Required"),comment:ne.string().required("Required")}),Oe=function(e){var t=e.field.value;O()(e,["field"]);return n.a.createElement("div",{className:"form-control",style:{backgroundColor:"#e9ecef",overflow:"hidden",textOverflow:"ellipsis"}},n.a.createElement("a",{href:t,style:{whiteSpace:"nowrap"}},t))},xe=function(e){var t=e.isTenantSchema,a=void 0!==t&&t,r=e.isHistory,i=void 0!==r&&r,s=e.errors,o=void 0===s?{name:void 0,package:void 0,repository:void 0,docurl:void 0,comment:void 0}:s,c=e.state,l=void 0===c?void 0:c,u=e.addview,m=void 0!==u&&u,d=e.cloneview,p=void 0!==d&&d,_=e.list_packages,h=void 0===_?[]:_,f=e.setFieldValue,g=void 0===f?void 0:f,E=e.values,v=void 0===E?void 0:E,b=e.onSelect,M=void 0===b?void 0:b,y=e.metrictemplatelist,D=void 0===y?[]:y;return n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,null,n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Name"),n.a.createElement(R.a,{type:"text",name:"name",className:"form-control ".concat(o.name&&"border-danger"),id:"name",disabled:a||i})),o.name&&Object(K.i)(o.name),n.a.createElement(be.a,{color:"muted"},"Name of this probe.")),n.a.createElement(P.a,{md:2},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Version"),n.a.createElement(R.a,{type:"text",name:"version",className:"form-control",value:i?l.version:l.probe.version,id:"version",disabled:!0})),n.a.createElement(be.a,{color:"muted"},"Version of the probe.")),!m&&!p&&!a&&!i&&n.a.createElement(P.a,{md:2},n.a.createElement(R.a,{component:K.c,name:"update_metrics",className:"form-control",id:"checkbox",label:"Update metric templates"}),n.a.createElement(be.a,{color:"muted"},"Update all associated metric templates."))),n.a.createElement(A.a,{className:"mt-3"},n.a.createElement(P.a,{md:8},a||i?n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Package"),n.a.createElement(R.a,{type:"text",name:"package",className:"form-control",id:"package",disabled:!0})):n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,{setFieldValue:g,lists:h,icon:"packages",field:"package",val:v.package,onselect_handler:M,req:o.package,label:"Package"}),o.package&&Object(K.i)(o.package)),n.a.createElement(be.a,{color:"muted"},"Probe is part of selected package.")))),n.a.createElement(T.a,null,n.a.createElement("h4",{className:"mt-2 p-1 pl-3 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"Probe metadata"),n.a.createElement(A.a,{className:"mt-4 mb-3 align-items-top"},n.a.createElement(P.a,{md:8},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Repository"),a||i?n.a.createElement(R.a,{component:Oe,name:"repository",className:"form-control",id:"repository",disabled:!0}):n.a.createElement(R.a,{type:"text",name:"repository",className:"form-control ".concat(o.repository&&"border-danger"),id:"repository"})),o.repository&&Object(K.i)(o.repository),n.a.createElement(be.a,{color:"muted"},"Probe repository URL."))),n.a.createElement(A.a,{className:"mb-3 align-items-top"},n.a.createElement(P.a,{md:8},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Documentation"),a||i?n.a.createElement(R.a,{component:Oe,name:"docurl",className:"form-control",id:"docurl",disabled:!0}):n.a.createElement(R.a,{type:"text",name:"docurl",className:"form-control ".concat(o.docurl&&"border-danger"),id:"docurl"})),o.docurl&&Object(K.i)(o.docurl),n.a.createElement(be.a,{color:"muted"},"Documentation URL."))),n.a.createElement(A.a,{className:"mb-3 align-items-top"},n.a.createElement(P.a,{md:8},n.a.createElement(N.a,{for:"description"},"Description"),n.a.createElement(R.a,{component:"textarea",name:"description",rows:"15",className:"form-control ".concat(o.description&&"border-danger"),id:"description",disabled:a||i}),o.description&&Object(K.i)(o.description),n.a.createElement(be.a,{color:"muted"},"Free text description outlining the purpose of this probe."))),n.a.createElement(A.a,{className:"mb-3 align-items-top"},n.a.createElement(P.a,{md:8},n.a.createElement(N.a,{for:"comment"},"Comment"),n.a.createElement(R.a,{component:"textarea",name:"comment",rows:"5",className:"form-control ".concat(o.comment&&"border-danger"),id:"comment",disabled:a||i}),o.comment&&Object(K.i)(o.comment),n.a.createElement(be.a,{color:"muted"},"Short comment about this version."))),!i&&!m&&!p&&n.a.createElement(A.a,null,n.a.createElement(P.a,{md:8},n.a.createElement("div",null,"Metric templates:",D.length>0&&n.a.createElement("div",null,D.map((function(e,t){return n.a.createElement(Z.b,{key:t,to:a?"/ui/probes/".concat(v.name,"/").concat(e):"/ui/metrictemplates/".concat(e)},e)})).reduce((function(e,t){return[e,", ",t]}))))))))},Ae=function(e){E()(r,e);var t,a=Me(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).location=e.location,t.publicView=e.publicView,t.state={loading:!1,list_probe:null,isTenantSchema:null,search_name:"",search_description:"",search_package:"",error:null},t.backend=new z.a,t.publicView?t.apiListProbes="/api/v2/internal/public_probes":t.apiListProbes="/api/v2/internal/probes",t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData(this.apiListProbes);case 4:return t=e.sent,e.next=7,this.backend.isTenantSchema();case 7:a=e.sent,this.setState({list_probe:t,isTenantSchema:a,loading:!1,search_name:""}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 14:case 15:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=[{Header:"#",id:"row",minWidth:12,Cell:function(e){return n.a.createElement("div",{style:{textAlign:"center"}},e.index+1)}},{Header:"Name",id:"name",minWidth:80,accessor:function(t){return n.a.createElement(Z.b,{to:"/ui/".concat(e.publicView?"public_":"","probes/").concat(t.name)},t.name)},filterable:!0,Filter:n.a.createElement("input",{value:this.state.search_name,onChange:function(t){return e.setState({search_name:t.target.value})},placeholder:"Search by name",style:{width:"100%"}})},{Header:"#versions",id:"nv",minWidth:25,accessor:function(t){return n.a.createElement(Z.b,{to:"/ui/".concat(e.publicView&&"public_","probes/").concat(t.name,"/history")},t.nv)},Cell:function(e){return n.a.createElement("div",{style:{textAlign:"center"}},e.value)}},{Header:"Package",minWidth:120,accessor:"package",filterable:!0,Filter:n.a.createElement("input",{type:"text",placeholder:"Search by package",value:this.state.search_package,onChange:function(t){return e.setState({search_package:t.target.value})},style:{width:"100%"}}),filterMethod:function(e,t){return void 0===t[e.id]||String(t[e.id]).toLowerCase().includes(e.value.toLowerCase())}},{Header:"Description",minWidth:200,accessor:"description",filterable:!0,Filter:n.a.createElement("input",{type:"text",placeholder:"Search by description",value:this.state.search_description,onChange:function(t){return e.setState({search_description:t.target.value})},style:{width:"100%"}}),filterMethod:function(e,t){return void 0===t[e.id]||String(t[e.id]).toLowerCase().includes(e.value.toLowerCase())}}],a=this.state,r=a.isTenantSchema,i=a.list_probe,s=a.loading,o=a.error;return this.state.search_name&&(i=i.filter((function(t){return t.name.toLowerCase().includes(e.state.search_name.toLowerCase())}))),this.state.search_description&&(i=i.filter((function(t){return t.description.toLowerCase().includes(e.state.search_description.toLowerCase())}))),this.state.search_package&&(i=i.filter((function(t){return t.package.toLowerCase().includes(e.state.search_package.toLowerCase())}))),s?n.a.createElement(K.m,null):o?n.a.createElement(K.h,{error:o}):!s&&i?n.a.createElement(K.b,{resourcename:"probe",location:this.location,listview:!0,addnew:!r},n.a.createElement($.a,{data:i,columns:t,className:"-highlight",defaultPageSize:50,rowsText:"probes",getTheadThProps:function(){return{className:"table-active font-weight-bold p-2"}}})):null}}]),r}(r.Component);function Pe(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){E()(o,t);var a,r,i,s=Me(o);function o(e){var t;return d()(this,o),(t=s.call(this,e)).name=e.match.params.name,t.addview=e.addview,t.location=e.location,t.history=e.history,t.backend=new z.a,t.publicView=e.publicView,t.publicView?(t.apiListPackages="/api/v2/internal/public_packages",t.apiProbeName="/api/v2/internal/public_probes",t.apiMetricsForProbes="/api/v2/internal/public_metricsforprobes"):(t.apiListPackages="/api/v2/internal/packages",t.apiProbeName="/api/v2/internal/probes",t.apiMetricsForProbes="/api/v2/internal/metricsforprobes"),t.state={probe:{id:"",name:"",version:"",package:"",repository:"",docurl:"",description:"",comment:""},isTenantSchema:null,metrictemplatelist:[],list_packages:[],validationVisible:!0,update_metrics:!1,loading:!1,areYouSureModal:!1,modalFunc:void 0,modalTitle:void 0,modalMsg:void 0,error:null},t.toggleAreYouSure=t.toggleAreYouSure.bind(f()(t)),t.toggleAreYouSureSetModal=t.toggleAreYouSureSetModal.bind(f()(t)),t.onSubmitHandle=t.onSubmitHandle.bind(f()(t)),t.doDelete=t.doDelete.bind(f()(t)),t.onDismiss=t.onDismiss.bind(f()(t)),t.onSelect=t.onSelect.bind(f()(t)),t}return _()(o,[{key:"toggleAreYouSure",value:function(){this.setState((function(e){return{areYouSureModal:!e.areYouSureModal}}))}},{key:"toggleAreYouSureSetModal",value:function(e,t,a){this.setState((function(r){return{areYouSureModal:!r.areYouSureModal,modalFunc:a,modalMsg:e,modalTitle:t}}))}},{key:"onSubmitHandle",value:function(t,a){var r=this,n=void 0,i=void 0;this.addview||e?(n="Are you sure you want to add probe?",i="Add probe"):(n="Are you sure you want to change probe?",i="Change probe"),this.toggleAreYouSureSetModal(n,i,(function(){return r.doChange(t,a)}))}},{key:"doChange",value:(i=u()(c.a.mark((function t(a,r){var n,i,s,o,l,u,m,d=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.addview&&!e){t.next=25;break}return n=void 0,n=e?a.id:"",t.next=5,this.backend.addObject("/api/v2/internal/probes/",{name:a.name,package:a.package,repository:a.repository,docurl:a.docurl,description:a.description,comment:a.comment,cloned_from:n});case 5:if((i=t.sent).ok){t.next=21;break}return s="",t.prev=8,t.next=11,i.json();case 11:o=t.sent,s=o.detail,t.next=18;break;case 15:t.prev=15,t.t0=t.catch(8),s="Error adding probe";case 18:Object(K.q)({title:"Error: ".concat(i.status," ").concat(i.statusText),msg:s}),t.next=22;break;case 21:Object(K.r)({msg:"Probe successfully added",title:"Added",callback:function(){return d.history.push("/ui/probes")}});case 22:t.next=46;break;case 25:return t.next=27,this.backend.changeObject("/api/v2/internal/probes/",{id:a.id,name:a.name,package:a.package,repository:a.repository,docurl:a.docurl,description:a.description,comment:a.comment,update_metrics:a.update_metrics});case 27:if((l=t.sent).ok){t.next=44;break}return u="",t.prev=30,t.next=33,l.json();case 33:m=t.sent,u=m.detail,t.next=40;break;case 37:t.prev=37,t.t1=t.catch(30),u="Error changing probe";case 40:Object(K.q)({title:"Error: ".concat(l.status," ").concat(l.statusText),msg:u}),t.next=45;break;case 44:Object(K.r)({msg:"Probe successfully changed",title:"Changed",callback:function(){return d.history.push("/ui/probes")}});case 45:case 46:case 47:case"end":return t.stop()}}),t,this,[[8,15],[30,37]])}))),function(e,t){return i.apply(this,arguments)})},{key:"doDelete",value:(r=u()(c.a.mark((function e(t){var a,r,n,i=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backend.deleteObject("/api/v2/internal/probes/".concat(t));case 2:if((a=e.sent).ok){e.next=19;break}return r="",e.prev=5,e.next=8,a.json();case 8:n=e.sent,r=n.detail,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),r="Error deleting probe";case 15:Object(K.q)({title:"Error: ".concat(a.status," ").concat(a.statusText),msg:r}),e.next=20;break;case 19:Object(K.r)({msg:"Probe successfully deleted",title:"Deleted",callback:function(){return i.history.push("/ui/probes")}});case 20:case 21:case"end":return e.stop()}}),e,this,[[5,12]])}))),function(e){return r.apply(this,arguments)})},{key:"onDismiss",value:function(){this.setState({validationVisible:!1})}},{key:"onSelect",value:function(e,t){var a=this.state.probe;a[e]=t,a.version=t.split(" ")[1].slice(1,-1),this.setState({probe:a})}},{key:"componentDidMount",value:(a=u()(c.a.mark((function e(){var t,a,r,n,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.isTenantSchema();case 4:return t=e.sent,e.next=7,this.backend.fetchData(this.apiListPackages);case 7:if(a=e.sent,r=[],a.forEach((function(e){return r.push("".concat(e.name," (").concat(e.version,")"))})),this.addview){e.next=20;break}return e.next=13,this.backend.fetchData("".concat(this.apiProbeName,"/").concat(this.name));case 13:return n=e.sent,e.next=16,this.backend.fetchData("".concat(this.apiMetricsForProbes,"/").concat(n.name,"(").concat(n.version,")"));case 16:i=e.sent,this.setState({probe:n,list_packages:r,isTenantSchema:t,metrictemplatelist:i,loading:!1}),e.next=21;break;case 20:this.setState({list_packages:r,isTenantSchema:t,loading:!1});case 21:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 27:case 28:case"end":return e.stop()}}),e,this,[[1,24]])}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var t=this,a=this.state,r=a.probe,i=a.update_metrics,s=a.isTenantSchema,o=a.metrictemplatelist,c=a.list_packages,l=a.loading,u=a.error;return l?n.a.createElement(K.m,null):u?n.a.createElement(K.h,{error:u}):l?void 0:s?n.a.createElement(K.b,{resourcename:"Probe details",location:this.location,tenantview:!0,history:!0},n.a.createElement(R.d,{initialValues:{id:r.id,name:r.name,version:r.version,package:r.package,repository:r.repository,docurl:r.docurl,description:r.description,comment:r.comment},render:function(e){return n.a.createElement(xe,k()({},e,{isTenantSchema:!0,state:t.state,metrictemplatelist:o}))}})):n.a.createElement(K.b,{resourcename:"probe",location:this.location,addview:this.addview,cloneview:e,clone:!0,modal:!0,state:this.state,toggle:this.toggleAreYouSure},n.a.createElement(R.d,{initialValues:{id:r.id,name:r.name,version:r.version,package:r.package,repository:r.repository,docurl:r.docurl,description:r.description,comment:r.comment,update_metrics:i},validationSchema:we,onSubmit:function(e,a){return t.onSubmitHandle(e,a)}},(function(a){return n.a.createElement(R.c,null,n.a.createElement(xe,k()({},a,{state:t.state,addview:t.addview,cloneview:e,list_packages:c,onSelect:t.onSelect,metrictemplatelist:o})),n.a.createElement("div",{className:"submit-row d-flex align-items-center justify-content-between bg-light p-3 mt-5"},t.addview||e?n.a.createElement("div",null):n.a.createElement(U.a,{color:"danger",onClick:function(){t.toggleAreYouSureSetModal("Are you sure you want to delete probe?","Delete probe",(function(){return t.doDelete(a.values.name)}))}},"Delete"),n.a.createElement(U.a,{color:"success",id:"submit-button",type:"submit"},"Save")))})))}}]),o}(r.Component)}var Ce=function(e){E()(r,e);var t,a=Me(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).version1=e.match.params.id1,t.version2=e.match.params.id2,t.name=e.match.params.name,t.publicView=e.publicView,t.state={loading:!1,name1:"",version1:"",package1:"",description1:"",repository1:"",docurl1:"",comment1:"",name2:"",version2:"",package2:"",description2:"",repository2:"",docurl2:"",comment2:"",error:null},t.publicView?t.apiUrl="/api/v2/internal/public_version/probe/":t.apiUrl="/api/v2/internal/version/probe/",t.backend=new z.a,t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t,a,r,n,i,s,o,l,u,m,d,p,_,h,f,g=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData("".concat(this.apiUrl,"/").concat(this.name));case 4:t=e.sent,a="",r="",n="",i="",s="",o="",l="",u="",m="",d="",p="",_="",h="",f="",t.forEach((function(e){e.version==g.version1?(a=e.fields.name,r=e.fields.version,n=e.fields.package,i=e.fields.description,s=e.fields.repository,o=e.fields.docurl,l=e.fields.comment):e.version===g.version2&&(u=e.fields.name,m=e.fields.version,d=e.fields.package,p=e.fields.description,_=e.fields.repository,h=e.fields.docurl,f=e.fields.comment)})),this.setState({name1:a,version1:r,package1:n,description1:i,repository1:s,docurl1:o,comment1:l,name2:u,version2:m,package2:d,description2:p,repository2:_,docurl2:h,comment2:f,loading:!1}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 26:case 27:case"end":return e.stop()}}),e,this,[[1,23]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.name1,a=e.name2,r=e.version1,i=e.version2,s=e.package1,o=e.package2,c=e.description1,l=e.description2,u=e.repository1,m=e.repository2,d=e.docurl1,p=e.docurl2,_=e.comment1,h=e.comment2,f=e.loading,g=e.error;return f?n.a.createElement(K.m,null):g?n.a.createElement(K.h,{error:g}):!f&&t&&a?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},n.a.createElement("h2",{className:"ml-3 mt-1 mb-4"},"Compare "+this.name)),t!==a&&n.a.createElement(K.e,{title:"name",item1:t,item2:a}),r!==i&&n.a.createElement(K.e,{title:"version",item1:r,item2:i}),s!==o&&n.a.createElement(K.e,{title:"package",item1:s,item2:o}),c!==l&&n.a.createElement(K.e,{title:"description",item1:c,item2:l}),u!==m&&n.a.createElement(K.e,{title:"repository",item1:u,item2:m}),d!==p&&n.a.createElement(K.e,{title:"documentation",item1:d,item2:p}),_!==h&&n.a.createElement(K.e,{title:"comment",item1:_,item2:h})):null}}]),r}(r.Component),Ie=function(e){E()(r,e);var t,a=Me(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).name=e.match.params.name,t.version=e.match.params.version,t.publicView=e.publicView,t.backend=new z.a,t.publicView?t.apiUrl="/api/v2/internal/public_version/probe/":t.apiUrl="/api/v2/internal/version/probe/",t.state={name:"",version:"",pkg:"",description:"",repository:"",docurl:"",comment:"",loading:!1,error:null},t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData("".concat(this.apiUrl,"/").concat(this.name));case 4:e.sent.forEach((function(e){e.version===t.version&&t.setState({name:e.fields.name,version:e.fields.version,pkg:e.fields.package,description:e.fields.description,repository:e.fields.repository,docurl:e.fields.docurl,comment:e.fields.comment,loading:!1})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 11:case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,a=t.name,r=t.version,i=t.pkg,s=t.description,o=t.repository,c=t.docurl,l=t.comment,u=t.loading,m=t.error;return u?n.a.createElement(K.m,null):m?n.a.createElement(K.h,{error:m}):!u&&a?n.a.createElement(K.b,{resourcename:"".concat(a," (").concat(r,")"),infoview:!0},n.a.createElement(R.d,{initialValues:{name:a,version:r,package:i,repository:o,docurl:c,description:s,comment:l},render:function(t){return n.a.createElement(xe,k()({},t,{state:e.state,isHistory:!0}))}})):null}}]),r}(r.Component),Se=a("SKq3");function Te(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,r=y()(e);if(t()){var n=y()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return b()(this,a)}}var Ne=Object(Se.b)("metrictemplate"),Le=Object(Se.b)("metrictemplate",!0),Ue=ze(),je=ze(!0),Re=Object(K.k)("metrictemplate"),We=Object(K.k)("metrictemplate",!0),Be=Object(Se.a)("metrictemplate"),Ke=ne.object().shape({name:ne.string().matches(/^\S*$/,"Name cannot contain white spaces").required("Required"),type:ne.string(),probeversion:ne.string().when("type",{is:function(e){return"Active"===e},then:ne.string().required("Required")}),probeexecutable:ne.string().when("type",{is:function(e){return"Active"===e},then:ne.string().required("Required")})});function ze(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){E()(o,t);var a,r,i,s=Te(o);function o(e){var t;return d()(this,o),(t=s.call(this,e)).probeview=e.probeview,t.probeview?t.name=e.match.params.metrictemplatename:t.name=e.match.params.name,t.location=e.location,t.addview=e.addview,t.tenantview=e.tenantview,t.history=e.history,t.backend=new z.a,t.state={metrictemplate:{},probe:{package:""},types:[],probeversions:[],allprobeversions:[],metrictemplatelist:[],loading:!1,popoverOpen:!1,areYouSureModal:!1,modalFunc:void 0,modalTitle:void 0,modalMsg:void 0,error:null},t.toggleAreYouSure=t.toggleAreYouSure.bind(f()(t)),t.toggleAreYouSureSetModal=t.toggleAreYouSureSetModal.bind(f()(t)),t.togglePopOver=t.togglePopOver.bind(f()(t)),t.onSelect=t.onSelect.bind(f()(t)),t.onSubmitHandle=t.onSubmitHandle.bind(f()(t)),t.doChange=t.doChange.bind(f()(t)),t.doDelete=t.doDelete.bind(f()(t)),t}return _()(o,[{key:"togglePopOver",value:function(){this.setState({popoverOpen:!this.state.popoverOpen})}},{key:"toggleAreYouSure",value:function(){this.setState((function(e){return{areYouSureModal:!e.areYouSureModal}}))}},{key:"toggleAreYouSureSetModal",value:function(e,t,a){this.setState((function(r){return{areYouSureModal:!r.areYouSureModal,modalFunc:a,modalMsg:e,modalTitle:t}}))}},{key:"onSelect",value:function(e,t){var a=this.state.metrictemplate,r={};this.state.allprobeversions.forEach((function(e){e.object_repr===t&&(r=e.fields)})),a[e]=t,this.setState({metrictemplate:a,probe:r})}},{key:"onSubmitHandle",value:function(t,a){var r=this,n=void 0,i=void 0;this.addview||e?(n="Are you sure you want to add metric template?",i="Add metric template"):(n="Are you sure you want to change metric template?",i="Change metric template"),this.toggleAreYouSureSetModal(n,i,(function(){return r.doChange(t,a)}))}},{key:"doChange",value:(i=u()(c.a.mark((function t(a,r){var n,i,s,o,l,u,m,d=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.addview&&!e){t.next=26;break}return n=void 0,n=e?a.id:"",t.next=5,this.backend.addObject("/api/v2/internal/metrictemplates/",{cloned_from:n,name:a.name,probeversion:a.probeversion,mtype:a.type,description:a.description,probeexecutable:a.probeexecutable,parent:a.parent,config:a.config,attribute:a.attributes,dependency:a.dependency,parameter:a.parameter,flags:a.flags,files:a.file_attributes,fileparameter:a.file_parameters});case 5:if((i=t.sent).ok){t.next=22;break}return s="",t.prev=8,t.next=11,i.json();case 11:o=t.sent,s=o.detail,t.next=18;break;case 15:t.prev=15,t.t0=t.catch(8),s="Error adding metric template";case 18:Object(K.q)({title:"Error: ".concat(i.status," ").concat(i.statusText),msg:s}),t.next=23;break;case 22:Object(K.r)({msg:"Metric template successfully added",title:"Added",callback:function(){return d.history.push("/ui/metrictemplates")}});case 23:t.next=47;break;case 26:return t.next=28,this.backend.changeObject("/api/v2/internal/metrictemplates/",{id:a.id,name:a.name,probeversion:a.probeversion,mtype:a.type,description:a.description,probeexecutable:a.probeexecutable,parent:a.parent,config:a.config,attribute:a.attributes,dependency:a.dependency,parameter:a.parameter,flags:a.flags,files:a.file_attributes,fileparameter:a.file_parameters});case 28:if((l=t.sent).ok){t.next=45;break}return u="",t.prev=31,t.next=34,l.json();case 34:m=t.sent,u=m.detail,t.next=41;break;case 38:t.prev=38,t.t1=t.catch(31),u="Error changing metric template";case 41:"418"==l.status?Object(K.s)({title:"Warning: ".concat(l.status," ").concat(l.statusText),msg:u}):Object(K.q)({title:"Error: ".concat(l.status," ").concat(l.statusText),msg:u}),t.next=46;break;case 45:Object(K.r)({msg:"Metric template successfully changed",title:"Changed",callback:function(){return d.history.push("/ui/metrictemplates")}});case 46:case 47:case 48:case"end":return t.stop()}}),t,this,[[8,15],[31,38]])}))),function(e,t){return i.apply(this,arguments)})},{key:"doDelete",value:(r=u()(c.a.mark((function e(t){var a,r,n,i=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backend.deleteObject("/api/v2/internal/metrictemplates/".concat(t));case 2:if(!(a=e.sent).ok){e.next=7;break}Object(K.r)({msg:"Metric template successfully deleted",title:"Deleted",callback:function(){return i.history.push("/ui/metrictemplates")}}),e.next=20;break;case 7:return r="",e.prev=8,e.next=11,a.json();case 11:n=e.sent,r=n.detail,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),r="Error deleting metric template";case 18:Object(K.q)({title:"Error: ".concat(a.status," ").concat(a.statusText),msg:r});case 20:case 21:case"end":return e.stop()}}),e,this,[[8,15]])}))),function(e){return r.apply(this,arguments)})},{key:"componentDidMount",value:(a=u()(c.a.mark((function e(){var t,a,r,n,i,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData("/api/v2/internal/mttypes");case 4:return t=e.sent,e.next=7,this.backend.fetchData("/api/v2/internal/version/probe");case 7:return a=e.sent,e.next=10,this.backend.fetchData("/api/v2/internal/metrictemplates");case 10:if(r=e.sent,n=[],r.forEach((function(e){return n.push(e.name)})),i=[],a.forEach((function(e){return i.push(e.object_repr)})),this.addview){e.next=28;break}return e.next=18,this.backend.fetchData("/api/v2/internal/metrictemplates/".concat(this.name));case 18:0===(s=e.sent).attribute.length&&(s.attribute=[{key:"",value:""}]),0===s.dependency.length&&(s.dependency=[{key:"",value:""}]),0===s.parameter.length&&(s.parameter=[{key:"",value:""}]),0===s.flags.length&&(s.flags=[{key:"",value:""}]),0===s.files.length&&(s.files=[{key:"",value:""}]),0===s.fileparameter.length&&(s.fileparameter=[{key:"",value:""}]),s.probeversion?(o={},a.forEach((function(e){e.object_repr===s.probeversion&&(o=e.fields)})),this.setState({metrictemplate:s,probe:o,probeversions:i,allprobeversions:a,metrictemplatelist:n,types:t,loading:!1})):this.setState({metrictemplate:s,metrictemplatelist:n,allprobeversions:a,types:t,loading:!1}),e.next=29;break;case 28:this.setState({metrictemplate:{id:"",name:"",probeversion:"",mtype:"Active",description:"",probeexecutable:"",parent:"",config:[{key:"maxCheckAttempts",value:""},{key:"timeout",value:""},{key:"path",value:""},{key:"interval",value:""},{key:"retryInterval",value:""}],attribute:[{key:"",value:""}],dependency:[{key:"",value:""}],parameter:[{key:"",value:""}],flags:[{key:"",value:""}],files:[{key:"",value:""}],fileparameter:[{key:"",value:""}]},metrictemplatelist:n,probeversions:i,allprobeversions:a,types:t,loading:!1});case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 34:case 35:case"end":return e.stop()}}),e,this,[[1,31]])}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var t=this,a=this.state,r=a.metrictemplate,i=a.types,s=a.probeversions,o=a.metrictemplatelist,c=a.loading,l=a.error;return c?n.a.createElement(K.m,null):l?n.a.createElement(K.h,{error:l}):!c&&r?n.a.createElement(K.b,{resourcename:this.tenantview?"".concat(r.name):"metric template",location:this.location,addview:this.addview,tenantview:this.tenantview,history:!this.probeview,cloneview:e,clone:!0,modal:!0,state:this.state,toggle:this.toggleAreYouSure},n.a.createElement(R.d,{initialValues:{id:r.id,name:r.name,probeversion:r.probeversion,type:r.mtype,description:r.description,probeexecutable:r.probeexecutable,parent:r.parent,config:r.config,attributes:r.attribute,dependency:r.dependency,parameter:r.parameter,flags:r.flags,file_attributes:r.files,file_parameters:r.fileparameter},onSubmit:function(e,a){return t.onSubmitHandle(e,a)},validationSchema:Ke,render:function(a){return n.a.createElement(R.c,null,n.a.createElement(Se.d,k()({},a,{obj:"metrictemplate",isTenantSchema:t.tenantview,addview:t.addview,state:t.state,onSelect:t.onSelect,togglePopOver:t.togglePopOver,types:i,probeversions:s,metrictemplatelist:o})),!t.tenantview&&n.a.createElement("div",{className:"submit-row d-flex align-items-center justify-content-between bg-light p-3 mt-5"},t.addview||e?n.a.createElement("div",null):n.a.createElement(U.a,{color:"danger",onClick:function(){t.toggleAreYouSureSetModal("Are you sure you want to delete Metric template?","Delete metric template",(function(){return t.doDelete(a.values.name)}))}},"Delete"),n.a.createElement(U.a,{color:"success",id:"submit-button",type:"submit"},"Save")))}})):null}}]),o}(r.Component)}var Ye=function(e){E()(r,e);var t,a=Te(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).name=e.match.params.name,t.version=e.match.params.version,t.backend=new z.a,t.state={name:"",probeversion:"",probe:{package:""},mtype:"",probeexecutable:"",parent:"",description:"",config:[],attribute:[],dependency:[],parameter:[],flags:[],files:[],fileparameter:[],loading:!1,error:null},t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData("/api/v2/internal/version/metrictemplate/".concat(this.name));case 4:e.sent.forEach(function(){var e=u()(c.a.mark((function e(a){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.version!=t.version){e.next=7;break}return e.next=3,t.backend.fetchData("/api/v2/internal/version/probe/".concat(a.fields.probeversion.split(" ")[0]));case 3:r=e.sent,n={},r.forEach((function(e){e.object_repr===a.fields.probeversion&&(n=e.fields)})),t.setState({name:a.fields.name,probeversion:a.fields.probeversion,probe:n,type:a.fields.mtype,probeexecutable:a.fields.probeexecutable,description:a.fields.description,parent:a.fields.parent,config:a.fields.config,attribute:a.fields.attribute,dependency:a.fields.dependency,parameter:a.fields.parameter,flags:a.fields.flags,files:a.fields.files,fileparameter:a.fields.fileparameter,date_created:a.date_created,loading:!1});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 11:case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,a=t.name,r=t.probeversion,i=t.type,s=t.probeexecutable,o=t.parent,c=t.config,l=t.attribute,u=t.dependency,m=t.parameter,d=t.flags,p=t.files,_=t.fileparameter,h=t.loading,f=t.description,g=t.error;return h?n.a.createElement(K.m,null):g?n.a.createElement(K.h,{error:g}):!h&&a?n.a.createElement(K.b,{resourcename:"".concat(a," ").concat(r&&"[".concat(r,"]")),infoview:!0},n.a.createElement(R.d,{initialValues:{name:a,probeversion:r,type:i,probeexecutable:s,description:f,parent:o,config:c,attributes:l,dependency:u,parameter:m,flags:d,file_attributes:p,file_parameters:_},render:function(t){return n.a.createElement(R.c,null,n.a.createElement(Se.d,k()({},t,{obj:"metrictemplate",state:e.state,isHistory:!0})))}})):null}}]),r}(r.Component),Ve=function(e){return n.a.createElement(R.c,{className:"ml-2 mb-2 mt-2"},n.a.createElement("h2",{className:"ml-3 mt-1 mb-4"},"Administration"),n.a.createElement(C.a,{className:"mb-2 pb-1 pt-1"},n.a.createElement(I.a,{className:"sm-5 p-2 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"Poem"),n.a.createElement(S.a,null,n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"metrics"})," ",n.a.createElement(Z.b,{className:"pl-1",to:"/ui/metrics"},"Metrics")),n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"metricprofiles"})," ",n.a.createElement(Z.b,{className:"pl-1",to:"/ui/metricprofiles"},"Metric profiles")),n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"aggregationprofiles"})," ",n.a.createElement(Z.b,{className:"pl-1",to:"/ui/aggregationprofiles"},"Aggregation profiles")),n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"thresholdsprofiles"})," ",n.a.createElement(Z.b,{className:"pl-1",to:"/ui/thresholdsprofiles"},"Thresholds profiles")))),n.a.createElement(C.a,{className:"mb-2"},n.a.createElement(I.a,{className:"mt-2 p-2 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"Authentication and authorization"),n.a.createElement(S.a,null,n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"groupofaggregationprofiles"})," ",n.a.createElement(Z.b,{to:"/ui/administration/groupofaggregations"},"Groups of aggregations")),n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"groupofmetrics"})," ",n.a.createElement(Z.b,{to:"/ui/administration/groupofmetrics"},"Groups of metrics")),n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"groupofmetricprofiles"})," ",n.a.createElement(Z.b,{to:"/ui/administration/groupofmetricprofiles"},"Groups of metric profiles")),n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"groupofthresholdsprofiles"})," ",n.a.createElement(Z.b,{to:"/ui/administration/groupofthresholdsprofiles"},"Groups of thresholds profiles")),n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"users"})," ",n.a.createElement(Z.b,{to:"/ui/administration/users"},"Users")))),n.a.createElement(C.a,null,n.a.createElement(I.a,{className:"mt-2 p-2 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"SuperAdmin POEM data"),n.a.createElement(S.a,null,n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"metrics"})," ",n.a.createElement(Z.b,{to:"/ui/administration/metrictemplates"},"Metric templates")),n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"yumrepos"})," ",n.a.createElement(Z.b,{to:"/ui/administration/yumrepos"},"YUM repos")))),n.a.createElement(C.a,null,n.a.createElement(I.a,{className:"mt-2 p-2 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"API key permissions"),n.a.createElement(S.a,null,n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"apikey"})," ",n.a.createElement(Z.b,{to:"/ui/administration/apikey"},"API keys")))))},Qe=function(e){return n.a.createElement(R.c,{className:"ml-2 mb-2 mt-2"},n.a.createElement("h2",{className:"ml-3 mt-1 mb-4"},"Administration"),n.a.createElement(C.a,{className:"mb-2 pb-1 pt-1"},n.a.createElement(I.a,{className:"sm-5 p-2 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"Poem"),n.a.createElement(S.a,null,n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"yumrepos"})," ",n.a.createElement(Z.b,{className:"pl-1",to:"/ui/yumrepos"},"YUM repos")),n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"packages"})," ",n.a.createElement(Z.b,{className:"pl-1",to:"/ui/packages"},"Packages")),n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"probes"})," ",n.a.createElement(Z.b,{className:"pl-1",to:"/ui/probes"},"Probes")),n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"metrictemplates"})," ",n.a.createElement(Z.b,{className:"pl-1",to:"/ui/metrictemplates"},"Metric templates")))),n.a.createElement(C.a,{className:"mb-2"},n.a.createElement(I.a,{className:"mt-2 p-2 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"Authentication and authorization"),n.a.createElement(S.a,null,n.a.createElement(A.a,{className:"p-1 align-items-center"},n.a.createElement(K.l,{i:"users"})," ",n.a.createElement(Z.b,{to:"/ui/administration/users"},"Users")))))};var Fe=function(e){E()(a,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,r=y()(e);if(t()){var n=y()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return b()(this,a)}}(a);function a(){return d()(this,a),t.apply(this,arguments)}return _()(a,[{key:"componentDidUpdate",value:function(e){e.formik!==this.props.formik&&this.props.onChange(this.props.formik,e.formik)}},{key:"render",value:function(){return null}}]),a}(r.Component),qe=Object(R.e)(Fe);a("R9sY"),a("lrsP");function He(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,r=y()(e);if(t()){var n=y()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return b()(this,a)}}var Ge=Object(K.k)("aggregationprofile");function Ze(e,t){return-1!==e.toLowerCase().indexOf(t.toLowerCase())}var Je=ne.object().shape({name:ne.string().required("Required"),groupname:ne.string().required("Required")});function Xe(e,t){return e?[t].concat(G()(e)):[t]}var $e=function(e){var t=e.name,a=e.form,r=e.list_services,i=e.list_operations,s=e.last_service_operation,o=e.write_perm;return n.a.createElement(A.a,{className:"groups"},a.values[t].map((function(e,c){return n.a.createElement(R.b,{key:c,name:"groups",render:function(l){return n.a.createElement(et,k()({},l,{key:c,operation:e.operation,services:e.services,list_services:r,list_operations:i,last_service_operation:s,write_perm:o,groupindex:c,isnew:e.isNew,last:c===a.values[t].length-1}))}})})))},et=function(e){var t=e.operation,a=e.services,r=e.list_operations,i=e.list_services,s=e.last_service_operation,o=e.write_perm,c=e.form,l=e.groupindex,u=e.remove,m=e.insert,d=e.isnew;return e.last?n.a.createElement(P.a,{sm:{size:12},md:{size:6},className:"mt-4 mb-2 d-flex justify-content-center align-items-center"},n.a.createElement(U.a,{outline:!0,color:"secondary",size:"lg",disabled:!o,onClick:function(){return o&&m(l,{name:"",operation:"",isNew:!0,services:[{name:"",operation:""}]})}},"Add new group")):n.a.createElement(n.a.Fragment,{key:l},n.a.createElement(P.a,{sm:{size:8},md:{size:5},className:"mt-4 mb-2"},n.a.createElement(C.a,{className:d?"border-success":""},n.a.createElement(I.a,{className:"p-1",color:"primary"},n.a.createElement(A.a,{className:"d-flex align-items-center no-gutters"},n.a.createElement(P.a,{sm:{size:10},md:{size:11}},n.a.createElement(R.a,{name:"groups.".concat(l,".name"),placeholder:"Name of service group",required:!0,className:"form-control"})),n.a.createElement(P.a,{sm:{size:2},md:{size:1},className:"pl-1"},n.a.createElement(U.a,{size:"sm",color:"danger",type:"button",onClick:function(){return o&&u(l)}},n.a.createElement(ee.a,{icon:te.s}))))),n.a.createElement(S.a,{className:"p-1"},n.a.createElement(R.b,{name:"groups.".concat(l),render:function(e){return n.a.createElement(tt,{list_services:i,list_operations:r,last_service_operation:s,services:a,groupindex:l,groupoperation:t,groupnew:d,form:c})}})),n.a.createElement(j.a,{className:"p-1 d-flex justify-content-center"},n.a.createElement(K.f,{field:{name:"operation",value:t},data:r,prefix:"groups.".concat(l),class_name:"custom-select col-2"})))),n.a.createElement(P.a,{sm:{size:4},md:{size:1},className:"mt-5"},n.a.createElement("div",{className:"group-operation",key:l},n.a.createElement(K.f,{field:{name:"profile_operation",value:c.values.profile_operation},data:r}))))},tt=function(e){var t=e.services,a=e.list_services,r=void 0===a?[]:a,i=e.list_operations,s=void 0===i?[]:i,o=e.last_service_operation,c=e.groupindex,l=e.groupnew,u=void 0!==l&&l,m=e.form;return t.map((function(e,a){return n.a.createElement(R.b,{key:a,name:"groups.".concat(c,".services"),render:function(i){return n.a.createElement(at,k()({},i,{key:a,service:e,operation:e.operation,list_services:r,list_operations:s,last_service_operation:o,groupindex:c,groupnew:u,index:a,last:a===t.length-1,form:m,isnew:e.isnew,ismissing:-1===r.indexOf(e.name)}))}})}))},at=function(e){e.name;var t=e.service,a=e.operation,r=e.list_services,i=e.list_operations,s=e.last_service_operation,o=e.groupindex,c=e.groupnew,l=e.index,u=e.remove,m=e.insert,d=e.form,p=e.isnew,_=e.ismissing;return n.a.createElement(A.a,{className:"d-flex align-items-center service pt-1 pb-1 no-gutters",key:l},n.a.createElement(P.a,{md:8},n.a.createElement(X.a,{inputProps:{className:'"form-control custom-select " '.concat(p&&!c?"border-success":""," ").concat(_?"border-danger":"")},getItemValue:function(e){return e},items:r,value:t.name,renderItem:function(e,t){return n.a.createElement("div",{key:r.indexOf(e),className:"aggregation-autocomplete-entries ".concat(t?"aggregation-autocomplete-entries-highlighted":"")},e?n.a.createElement(K.l,{i:"serviceflavour"}):""," ",e)},onChange:function(e){return d.setFieldValue("groups.".concat(o,".services.").concat(l,".name"),e.target.value)},onSelect:function(e){d.setFieldValue("groups.".concat(o,".services.").concat(l,".name"),e)},wrapperStyle:{},shouldItemRender:Ze,renderMenu:function(e){return n.a.createElement("div",{className:"aggregation-autocomplete-menu",children:e})}})),n.a.createElement(P.a,{md:2},n.a.createElement("div",{className:"input-group"},n.a.createElement(K.f,{field:{name:"operation",value:a},data:i,prefix:"groups.".concat(o,".services.").concat(l),class_name:"custom-select service-operation",isnew:p&&!c}))),n.a.createElement(P.a,{md:2,className:"pl-2"},n.a.createElement(U.a,{size:"sm",color:"light",type:"button",onClick:function(){return u(l)}},n.a.createElement(ee.a,{icon:te.s})),n.a.createElement(U.a,{size:"sm",color:"light",type:"button",onClick:function(){return m(l+1,{name:"",operation:s(l,d.values.groups[o].services),isnew:!0})}},n.a.createElement(ee.a,{icon:te.l}))))},rt=function(e){var t=e.values,a=e.errors,r=e.historyview,i=void 0!==r&&r,s=e.write_perm,o=void 0!==s&&s,c=e.list_user_groups,l=e.logic_operations,u=e.endpoint_groups,m=e.list_id_metric_profiles;return n.a.createElement(n.a.Fragment,null,n.a.createElement(K.t,{values:t,errors:a,fieldsdisable:i,grouplist:i?void 0:o?c:[t.groupname],profiletype:"aggregation"}),n.a.createElement("h4",{className:"mt-4 alert-info p-1 pl-3 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"Operations, endpoint group and metric profile"),n.a.createElement(A.a,{className:"mt-4"},n.a.createElement(P.a,{md:4},n.a.createElement(T.a,null,n.a.createElement(A.a,null,n.a.createElement(P.a,{md:12},n.a.createElement(N.a,{for:"aggregationMetric"},"Metric operation:"))),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:5},i?n.a.createElement(R.a,{name:"metric_operation",className:"form-control",id:"aggregationMetric",disabled:!0}):n.a.createElement(R.a,{name:"metric_operation",component:K.f,data:Xe(l,""),required:!0,class_name:"custom-select",id:"aggregationMetric"}))),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:12},n.a.createElement(be.a,null,"Logical operation that will be applied between metrics of each service flavour"))))),n.a.createElement(P.a,{md:4},n.a.createElement(T.a,null,n.a.createElement(A.a,null,n.a.createElement(P.a,{md:12},n.a.createElement(N.a,{for:"aggregationOperation"},"Aggregation operation:")),n.a.createElement(P.a,{md:5},i?n.a.createElement(R.a,{name:"profile_operation",className:"form-control",id:"aggregationOperation",disabled:!0}):n.a.createElement(R.a,{name:"profile_operation",component:K.f,data:Xe(l,""),required:!0,class_name:"custom-select",id:"aggregationOperation"}))),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:12},n.a.createElement(be.a,null,"Logical operation that will be applied between defined service flavour groups"))))),n.a.createElement(P.a,{md:4},n.a.createElement(T.a,null,n.a.createElement(A.a,null,n.a.createElement(P.a,{md:12},n.a.createElement(N.a,{for:"aggregationEndpointGroup"},"Endpoint group:")),n.a.createElement(P.a,{md:5},i?n.a.createElement(R.a,{name:"endpoint_group",className:"form-control",id:"aggregationEndpointGroup",disabled:!0}):n.a.createElement(R.a,{name:"endpoint_group",component:K.f,data:Xe(u,""),required:!0,class_name:"custom-select",id:"aggregationEndpointGroup"})))))),n.a.createElement(A.a,{className:"mt-4"},n.a.createElement(P.a,{md:5},n.a.createElement(T.a,null,n.a.createElement(N.a,{for:"metricProfile"},"Metric profile:"),i?n.a.createElement(R.a,{name:"metric_profile",className:"form-control",disabled:!0}):n.a.createElement(R.a,{name:"metric_profile",component:K.f,data:Xe(m.map((function(e){return e.name})),""),required:!0,class_name:"custom-select"}),n.a.createElement(be.a,null,"Metric profile associated to Aggregation profile. Service flavours defined in service flavour groups originate from selected metric profile.")))),n.a.createElement("h4",{className:"mt-2 alert-info p-1 pl-3 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"Service flavour groups"))},nt=function(e){E()(s,e);var t,a,r,i=He(s);function s(e){var t;return d()(this,s),(t=i.call(this,e)).tenant_name=e.tenant_name,t.token=e.webapitoken,t.webapiaggregation=e.webapiaggregation,t.webapimetric=e.webapimetric,t.profile_name=e.match.params.name,t.addview=e.addview,t.history=e.history,t.location=e.location,t.publicView=e.publicView,t.state={aggregation_profile:{},groupname:void 0,list_user_groups:[],write_perm:!1,list_id_metric_profiles:[],list_services:[],list_complete_metric_profiles:{},areYouSureModal:!1,loading:!1,modalFunc:void 0,modalTitle:void 0,modalMsg:void 0,error:null},t.backend=new z.a,t.webapi=new z.b({token:e.webapitoken,metricProfiles:e.webapimetric,aggregationProfiles:e.webapiaggregation}),t.extractListOfMetricsProfiles=t.extractListOfMetricsProfiles.bind(f()(t)),t.toggleAreYouSure=t.toggleAreYouSure.bind(f()(t)),t.doChange=t.doChange.bind(f()(t)),t.doDelete=t.doDelete.bind(f()(t)),t.toggleAreYouSureSetModal=t.toggleAreYouSureSetModal.bind(f()(t)),t.onSubmitHandle=t.onSubmitHandle.bind(f()(t)),t.logic_operations=["OR","AND"],t.endpoint_groups=["servicegroups","sites"],t}return _()(s,[{key:"toggleAreYouSure",value:function(){this.setState((function(e){return{areYouSureModal:!e.areYouSureModal}}))}},{key:"toggleAreYouSureSetModal",value:function(e,t,a){this.setState((function(r){return{areYouSureModal:!r.areYouSureModal,modalFunc:a,modalMsg:e,modalTitle:t}}))}},{key:"correctMetricProfileName",value:function(e,t){var a=t.filter((function(t){return t.id===e}));return a.length?a[0].name:""}},{key:"extractListOfServices",value:function(e,t){var a=t.filter((function(t){return t.name===e.name}));return 0===a.length&&(a=t.filter((function(t){return t.id===e.id}))),a.length?a[0].services.map((function(e){return e.service})):[]}},{key:"sortMetricProfiles",value:function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()===t.name.toLowerCase()?0:void 0}},{key:"extractListOfMetricsProfiles",value:function(e){var t=[];return e.forEach((function(e){var a=t.length,r=e.name,n=e.id;t[a]={name:r,id:n},a+=1})),t.sort(this.sortMetricProfiles)}},{key:"insertEmptyServiceForNoServices",value:function(e){return e.forEach((function(e){0===e.services.length&&e.services.push({name:"",operation:""})})),e}},{key:"insertOperationFromPrevious",value:function(e,t){return t.length?t[t.length-1].operation:""}},{key:"onSubmitHandle",value:function(e,t){var a=this,r=void 0,n=void 0;this.addview?(r="Are you sure you want to add Aggregation profile?",n="Add aggregation profile"):(r="Are you sure you want to change Aggregation profile?",n="Change aggregation profile"),this.toggleAreYouSureSetModal(r,n,(function(){return a.doChange(e,t)}))}},{key:"doChange",value:(r=u()(c.a.mark((function e(t,a){var r,n,i,s,o,l,u,m,d,p,_,h,f,g,E,v,b,M=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=JSON.parse(JSON.stringify(t)),this.removeDummyGroup(r),r.namespace=this.tenant_name,n=this.state.list_id_metric_profiles.filter((function(e){return r.metric_profile===e.name})),r.metric_profile=n[0],this.addview){e.next=51;break}return e.next=8,this.webapi.changeAggregation(r);case 8:if((i=e.sent).ok){e.next=27;break}return s="",e.prev=11,e.next=14,i.json();case 14:o=e.sent,l=[],o.errors.forEach((function(e){return l.push(e.details)})),s=l.join(" "),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(11),s="Web API error changing aggregation profile";case 23:Object(K.q)({title:"Web API error: ".concat(i.status," ").concat(i.statusText),msg:s}),e.next=48;break;case 27:return e.next=29,this.backend.changeObject("/api/v2/internal/aggregations/",{apiid:r.id,name:r.name,groupname:r.groupname,endpoint_group:r.endpoint_group,metric_operation:r.metric_operation,profile_operation:r.profile_operation,metric_profile:t.metric_profile,groups:JSON.stringify(r.groups)});case 29:if(!(u=e.sent).ok){e.next=34;break}Object(K.r)({msg:"Aggregation profile succesfully changed",title:"Changed",callback:function(){return M.history.push("/ui/aggregationprofiles")}}),e.next=47;break;case 34:return m="",e.prev=35,e.next=38,u.json();case 38:d=e.sent,m=d.detail,e.next=45;break;case 42:e.prev=42,e.t1=e.catch(35),m="Internal API error changing aggregation profile";case 45:Object(K.q)({title:"Internal API error: ".concat(u.status," ").concat(u.statusText),msg:m});case 47:case 48:e.next=97;break;case 51:return e.next=53,this.webapi.addAggregation(r);case 53:if((p=e.sent).ok){e.next=72;break}return _="",e.prev=56,e.next=59,p.json();case 59:h=e.sent,f=[],h.errors.forEach((function(e){return f.push(e.details)})),_=f.join(" "),e.next=68;break;case 65:e.prev=65,e.t2=e.catch(56),_="Web API error adding aggregation profile: ".concat(e.t2);case 68:Object(K.q)({title:"Web API error: ".concat(p.status," ").concat(p.statusText),msg:_}),e.next=96;break;case 72:return e.next=74,p.json();case 74:return g=e.sent,e.next=77,this.backend.addObject("/api/v2/internal/aggregations/",{apiid:g.data.id,name:r.name,groupname:r.groupname,endpoint_group:r.endpoint_group,metric_operation:r.metric_operation,profile_operation:r.profile_operation,metric_profile:t.metric_profile,groups:JSON.stringify(r.groups)});case 77:if(!(E=e.sent).ok){e.next=82;break}Object(K.r)({msg:"Aggregation profile successfully added",title:"Added",callback:function(){return M.history.push("/ui/aggregationprofiles")}}),e.next=95;break;case 82:return v="",e.prev=83,e.next=86,E.json();case 86:b=e.sent,v=b.detail,e.next=93;break;case 90:e.prev=90,e.t3=e.catch(83),v="Internal API error adding aggregation profile";case 93:Object(K.q)({title:"Internal API error: ".concat(E.status," ").concat(E.statusText),msg:v});case 95:case 96:case 97:case 98:case"end":return e.stop()}}),e,this,[[11,20],[35,42],[56,65],[83,90]])}))),function(e,t){return r.apply(this,arguments)})},{key:"doDelete",value:(a=u()(c.a.mark((function e(t){var a,r,n,i,s,o,l,u=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.webapi.deleteAggregation(t);case 2:if((a=e.sent).ok){e.next=21;break}return r="",e.prev=5,e.next=8,a.json();case 8:n=e.sent,i=[],n.errors.forEach((function(e){return i.push(e.details)})),r=i.join(" "),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),r="Web API error deleting aggregation profile";case 17:Object(K.q)({title:"Web API error: ".concat(a.status," ").concat(a.statusText),msg:r}),e.next=42;break;case 21:return e.next=23,this.backend.deleteObject("/api/v2/internal/aggregations/".concat(t));case 23:if(!(s=e.sent).ok){e.next=28;break}Object(K.r)({msg:"Aggregation profile sucessfully deleted",title:"Deleted",callback:function(){return u.history.push("/ui/aggregationprofiles")}}),e.next=41;break;case 28:return o="",e.prev=29,e.next=32,s.json();case 32:l=e.sent,o=l.detail,e.next=39;break;case 36:e.prev=36,e.t1=e.catch(29),o="Internal API error deleting aggregation profile";case 39:Object(K.q)({title:"Internal API error: ".concat(s.status," ").concat(s.statusText),msg:o});case 41:case 42:case 43:case"end":return e.stop()}}),e,this,[[5,14],[29,36]])}))),function(e){return a.apply(this,arguments)})},{key:"insertDummyGroup",value:function(e){return[].concat(G()(e),[{name:"dummy",operation:"OR",services:[{name:"dummy",operation:"OR"}]}])}},{key:"removeDummyGroup",value:function(e){var t=e.groups[e.groups.length-1];"dummy"==t.name&&"dummy"==t.services[0].name&&e.groups.pop()}},{key:"checkIfServiceMissingInMetricProfile",value:function(e,t){var a=new Set(e),r=!1;return t.forEach((function(e){var t=!0,n=!1,i=void 0;try{for(var s,o=e.services[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var c=s.value;if(!a.has(c.name)){r=!0;break}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}})),r}},{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t,a,r,n,i,s,o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({loading:!0}),e.prev=1,!this.publicView){e.next=15;break}return e.next=5,this.webapi.fetchMetricProfiles();case 5:return t=e.sent,e.next=8,this.backend.fetchData("/api/v2/internal/public_aggregations/".concat(this.profile_name));case 8:return a=e.sent,e.next=11,this.webapi.fetchAggregationProfile(a.apiid);case 11:r=e.sent,this.setState({aggregation_profile:r,groupname:a.groupname,list_user_groups:[],write_perm:!1,list_id_metric_profiles:this.extractListOfMetricsProfiles(t),list_services:this.extractListOfServices(r.metric_profile,t),list_complete_metric_profiles:t,loading:!1}),e.next=36;break;case 15:return e.next=17,this.backend.isActiveSession();case 17:if(!(n=e.sent).active){e.next=35;break}return e.next=21,this.webapi.fetchMetricProfiles();case 21:if(i=e.sent,this.addview){e.next=32;break}return e.next=25,this.backend.fetchData("/api/v2/internal/aggregations/".concat(this.profile_name));case 25:return s=e.sent,e.next=28,this.webapi.fetchAggregationProfile(s.apiid);case 28:o=e.sent,this.setState({aggregation_profile:o,groupname:s.groupname,list_user_groups:n.userdetails.groups.aggregations,write_perm:n.userdetails.is_superuser||n.userdetails.groups.aggregations.indexOf(s.groupname)>=0,list_id_metric_profiles:this.extractListOfMetricsProfiles(i),list_services:this.extractListOfServices(o.metric_profile,i),list_complete_metric_profiles:i,loading:!1}),e.next=34;break;case 32:l={id:"",name:"",metric_operation:"",profile_operation:"",endpoint_group:"",metric_profile:{name:""},groups:[]},this.setState({aggregation_profile:l,groupname:"",list_user_groups:n.userdetails.groups.aggregations,write_perm:n.userdetails.is_superuser||n.userdetails.groups.aggregations.length>0,list_id_metric_profiles:this.extractListOfMetricsProfiles(i),list_complete_metric_profiles:i,list_services:[],loading:!1});case 34:case 35:case 36:e.next=41;break;case 38:e.prev=38,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 41:case 42:case"end":return e.stop()}}),e,this,[[1,38]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,a=t.aggregation_profile,r=t.list_id_metric_profiles,i=t.list_complete_metric_profiles,s=t.list_user_groups,o=t.groupname,c=t.list_services,l=t.write_perm,u=t.loading,m=t.error;if(u)return n.a.createElement(K.m,null);if(m)return n.a.createElement(K.h,{error:m});if(!u&&a&&a.metric_profile&&s&&this.token){var d=this.checkIfServiceMissingInMetricProfile(c,a.groups);return n.a.createElement(K.b,{resourcename:"aggregation profile",location:this.location,modal:!0,state:this.state,toggle:this.toggleAreYouSure,addview:this.publicView?!this.publicView:this.addview,publicview:this.publicView,submitperm:l},n.a.createElement(R.d,{initialValues:{id:a.id,name:a.name,groupname:o,metric_operation:a.metric_operation,profile_operation:a.profile_operation,metric_profile:this.correctMetricProfileName(a.metric_profile.id,r),endpoint_group:a.endpoint_group,groups:this.insertDummyGroup(this.insertEmptyServiceForNoServices(a.groups))},onSubmit:function(t,a){return e.onSubmitHandle(t,a)},validationSchema:Je,render:function(t){return n.a.createElement(R.c,null,n.a.createElement(qe,{onChange:function(t,a){if(t.values.metric_profile!==a.values.metric_profile){var r={name:t.values.metric_profile};e.setState({list_services:e.extractListOfServices(r,i)})}}}),d&&n.a.createElement(L.a,{color:"danger"},n.a.createElement("center",null,n.a.createElement(ee.a,{icon:te.i,size:"lg",color:"black"}),"   Some Service Flavours used in Aggregation profile are not presented in associated Metric profile meaning that two profiles are out of sync. Check below for Service Flavours in red borders.")),n.a.createElement(rt,k()({},t,{list_user_groups:s,logic_operations:e.logic_operations,endpoint_groups:e.endpoint_groups,list_id_metric_profiles:r,write_perm:l})),n.a.createElement(R.b,{name:"groups",render:function(t){return n.a.createElement($e,k()({},t,{list_services:Xe(c,""),list_operations:Xe(e.logic_operations,""),last_service_operation:e.insertOperationFromPrevious,write_perm:l}))}}),l&&n.a.createElement("div",{className:"submit-row d-flex align-items-center justify-content-between bg-light p-3 mt-5"},n.a.createElement(U.a,{color:"danger",onClick:function(){e.toggleAreYouSureSetModal("Are you sure you want to delete Aggregation profile?","Delete aggregation profile",(function(){return e.doDelete(t.values.id)}))}},"Delete"),n.a.createElement(U.a,{color:"success",id:"submit-button",type:"submit"},"Save")))}}))}return null}}]),s}(r.Component),it=function(e){E()(r,e);var t,a=He(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).state={loading:!1,list_aggregations:null,write_perm:!1,error:null},t.location=e.location,t.backend=new z.a,t.publicView=e.publicView,t.publicView?t.apiUrl="/api/v2/internal/public_aggregations":t.apiUrl="/api/v2/internal/aggregations",t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData(this.apiUrl);case 4:if(t=e.sent,this.publicView){e.next=12;break}return e.next=8,this.backend.isActiveSession();case 8:a=e.sent,this.setState({write_perm:a.userdetails.is_superuser||a.userdetails.groups.aggregations.length>0,list_aggregations:t,loading:!1}),e.next=13;break;case 12:this.setState({list_aggregations:t,loading:!1});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 18:case"end":return e.stop()}}),e,this,[[1,15]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=[{Header:"Name",id:"name",maxWidth:350,accessor:function(t){return n.a.createElement(Z.b,{to:"/ui/".concat(e.publicView?"public_":"","aggregationprofiles/")+t.name},t.name)}},{Header:"Description",accessor:"description"},{Header:"Group",accessor:"groupname",className:"text-center",maxWidth:150}],a=this.state,r=a.loading,i=a.list_aggregations,s=a.write_perm,o=a.error;return r?n.a.createElement(K.m,null):o?n.a.createElement(K.h,{error:o}):!r&&i?n.a.createElement(K.b,{resourcename:"aggregation profile",location:this.location,listview:!0,addnew:!this.publicView,addperm:s,publicview:this.publicView},n.a.createElement($.a,{data:i,columns:t,className:"-highlight",defaultPageSize:12,rowsText:"profiles",getTheadThProps:function(){return{className:"table-active font-weight-bold p-2"}}})):null}}]),r}(r.Component),st=function(e){for(var t=e.title,a=e.item1,r=e.item2,i=[],s=[],o=0;o<a.length;o++){for(var c=[],l=0;l<a[o].services.length;l++)c.push("{name: ".concat(a[o].services[l].name,", operation: ").concat(a[o].services[l].operation,"}"));i.push("name: ".concat(a[o].name,",\noperation: ").concat(a[o].operation,",\nservices: [\n").concat(c.join("\n"),"\n]"))}for(var u=0;u<r.length;u++){for(var m=[],d=0;d<r[u].services.length;d++)m.push("{name: ".concat(r[u].services[d].name,", operation: ").concat(r[u].services[d].operation,"}"));s.push("name: ".concat(r[u].name,",\noperation: ").concat(r[u].operation,",\nservices: [\n").concat(m.join("\n"),"\n]"))}return n.a.createElement("div",{id:"argo-contentwrap",className:"ml-2 mb-2 mt-2 p-3 border rounded"},n.a.createElement("h6",{className:"mt-4 font-weight-bold text-uppercase"},t),n.a.createElement(re.a,{oldValue:s.join("\n"),newValue:i.join("\n"),showDiffOnly:!0,splitView:!0,hideLineNumbers:!0}))},ot=function(e){E()(r,e);var t,a=He(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).version1=e.match.params.id1,t.version2=e.match.params.id2,t.name=e.match.params.name,t.state={loading:!1,name1:"",groupname1:"",metric_operation1:"",profile_operation1:"",endpoint_group1:"",metric_profile1:"",groups1:[],name2:"",groupname2:"",metric_operation2:"",profile_operation2:"",endpoint_group2:"",metric_profile2:"",groups2:[],error:null},t.backend=new z.a,t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t,a,r,n,i,s,o,l,u,m,d,p,_,h,f,g=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.backend.fetchData("/api/v2/internal/tenantversion/aggregationprofile/".concat(this.name));case 3:t=e.sent,a="",r="",n="",i="",s="",o="",l=[],u="",m="",d="",p="",_="",h="",f=[],t.forEach((function(e){e.version==g.version1?(a=e.fields.name,r=e.fields.groupname,n=e.fields.metric_operation,i=e.fields.profile_operation,s=e.fields.endpoint_group,o=e.fields.metric_profile,l=e.fields.groups):e.version==g.version2&&(u=e.fields.name,m=e.fields.groupname,d=e.fields.metric_operation,p=e.fields.profile_operation,_=e.fields.endpoint_group,h=e.fields.metric_profile,f=e.fields.groups),g.setState({name1:a,groupname1:r,metric_operation1:n,profile_operation1:i,endpoint_group1:s,metric_profile1:o,groups1:l,name2:u,groupname2:m,metric_operation2:d,profile_operation2:p,endpoint_group2:_,metric_profile2:h,groups2:f,loading:!1})})),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),this.setState({error:e.t0,loading:!1});case 24:case"end":return e.stop()}}),e,this,[[0,21]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.name1,a=e.name2,r=e.groupname1,i=e.groupname2,s=e.metric_operation1,o=e.metric_operation2,c=e.profile_operation1,l=e.profile_operation2,u=e.endpoint_group1,m=e.endpoint_group2,d=e.metric_profile1,p=e.metric_profile2,_=e.groups1,h=e.groups2,f=e.loading,g=e.error;return f?n.a.createElement(K.m,null):g?n.a.createElement(K.h,{error:g}):!f&&t&&a?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},n.a.createElement("h2",{className:"ml-3 mt-1 mb-4"},"Compare ".concat(this.name," versions"))),t!==a&&n.a.createElement(K.e,{title:"name",item1:t,item2:a}),r!==i&&n.a.createElement(K.e,{title:"group name",item1:r,item2:i}),s!==o&&n.a.createElement(K.e,{title:"metric operation",item1:s,item2:o}),c!==l&&n.a.createElement(K.e,{title:"aggregation operation",item1:c,item2:l}),u!==m&&n.a.createElement(K.e,{title:"endpoint group",item1:u,item2:m}),d!==p&&n.a.createElement(K.e,{title:"metric profile",item1:d,item2:p}),_!==h&&n.a.createElement(st,{title:"groups",item1:_,item2:h})):null}}]),r}(r.Component),ct=function(e){E()(r,e);var t,a=He(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).name=e.match.params.name,t.version=e.match.params.version,t.backend=new z.a,t.state={name:"",groupname:"",metric_operation:"",profile_operation:"",endpoint_group:"",metric_profile:"",groups:[],date_created:"",loading:!1,error:null},t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData("/api/v2/internal/tenantversion/aggregationprofile/".concat(this.name));case 4:e.sent.forEach((function(e){e.version==t.version&&t.setState({name:e.fields.name,groupname:e.fields.groupname,metric_operation:e.fields.metric_operation,profile_operation:e.fields.profile_operation,endpoint_group:e.fields.endpoint_group,metric_profile:e.fields.metric_profile,groups:e.fields.groups,date_created:e.date_created,loading:!1})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.name,a=e.groupname,r=e.metric_operation,i=e.profile_operation,s=e.endpoint_group,o=e.metric_profile,c=e.groups,l=e.date_created,u=e.loading,m=e.error;return u?n.a.createElement(K.m,null):m?n.a.createElement(K.h,{error:m}):!u&&t?n.a.createElement(K.b,{resourcename:"".concat(t," (").concat(l,")"),infoview:!0},n.a.createElement(R.d,{initialValues:{name:t,groupname:a,metric_operation:r,profile_operation:i,endpoint_group:s,metric_profile:o,groups:c},render:function(e){return n.a.createElement(R.c,null,n.a.createElement(rt,k()({},e,{historyview:!0})),n.a.createElement(R.b,{name:"groups",render:function(t){return n.a.createElement(A.a,{className:"groups"},e.values.groups.map((function(t,a){return n.a.createElement(R.b,{key:a,name:"groups",render:function(r){return n.a.createElement(n.a.Fragment,{key:a},n.a.createElement(P.a,{sm:{size:8},md:{size:5},className:"mt-4 mb-2"},n.a.createElement(C.a,null,n.a.createElement(I.a,{className:"p-1",color:"primary"},n.a.createElement(A.a,{className:"d-flex align-items-center no-gutters"},n.a.createElement(P.a,{sm:{size:10},md:{size:11}},c[a].name))),n.a.createElement(S.a,{className:"p-1"},t.services.map((function(e,t){return n.a.createElement(R.b,{key:t,name:"groups.".concat(a,".services"),render:function(e){return n.a.createElement(A.a,{className:"d-flex align-items-center service pt-1 pb-1 no-gutters",key:t},n.a.createElement(P.a,{md:8},c[a].services[t].name),n.a.createElement(P.a,{md:2},c[a].services[t].operation))}})}))),n.a.createElement(j.a,{className:"p-1 d-flex justify-content-center"},c[a].operation))),n.a.createElement(P.a,{sm:{size:4},md:{size:1},className:"mt-5"},n.a.createElement("div",{className:"group-operation",key:a},e.values.profile_operation)))}})})))}}))}})):null}}]),r}(r.Component),lt=function(e){return n.a.createElement("div",null,'"I\'m Reports"')};a("b4bE");var ut=function(e){E()(r,e);var t,a=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,r=y()(e);if(t()){var n=y()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return b()(this,a)}}(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).state={loading:!1,rows:null,rowspan:null,error:null},t.backend=new z.a,t.publicView=e.publicView,t.publicView?t.apiUrl="/api/v2/internal/public_services":t.apiUrl="/api/v2/internal/services",t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData(this.apiUrl);case 4:t=e.sent,this.setState({rows:t.result.rows,rowspan:t.result.rowspan,loading:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 11:case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return t.apply(this,arguments)})},{key:"getRowSpan",value:function(e,t){var a=e.filter((function(e){return e[0]===t}));return a.length?a[0][1]:1}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,r=t.rows,i=t.rowspan,s=t.error;return a?n.a.createElement(K.m,null):s?n.a.createElement(K.h,{error:s}):!a&&r?n.a.createElement(K.b,{resourcename:"Services and probes",infoview:!0},n.a.createElement("table",{className:"table table-bordered table-sm"},n.a.createElement("thead",{className:"table-active"},n.a.createElement("tr",null,n.a.createElement("th",{id:"argo-th",scope:"col"},"Service category"),n.a.createElement("th",{id:"argo-th",scope:"col"},"Service name"),n.a.createElement("th",{id:"argo-th",scope:"col"},n.a.createElement(K.l,{i:"serviceflavour"})," Service type"),n.a.createElement("th",{id:"argo-th",scope:"col"},n.a.createElement(K.l,{i:"metrics"})," Metric"),n.a.createElement("th",{id:"argo-th",scope:"col"},n.a.createElement(K.l,{i:"probes"})," Probe"))),n.a.createElement("tbody",null,r.map((function(t,a){return n.a.createElement("tr",{key:a},t.service_category&&n.a.createElement("td",{id:"argo-td",className:"table-light",rowSpan:e.getRowSpan(i.service_category,t.service_category)},t.service_category),t.service_name&&n.a.createElement("td",{id:"argo-td",className:"table-light",rowSpan:e.getRowSpan(i.service_name,t.service_name)},t.service_name),t.service_type&&n.a.createElement("td",{id:"argo-td",className:"table-light",rowSpan:e.getRowSpan(i.service_type,t.service_type)},n.a.createElement(K.l,{i:"serviceflavour"})," ",t.service_type),t.metric&&n.a.createElement("td",{id:"argo-td",className:"table-light",rowSpan:e.getRowSpan(i.metric,t.metric)},n.a.createElement(K.l,{i:"metrics"})," ",n.a.createElement(Z.b,{to:"/ui/".concat(e.publicView?"public_":"","metrics/")+t.metric},t.metric)),t.probe&&n.a.createElement("td",{id:"argo-td",className:"table-light",rowSpan:e.getRowSpan(i.probe,t.probe)},n.a.createElement(K.l,{i:"probes"})," ",n.a.createElement(Se.i,{publicView:e.publicView,probeversion:t.probe})))}))))):null}}]),r}(r.Component);a("QjdQ");function mt(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,r=y()(e);if(t()){var n=y()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return b()(this,a)}}var dt=ne.object().shape({username:ne.string().max(30,"Username must be 30 characters or fewer.").matches(/^[A-Za-z0-9@.+\-_]*$/,"Letters, numbers and @/./+/-/_ characters").required("Required"),addview:ne.boolean(),password:ne.string().when("addview",{is:!0,then:ne.string().required("Required").min(8,"Your password must contain at least 8 characters.").matches(/^\d*[a-zA-Z][a-zA-Z\d]*$/,"Your password cannot be entirely numeric.")}),confirm_password:ne.string().when("addview",{is:!0,then:ne.string().required("Required").oneOf([ne.ref("password"),null],"Passwords do not match!")}),email:ne.string().email("Enter valid email.").required("Required")}),pt=ne.object().shape({password:ne.string().required("Required").min(8,"Your password must contain at least 8 characters.").matches(/^\d*[a-zA-Z][a-zA-Z\d]*$/,"Your password cannot be entirely numeric."),confirm_password:ne.string().required("Required").oneOf([ne.ref("password"),null],"Passwords do not match!")}),_t=Et(!0),ht=Et(),ft=function(e){var t=e.add,a=e.errors;e.values;return n.a.createElement(n.a.Fragment,null,t?n.a.createElement(T.a,null,n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Username"),n.a.createElement(R.a,{type:"text",name:"username",className:"form-control ".concat(a.username&&"border-danger"),id:"userUsername"})),a.username&&Object(K.i)(a.username))),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Password"),n.a.createElement(R.a,{type:"password",name:"password",className:"form-control ".concat(a.password&&"border-danger"),id:"password"})),a.password&&Object(K.i)(a.password))),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Confirm password"),n.a.createElement(R.a,{type:"password",name:"confirm_password",className:"form-control ".concat(a.confirm_password&&"border-danger"),id:"confirm_password"})),a.confirm_password&&Object(K.i)(a.confirm_password)))):n.a.createElement(T.a,null,n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Username"),n.a.createElement(R.a,{type:"text",name:"username",className:"form-control",id:"userUsername"})),a.username&&Object(K.i)(a.username)))),n.a.createElement(T.a,null,n.a.createElement("h4",{className:"mt-2 p-1 pl-3 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"Personal info"),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"First name"),n.a.createElement(R.a,{type:"text",name:"first_name",className:"form-control",id:"userFirstName"})))),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Last name"),n.a.createElement(R.a,{type:"text",name:"last_name",className:"form-control",id:"userLastName"})))),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Email"),n.a.createElement(R.a,{type:"text",name:"email",className:"form-control ".concat(a.email&&"border-danger"),id:"userEmail"})),a.email&&Object(K.i)(a.email))),!t&&n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Last login"),n.a.createElement(R.a,{type:"text",name:"last_login",className:"form-control",readOnly:!0})))),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Date joined"),n.a.createElement(R.a,{type:"text",name:"date_joined",className:"form-control",readOnly:!0})))))),n.a.createElement(T.a,null,n.a.createElement("h4",{className:"mt-2 p-1 pl-3 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"Permissions"),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(R.a,{component:K.c,name:"is_superuser",className:"form-control",id:"checkbox",label:"Superuser status"}),n.a.createElement(be.a,{color:"muted"},"Designates that this user has all permissions without explicitly assigning them."))),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(R.a,{component:K.c,name:"is_active",className:"form-control",id:"checkbox",label:"Active"}),n.a.createElement(be.a,{color:"muted"},"Designates whether this user should be treated as active. Unselect this instead of deleting accounts.")))))},gt=function(e){E()(r,e);var t,a=mt(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).state={loading:!1,list_users:null,error:null},t.location=e.location,t.backend=new z.a,t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData("/api/v2/internal/users");case 4:t=e.sent,this.setState({list_users:t,loading:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 11:case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=[{Header:"Username",id:"username",accessor:function(e){return n.a.createElement(Z.b,{to:"/ui/administration/users/"+e.username},e.username)}},{Header:"First name",accessor:"first_name",Cell:function(e){return n.a.createElement("div",{style:{textAlign:"center"}},e.value)}},{Header:"Last name",accessor:"last_name",Cell:function(e){return n.a.createElement("div",{style:{textAlign:"center"}},e.value)}},{Header:"Email address",accessor:"email",Cell:function(e){return n.a.createElement("div",{style:{textAlign:"center"}},e.value)}},{id:"is_superuser",Header:"Superuser status",Cell:function(e){return n.a.createElement("div",{style:{textAlign:"center"}},e.value)},accessor:function(e){return e.is_superuser?n.a.createElement(ee.a,{icon:te.c,style:{color:"#339900"}}):n.a.createElement(ee.a,{icon:te.t,style:{color:"#CC0000"}})}},{Header:"Active status",id:"is_active",Cell:function(e){return n.a.createElement("div",{style:{textAlign:"center"}},e.value)},accessor:function(e){return e.is_active?n.a.createElement(ee.a,{icon:te.c,style:{color:"#339900"}}):n.a.createElement(ee.a,{icon:te.t,style:{color:"#CC0000"}})}}],t=this.state,a=t.loading,r=t.list_users,i=t.error;return a?n.a.createElement(K.m,null):i?n.a.createElement(K.h,{error:i}):!a&&r?n.a.createElement(K.b,{resourcename:"users",location:this.location,listview:!0},n.a.createElement($.a,{data:r,columns:e,className:"-highlight",defaultPageSize:20,rowsText:"users",getTheadThProps:function(){return{className:"table-active font-weight-bold p-2"}}})):null}}]),r}(r.Component);function Et(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){E()(o,t);var a,r,i,s=mt(o);function o(e){var t;return d()(this,o),(t=s.call(this,e)).user_name=e.match.params.user_name,t.addview=e.addview,t.location=e.location,t.history=e.history,t.state={custuser:{pk:"",first_name:"",last_name:"",username:"",is_active:!0,is_superuser:!1,email:"",last_login:"",date_joined:""},password:"",userprofile:{displayname:"",subject:"",egiid:""},usergroups:{aggregations:[],metrics:[],metricprofiles:[],thresholdsprofiles:[]},allgroups:{metrics:[],aggregations:[],metricprofiles:[],thresholdsprofiles:[]},loading:!1,areYouSureModal:!1,modalFunc:void 0,modalTitle:void 0,modalMsg:void 0,userdetails:{userdetails:{username:""}},error:null},t.backend=new z.a,t.toggleAreYouSure=t.toggleAreYouSure.bind(f()(t)),t.toggleAreYouSureSetModal=t.toggleAreYouSureSetModal.bind(f()(t)),t.onSubmitHandle=t.onSubmitHandle.bind(f()(t)),t.doChange=t.doChange.bind(f()(t)),t.doDelete=t.doDelete.bind(f()(t)),t}return _()(o,[{key:"toggleAreYouSure",value:function(){this.setState((function(e){return{areYouSureModal:!e.areYouSureModal}}))}},{key:"toggleAreYouSureSetModal",value:function(e,t,a){this.setState((function(r){return{areYouSureModal:!r.areYouSureModal,modalFunc:a,modalMsg:e,modalTitle:t}}))}},{key:"onSubmitHandle",value:function(e,t){var a=this,r=void 0,n=void 0;this.addview?(r="Are you sure you want to add user?",n="Add user"):(r="Are you sure you want to change user?",n="Change user"),this.toggleAreYouSureSetModal(r,n,(function(){return a.doChange(e,t)}))}},{key:"doChange",value:(i=u()(c.a.mark((function t(a,r){var n,i,s,o,l,u,m,d,p,_,h,f,g=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.addview){t.next=48;break}return t.next=3,this.backend.changeObject("/api/v2/internal/users/",{pk:a.pk,username:a.username,first_name:a.first_name,last_name:a.last_name,email:a.email,is_superuser:a.is_superuser,is_active:a.is_active});case 3:if((n=t.sent).ok){t.next=20;break}return i="",t.prev=6,t.next=9,n.json();case 9:s=t.sent,i=s.detail,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),i="Error changing user";case 16:Object(K.q)({title:"Error: ".concat(n.status," ").concat(n.statusText),msg:i}),t.next=45;break;case 20:if(!e){t.next=44;break}return t.next=23,this.backend.changeObject("/api/v2/internal/userprofile/",{username:a.username,displayname:a.displayname,subject:a.subject,egiid:a.egiid,groupsofaggregations:a.groupsofaggregations,groupsofmetrics:a.groupsofmetrics,groupsofmetricprofiles:a.groupsofmetricprofiles,groupsofthresholdsprofiles:a.groupsofthresholdsprofiles});case 23:if(!(o=t.sent).ok){t.next=28;break}Object(K.r)({msg:"User successfully changed",title:"Changed",callback:function(){return g.history.push("/ui/administration/users")}}),t.next=41;break;case 28:return l="",t.prev=29,t.next=32,o.json();case 32:u=t.sent,l=u.detail,t.next=39;break;case 36:t.prev=36,t.t1=t.catch(29),l="Error changing user profile";case 39:Object(K.q)({title:"Error: ".concat(o.status," ").concat(o.statusText),msg:l});case 41:t.next=45;break;case 44:Object(K.r)({msg:"User successfully changed",title:"Changed",callback:function(){return g.history.push("/ui/administration/users")}});case 45:t.next=94;break;case 48:return t.next=50,this.backend.addObject("/api/v2/internal/users/",{username:a.username,password:a.password,first_name:a.first_name,last_name:a.last_name,email:a.email,is_superuser:a.is_superuser,is_active:a.is_active});case 50:if((m=t.sent).ok){t.next=67;break}return d="",t.prev=53,t.next=56,m.json();case 56:p=t.sent,d=p.detail,t.next=63;break;case 60:t.prev=60,t.t2=t.catch(53),d="Error adding user";case 63:Object(K.q)({title:"Error: ".concat(m.status," ").concat(m.statusText),msg:d}),t.next=93;break;case 67:if(!e){t.next=91;break}return t.next=70,this.backend.addObject("/api/v2/internal/userprofile/",{username:a.username,displayname:a.displayname,subject:a.subject,egiid:a.egiid,groupsofaggregations:a.groupsofaggregations,groupsofmetrics:a.groupsofmetrics,groupsofmetricprofiles:a.groupsofmetricprofiles,groupsofthresholdsprofiles:a.groupsofthresholdsprofiles});case 70:if(!(_=t.sent).ok){t.next=75;break}Object(K.r)({msg:"User successfully added",title:"Added",callback:function(){return g.history.push("/ui/administration/users")}}),t.next=88;break;case 75:return h="",t.prev=76,t.next=79,_.json();case 79:f=t.sent,h=f.detail,t.next=86;break;case 83:t.prev=83,t.t3=t.catch(76),h="Error adding user profile";case 86:Object(K.q)({title:"Error: ".concat(_.status," ").concat(_.statusText),msg:h});case 88:t.next=92;break;case 91:Object(K.r)({msg:"User successfully added",title:"Added",callback:function(){return g.history.push("/ui/administration/users")}});case 92:case 93:case 94:case 95:case"end":return t.stop()}}),t,this,[[6,13],[29,36],[53,60],[76,83]])}))),function(e,t){return i.apply(this,arguments)})},{key:"doDelete",value:(r=u()(c.a.mark((function e(t){var a,r,n,i=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backend.deleteObject("/api/v2/internal/users/".concat(t));case 2:if(!(a=e.sent).ok){e.next=7;break}Object(K.r)({msg:"User successfully deleted",title:"Deleted",callback:function(){return i.history.push("/ui/administration/users")}}),e.next=20;break;case 7:return r="",e.prev=8,e.next=11,a.json();case 11:n=e.sent,r=n.detail,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),r="Error deleting user";case 18:Object(K.q)({title:"Error: ".concat(a.status," ").concat(a.statusText),msg:r});case 20:case 21:case"end":return e.stop()}}),e,this,[[8,15]])}))),function(e){return r.apply(this,arguments)})},{key:"componentDidMount",value:(a=u()(c.a.mark((function t(){var a,r,n,i,s,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.setState({loading:!0}),t.prev=1,this.addview){t.next=25;break}return t.next=5,this.backend.fetchData("/api/v2/internal/users/".concat(this.user_name));case 5:if(a=t.sent,!e){t.next=19;break}return t.next=9,this.backend.fetchData("/api/v2/internal/userprofile/".concat(this.user_name));case 9:return r=t.sent,t.next=12,this.backend.fetchResult("/api/v2/internal/usergroups/".concat(this.user_name));case 12:return n=t.sent,t.next=15,this.backend.fetchResult("/api/v2/internal/usergroups");case 15:i=t.sent,this.setState({custuser:a,userprofile:r,usergroups:n,allgroups:i,loading:!1}),t.next=23;break;case 19:return t.next=21,this.backend.isActiveSession(!1);case 21:s=t.sent,this.setState({custuser:a,userdetails:s,loading:!1});case 23:t.next=34;break;case 25:if(!e){t.next=32;break}return t.next=28,this.backend.fetchResult("/api/v2/internal/usergroups");case 28:o=t.sent,this.setState({allgroups:o,loading:!1}),t.next=33;break;case 32:this.setState({loading:!1});case 33:case 34:t.next=40;break;case 37:t.prev=37,t.t0=t.catch(1),this.setState({error:t.t0,loading:!1});case 40:case 41:case"end":return t.stop()}}),t,this,[[1,37]])}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var t=this,a=this.state,r=a.custuser,i=a.userprofile,s=a.usergroups,o=a.allgroups,c=a.loading,l=a.error;return c?n.a.createElement(K.m,null):l?n.a.createElement(K.h,{error:l}):c?void 0:e?n.a.createElement(K.b,{resourcename:"users",location:this.location,addview:this.addview,history:!1,modal:!0,state:this.state,toggle:this.toggleAreYouSure},n.a.createElement(R.d,{initialValues:{addview:this.addview,pk:r.pk,first_name:r.first_name,last_name:r.last_name,username:r.username,password:"",confirm_password:"",is_active:r.is_active,is_superuser:r.is_superuser,email:r.email,last_login:r.last_login,date_joined:r.date_joined,groupsofaggregations:s.aggregations,groupsofmetrics:s.metrics,groupsofmetricprofiles:s.metricprofiles,groupsofthresholdsprofiles:s.thresholdsprofiles,displayname:i.displayname,subject:i.subject,egiid:i.egiid},validationSchema:dt,onSubmit:function(e,a){return t.onSubmitHandle(e,a)},render:function(a){return n.a.createElement(R.c,null,n.a.createElement(ft,k()({},a,{add:t.addview})),e&&n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,null,n.a.createElement("h4",{className:"mt-2 p-1 pl-3 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"POEM user permissions"),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(N.a,{for:"groupsofmetrics",className:"grouplabel"},"Groups of metrics"),n.a.createElement(R.a,{component:"select",name:"groupsofmetrics",id:"select-field",onChange:function(e){return a.setFieldValue("groupsofmetrics",[].slice.call(e.target.selectedOptions).map((function(e){return e.value})))},multiple:!0},o.metrics.map((function(e){return n.a.createElement("option",{key:e,value:e},e)}))),n.a.createElement(be.a,{color:"muted"},'The groups of metrics that user will control. Hold down "Control" or "Command" on a Mac to select more than one.'))),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(N.a,{for:"groupsofmetricprofiles",className:"grouplabel"},"Groups of metric profiles"),n.a.createElement(R.a,{component:"select",name:"groupsofmetricprofiles",id:"select-field",onChange:function(e){return a.setFieldValue("groupsofmetricprofiles",[].slice.call(e.target.selectedOptions).map((function(e){return e.value})))},multiple:!0},o.metricprofiles.map((function(e){return n.a.createElement("option",{key:e,value:e},e)}))),n.a.createElement(be.a,{color:"muted"},'The groups of metric profiles that user will control. Hold down "Control" or "Command" on a Mac to select more than one.'))),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(N.a,{for:"groupsofaggregations",className:"grouplabel"},"Groups of aggregations"),n.a.createElement(R.a,{component:"select",name:"groupsofaggregations",id:"select-field",onChange:function(e){return a.setFieldValue("groupsofaggregations",[].slice.call(e.target.selectedOptions).map((function(e){return e.value})))},multiple:!0},o.aggregations.map((function(e){return n.a.createElement("option",{key:e,value:e},e)}))),n.a.createElement(be.a,{color:"muted"},'The groups of aggregations that user will control. Hold down "Control" or "Command" on a Mac to select more than one.'))),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(N.a,{for:"groupsofthresholdsprofiles",className:"grouplabel"},"Groups of thresholds profiles"),n.a.createElement(R.a,{component:"select",name:"groupsofthresholdsprofiles",id:"select-field",onChange:function(e){return a.setFieldValue("groupsofthresholdsprofiles",[].slice.call(e.target.selectedOptions).map((function(e){return e.value})))},multiple:!0},o.thresholdsprofiles.map((function(e){return n.a.createElement("option",{key:e,value:e},e)}))),n.a.createElement(be.a,{color:"muted"},'The groups of thresholds profiles that user will control. Hold down "Control" or "Command" on a Mac to select more than one.')))),n.a.createElement(T.a,null,n.a.createElement("h4",{className:"mt-2 p-1 pl-3 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"Additional information"),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:12},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"distinguishedName"),n.a.createElement(R.a,{type:"text",name:"subject",required:!1,className:"form-control",id:"distinguishedname"}))))),n.a.createElement(T.a,null,n.a.createElement(A.a,null,n.a.createElement(P.a,{md:8},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"eduPersonUniqueId"),n.a.createElement(R.a,{type:"text",name:"egiid",required:!1,className:"form-control",id:"eduid"}))))),n.a.createElement(T.a,null,n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"displayName"),n.a.createElement(R.a,{type:"text",name:"displayname",required:!1,className:"form-control",id:"displayname"})))))),n.a.createElement("div",{className:"submit-row d-flex align-items-center justify-content-between bg-light p-3 mt-5"},t.addview?n.a.createElement("div",null):n.a.createElement(U.a,{color:"danger",onClick:function(){t.toggleAreYouSureSetModal("Are you sure you want to delete User?","Delete user",(function(){return t.doDelete(a.values.username)}))}},"Delete"),n.a.createElement(U.a,{color:"success",id:"submit-button",type:"submit"},"Save")))}})):n.a.createElement(n.a.Fragment,null,n.a.createElement(K.n,{isOpen:this.state.areYouSureModal,toggle:this.toggleAreYouSure,title:this.state.modalTitle,msg:this.state.modalMsg,onYes:this.state.modalFunc}),n.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},n.a.createElement("h2",{className:"ml-3 mt-1 mb-4"},"".concat(this.addview?"Add":"Change"," user")),!this.addview&&this.state.userdetails.userdetails.username===this.user_name&&n.a.createElement(Z.b,{className:"btn btn-secondary",to:this.location.pathname+"/change_password",role:"button"},"Change password")),n.a.createElement("div",{id:"argo-contentwrap",className:"ml-2 mb-2 mt-2 p-3 border rounded"},n.a.createElement(R.d,{initialValues:{addview:this.addview,pk:r.pk,first_name:r.first_name,last_name:r.last_name,username:r.username,password:"",confirm_password:"",is_active:r.is_active,is_superuser:r.is_superuser,email:r.email,last_login:r.last_login,date_joined:r.date_joined},validationSchema:dt,onSubmit:function(e,a){return t.onSubmitHandle(e,a)},render:function(e){return n.a.createElement(R.c,null,n.a.createElement(ft,k()({},e,{add:t.addview})),n.a.createElement("div",{className:"submit-row d-flex align-items-center justify-content-between bg-light p-3 mt-5"},t.addview?n.a.createElement("div",null):n.a.createElement(U.a,{color:"danger",onClick:function(){t.toggleAreYouSureSetModal("Are you sure you want to delete user ".concat(t.user_name,"?"),"Delete user",(function(){return t.doDelete(e.values.username)}))}},"Delete"),n.a.createElement(U.a,{color:"success",id:"submit-button",type:"submit"},"Save")))}})))}}]),o}(r.Component)}var vt=function(e){E()(i,e);var t,a,r=mt(i);function i(e){var t;return d()(this,i),(t=r.call(this,e)).name=e.match.params.user_name,t.location=e.locaation,t.history=e.history,t.backend=new z.a,t.state={password:"",confirm_password:"",isTenantSchema:null,loading:!1,areYouSureModal:!1,modalFunc:void 0,modalTitle:void 0,modalMsg:void 0,write_perm:!1},t.toggleAreYouSure=t.toggleAreYouSure.bind(f()(t)),t.toggleAreYouSureSetModal=t.toggleAreYouSureSetModal.bind(f()(t)),t.onSubmitHandle=t.onSubmitHandle.bind(f()(t)),t.doChange=t.doChange.bind(f()(t)),t}return _()(i,[{key:"toggleAreYouSure",value:function(){this.setState((function(e){return{areYouSureModal:!e.areYouSureModal}}))}},{key:"toggleAreYouSureSetModal",value:function(e,t,a){this.setState((function(r){return{areYouSureModal:!r.areYouSureModal,modalFunc:a,modalMsg:e,modalTitle:t}}))}},{key:"onSubmitHandle",value:function(e,t){var a=this;this.toggleAreYouSureSetModal("Are you sure you want to change password?","Change password",(function(){return a.doChange(e,t)}))}},{key:"doChange",value:(a=u()(c.a.mark((function e(t,a){var r,n,i,s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backend.changeObject("/api/v2/internal/change_password/",{username:this.name,new_password:t.confirm_password});case 2:if((r=e.sent).ok){e.next=19;break}return n="",e.prev=5,e.next=8,r.json();case 8:i=e.sent,n=i.detail,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),n="Error changing password";case 15:Object(K.q)({title:"Error: ".concat(r.status," ").concat(r.statusText),msg:n}),e.next=20;break;case 19:Object(K.r)({msg:"Password successfully changed",title:"Changed",callback:function(){return s.history.push("/ui/administration/users")}});case 20:case"end":return e.stop()}}),e,this,[[5,12]])}))),function(e,t){return a.apply(this,arguments)})},{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.backend.isActiveSession(!1);case 3:t=e.sent,this.setState({write_perm:t.userdetails.username===this.name,loading:!1});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,r=t.password,i=t.confirm_password,s=t.write_perm;return a?n.a.createElement(K.m,null):a?null:n.a.createElement(K.b,{resourcename:"password",location:this.location,modal:!0,state:this.state,toggle:this.toggleAreYouSure,history:!1,submitperm:s},n.a.createElement(R.d,{initialValues:{password:r,confirm_password:i},validationSchema:pt,onSubmit:function(t,a){return e.onSubmitHandle(t,a)},render:function(e){return n.a.createElement(R.c,null,n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Password"),n.a.createElement(R.a,{type:"password",name:"password",className:"form-control ".concat(e.errors.password&&"border-danger"),id:"password"})),e.errors.password&&Object(K.i)(e.errors.password))),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Confirm password"),n.a.createElement(R.a,{type:"password",name:"confirm_password",className:"form-control ".concat(e.errors.confirm_password&&"border-danger"),id:"confirm_password"})),e.errors.confirm_password&&Object(K.i)(e.errors.confirm_password))),s&&n.a.createElement("div",{className:"submit-row d-flex align-items-center justify-content-between bg-light p-3 mt-5"},n.a.createElement("div",null),n.a.createElement(U.a,{color:"success",id:"submit-button",type:"submit"},"Save")))}}))}}]),i}(r.Component),bt=a("csno");function Mt(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,r=y()(e);if(t()){var n=y()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return b()(this,a)}}var yt=Ct("metrics","groupofmetrics","group of metrics"),Dt=It("metrics","groupofmetrics","metrics"),kt=Ct("aggregations","groupofaggregations","group of aggregations"),wt=It("aggregations","groupofaggregations","aggregations"),Ot=Ct("metricprofiles","groupofmetricprofiles","group of metric profiles"),xt=It("metricprofiles","groupofmetricprofiles","metric profiles"),At=Ct("thresholdsprofiles","groupofthresholdsprofiles","group of thresholds profiles"),Pt=It("thresholdsprofiles","groupofthresholdsprofiles","thresholds profiles");function Ct(e,t,a){return function(r){E()(o,r);var i,s=Mt(o);function o(e){var t;return d()(this,o),(t=s.call(this,e)).state={loading:!1,list_groups:null,error:null},t.location=e.location,t.backend=new z.a,t}return _()(o,[{key:"componentDidMount",value:(i=u()(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({loading:!0}),t.prev=1,t.next=4,this.backend.fetchResult("/api/v2/internal/usergroups");case 4:a=t.sent,this.setState({list_groups:a[e],loading:!1}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),this.setState({error:t.t0,loading:!1});case 11:case 12:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(){return i.apply(this,arguments)})},{key:"render",value:function(){var e=[{Header:a.charAt(0).toUpperCase()+a.slice(1),id:t,accessor:function(e){return n.a.createElement(Z.b,{to:"/ui/administration/".concat(t,"/").concat(e)},e)}}],r=this.state,i=r.loading,s=r.list_groups,o=r.error;return i?n.a.createElement(K.m,null):o?n.a.createElement(K.h,{error:o}):!i&&s?n.a.createElement(K.b,{resourcename:a,location:this.location,listview:!0},n.a.createElement($.a,{data:s,columns:e,className:"-highlight",defaultPageSize:12,rowsText:"groups",getTheadThProps:function(){return{className:"table-active font-weight-bold p-2"}}})):null}}]),o}(r.Component)}function It(e,t,a){return function(r){E()(m,r);var i,s,o,l=Mt(m);function m(e){var t;return d()(this,m),(t=l.call(this,e)).group=e.match.params.group,t.addview=e.addview,t.location=e.location,t.history=e.history,t.state={name:"",items:[],nogroupitems:[],loading:!1,areYouSureModal:!1,modalFunc:void 0,modalTitle:void 0,modalMsg:void 0,error:null},t.backend=new z.a,t.handleDeselect=t.handleDeselect.bind(f()(t)),t.handleSelect=t.handleSelect.bind(f()(t)),t.toggleAreYouSure=t.toggleAreYouSure.bind(f()(t)),t.toggleAreYouSureSetModal=t.toggleAreYouSureSetModal.bind(f()(t)),t.onSubmitHandle=t.onSubmitHandle.bind(f()(t)),t.doChange=t.doChange.bind(f()(t)),t.doDelete=t.doDelete.bind(f()(t)),t}return _()(m,[{key:"handleDeselect",value:function(e){var t=this.state.items.slice(),a=this.state.nogroupitems.slice();e.forEach((function(e){t.splice(t.indexOf(e),1)})),e.forEach((function(e){-1===a.indexOf(e)&&a.push(e)})),this.setState({items:t,nogroupitems:a})}},{key:"handleSelect",value:function(e){e.sort((function(e,t){return e.id-t.id})),this.setState({items:e})}},{key:"toggleAreYouSure",value:function(){this.setState((function(e){return{areYouSureModal:!e.areYouSureModal}}))}},{key:"toggleAreYouSureSetModal",value:function(e,t,a){this.setState((function(r){return{areYouSureModal:!r.areYouSureModal,modalFunc:a,modalMsg:e,modalTitle:t}}))}},{key:"onSubmitHandle",value:function(e,t){var r=this,n=void 0,i=void 0;this.addview?(n="Are you sure you want to add group of ".concat(a,"?"),i="Add group of ".concat(a)):(n="Are you sure you want to change group of ".concat(a,"?"),i="Change group of ".concat(a)),this.toggleAreYouSureSetModal(n,i,(function(){return r.doChange(e,t)}))}},{key:"doChange",value:(o=u()(c.a.mark((function r(n,i){var s,o,l,u,m,d,p,_=this;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=[],this.state.items.forEach((function(e){return s.push(e.name)})),this.addview){r.next=25;break}return r.next=5,this.backend.changeObject("/api/v2/internal/".concat(e,"group/"),{name:n.name,items:s});case 5:if(!(o=r.sent).ok){r.next=10;break}Object(K.r)({msg:"Group of ".concat(a," successfully changed"),title:"Changed",callback:function(){return _.history.push("/ui/administration/".concat(t))}}),r.next=23;break;case 10:return l="",r.prev=11,r.next=14,o.json();case 14:u=r.sent,l=u.detail,r.next=21;break;case 18:r.prev=18,r.t0=r.catch(11),l="Error changing group of ".concat(a);case 21:Object(K.q)({title:"Error: ".concat(o.status," ").concat(o.statusText),msg:l});case 23:r.next=46;break;case 25:return r.next=27,this.backend.addObject("/api/v2/internal/".concat(e,"group/"),{name:n.name,items:s});case 27:if(!(m=r.sent).ok){r.next=32;break}Object(K.r)({msg:"Group of ".concat(a," successfully added"),title:"Added",callback:function(){return _.history.push("/ui/administration/".concat(t))}}),r.next=45;break;case 32:return d="",r.prev=33,r.next=36,m.json();case 36:p=r.sent,d=p.detail,r.next=43;break;case 40:r.prev=40,r.t1=r.catch(33),d="Error adding group of ".concat(a);case 43:Object(K.q)({msg:d,title:"Error: ".concat(m.status," ").concat(m.statusText)});case 45:case 46:case"end":return r.stop()}}),r,this,[[11,18],[33,40]])}))),function(e,t){return o.apply(this,arguments)})},{key:"doDelete",value:(s=u()(c.a.mark((function r(n){var i,s,o,l=this;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.backend.deleteObject("/api/v2/internal/".concat(e,"group/").concat(n));case 2:if(!(i=r.sent).ok){r.next=7;break}Object(K.r)({msg:"Group of ".concat(a," successfully deleted"),title:"Deleted",callback:function(){return l.history.push("/ui/administration/".concat(t))}}),r.next=20;break;case 7:return s="",r.prev=8,r.next=11,i.json();case 11:o=r.sent,s=o.detail,r.next=18;break;case 15:r.prev=15,r.t0=r.catch(8),s="Error deleting group of ".concat(a);case 18:Object(K.q)({msg:s,title:"Error: ".concat(i.status," ").concat(i.statusText)});case 20:case 21:case"end":return r.stop()}}),r,this,[[8,15]])}))),function(e){return s.apply(this,arguments)})},{key:"componentDidMount",value:(i=u()(c.a.mark((function t(){var a,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({loading:!0}),t.prev=1,t.next=4,this.backend.fetchResult("/api/v2/internal/".concat(e,"group"));case 4:if(a=t.sent,this.addview){t.next=12;break}return t.next=8,this.backend.fetchResult("/api/v2/internal/".concat(e,"group/").concat(this.group));case 8:r=t.sent,this.setState({name:this.group,items:r,nogroupitems:a,loading:!1}),t.next=13;break;case 12:this.setState({name:"",items:[],nogroupitems:a,loading:!1});case 13:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),this.setState({error:t.t0,loading:!1});case 19:case 20:case"end":return t.stop()}}),t,this,[[1,16]])}))),function(){return i.apply(this,arguments)})},{key:"render",value:function(){var t=this,r=this.state,i=r.name,s=r.items,o=r.loading,c=r.error,l=this.state.nogroupitems,u={filter:"form-control",select:"form-control",button:"btn btn btn-block btn-primary",buttonActive:"btn btn btn-block btn-primary"};return o?n.a.createElement(K.m,null):c?n.a.createElement(K.h,{error:c}):o?void 0:n.a.createElement(K.b,{resourcename:"group of ".concat(a),location:this.location,addview:this.addview,history:!1,modal:!0,state:this.state,toggle:this.toggleAreYouSure},n.a.createElement(R.d,{initialValues:{name:i,items:s},onSubmit:function(e,a){return t.onSubmitHandle(e,a)},render:function(r){return n.a.createElement(R.c,null,n.a.createElement(T.a,null,n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(N.a,{for:"groupname"},"Name"),n.a.createElement(R.a,{type:"text",name:"name",required:!0,className:"form-control",id:"groupname",disabled:!t.addview})))),n.a.createElement(T.a,null,n.a.createElement("h4",{className:"mt-2 p-1 pl-3 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},a),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:5},n.a.createElement(bt.a,{buttonText:"Add",classNames:u,onChange:t.handleSelect,options:l,selectedOptions:s,size:15,textProp:"name",valueProp:"id"})),n.a.createElement(P.a,{md:5},n.a.createElement(bt.a,{buttonText:"Remove",classNames:{filter:"form-control",select:"form-control",button:"btn btn btn-block btn-danger",buttonActive:"btn btn btn-block btn-danger"},onChange:t.handleDeselect,options:s,size:15,textProp:"name",valueProp:"id"})))),n.a.createElement("div",{className:"submit-row d-flex align-items-center justify-content-between bg-light p-3 mt-5"},t.addview?n.a.createElement("div",null):n.a.createElement(U.a,{color:"danger",onClick:function(){t.toggleAreYouSureSetModal("Are you sure you want to delete group of ".concat(e,"?"),"Delete group of ".concat(e),(function(){return t.doDelete(r.values.name)}))}},"Delete"),n.a.createElement(U.a,{color:"success",id:"submit-button",type:"submit"},"Save")))}}))}}]),m}(r.Component)}var St=a("Q4bY"),Tt=a("VtcC"),Nt=a("p2VU");function Lt(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,r=y()(e);if(t()){var n=y()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return b()(this,a)}}var Ut=function(e){E()(r,e);var t,a=Lt(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).location=e.location,t.state={list_keys:null,loading:!1,error:null},t.backend=new z.a,t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData("/api/v2/internal/apikeys");case 4:t=e.sent,this.setState({list_keys:t,loading:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 11:case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=[{Header:"Name",id:"name",accessor:function(e){return n.a.createElement(Z.b,{to:"/ui/administration/apikey/"+e.name},e.name)}},{Header:"Created",accessor:"created"},{Header:"Revoked",id:"revoked",Cell:function(e){return n.a.createElement("div",{style:{textAlign:"center"}},e.value)},accessor:function(e){return e.revoked?n.a.createElement(ee.a,{icon:te.c,style:{color:"#339900"}}):n.a.createElement(ee.a,{icon:te.t,style:{color:"#CC0000"}})}}],t=this.state,a=t.loading,r=t.list_keys,i=t.error;return a?n.a.createElement(K.m,null):i?n.a.createElement(K.h,{error:i}):!a&&r?n.a.createElement(K.b,{resourcename:"API key",location:this.location,listview:!0},n.a.createElement($.a,{data:r,columns:e,className:"-highlight",defaultPageSize:5,rowsText:"keys",getTheadThProps:function(){return{className:"table-active font-weight-bold p-2"}}})):null}}]),r}(r.Component),jt=function(e){E()(s,e);var t,a,r,i=Lt(s);function s(e){var t;return d()(this,s),(t=i.call(this,e)).name=e.match.params.name,t.location=e.location,t.addview=e.addview,t.history=e.history,t.state={key:{},loading:!1,areYouSureModal:!1,modalFunc:void 0,modalTitle:void 0,modalMsg:void 0,error:null},t.backend=new z.a,t.toggleAreYouSure=t.toggleAreYouSure.bind(f()(t)),t.toggleAreYouSureSetModal=t.toggleAreYouSureSetModal.bind(f()(t)),t.onSubmitHandle=t.onSubmitHandle.bind(f()(t)),t.doChange=t.doChange.bind(f()(t)),t.doDelete=t.doDelete.bind(f()(t)),t}return _()(s,[{key:"toggleAreYouSure",value:function(){this.setState((function(e){return{areYouSureModal:!e.areYouSureModal}}))}},{key:"toggleAreYouSureSetModal",value:function(e,t,a){this.setState((function(r){return{areYouSureModal:!r.areYouSureModal,modalFunc:a,modalMsg:e,modalTitle:t}}))}},{key:"onSubmitHandle",value:function(e,t){var a=this,r=void 0,n=void 0;this.addview?(r="Are you sure you want to add API key?",n="Add API key"):(r="Are you sure you want to change API key?",n="Change API key"),this.toggleAreYouSureSetModal(r,n,(function(){return a.doChange(e,t)}))}},{key:"doChange",value:(r=u()(c.a.mark((function e(t,a){var r,n,i,s,o,l,u=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.addview){e.next=23;break}return e.next=3,this.backend.changeObject("/api/v2/internal/apikeys/",{id:this.state.key.id,revoked:t.revoked,name:t.name});case 3:if(!(r=e.sent).ok){e.next=8;break}Object(K.r)({msg:"API key successfully changed",title:"Changed",callback:function(){return u.history.push("/ui/administration/apikey")}}),e.next=20;break;case 8:return n="",e.prev=9,e.next=12,r.json();case 12:i=e.sent,n="".concat(i.detail?i.detail:"Error changing API key"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),n="Error changing API key";case 19:Object(K.q)({title:"Error: ".concat(r.status," ").concat(r.statusText),msg:n});case 20:e.next=43;break;case 23:return e.next=25,this.backend.addObject("/api/v2/internal/apikeys/",{name:t.name});case 25:if(!(s=e.sent).ok){e.next=30;break}Object(K.r)({msg:"API key successfully added",title:"Added",callback:function(){return u.history.push("/ui/administration/apikey")}}),e.next=42;break;case 30:return o="",e.prev=31,e.next=34,s.json();case 34:l=e.sent,o="".concat(l.detail?l.detail:"Error adding API key"),e.next=41;break;case 38:e.prev=38,e.t1=e.catch(31),o="Error adding API key";case 41:Object(K.q)({title:"Error: ".concat(s.status," ").concat(s.statusText),msg:o});case 42:case 43:case 44:case"end":return e.stop()}}),e,this,[[9,16],[31,38]])}))),function(e,t){return r.apply(this,arguments)})},{key:"doDelete",value:(a=u()(c.a.mark((function e(t){var a,r,n,i=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backend.deleteObject("/api/v2/internal/apikeys/".concat(t));case 2:if(!(a=e.sent).ok){e.next=7;break}Object(K.r)({msg:"API key successfully deleted",title:"Deleted",callback:function(){return i.history.push("/ui/administration/apikey")}}),e.next=19;break;case 7:return r="",e.prev=8,e.next=11,a.json();case 11:n=e.sent,r="".concat(n.detail?n.detail:"Error deleting API key"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),r="Error deleting API key";case 18:Object(K.q)({title:"Error: ".concat(a.status," ").concat(a.statusText),msg:r});case 19:case 20:case"end":return e.stop()}}),e,this,[[8,15]])}))),function(e){return a.apply(this,arguments)})},{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({loading:!0}),e.prev=1,this.addview){e.next=9;break}return e.next=5,this.backend.fetchData("/api/v2/internal/apikeys/".concat(this.name));case 5:t=e.sent,this.setState({key:t,loading:!1}),e.next=10;break;case 9:this.setState({key:{name:"",revoked:!1,token:""},loading:!1});case 10:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 16:case 17:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,a=t.key,r=t.loading,i=t.error;return r?n.a.createElement(K.m,null):i?n.a.createElement(K.h,{error:i}):!r&&a?n.a.createElement(K.b,{resourcename:"API key",location:this.location,addview:this.addview,history:!1,modal:!0,state:this.state,toggle:this.toggleAreYouSure},n.a.createElement(R.d,{initialValues:{name:a.name,revoked:a.revoked,token:a.token},onSubmit:function(t,a){return e.onSubmitHandle(t,a)},render:function(t){return n.a.createElement(R.c,null,n.a.createElement(T.a,null,n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(N.a,{for:"name"},"Name"),n.a.createElement(R.a,{type:"text",name:"name",id:"name",required:!0,className:"form-control"}),n.a.createElement(be.a,{color:"muted"},"A free-form unique identifier of the client. 50 characters max."))),n.a.createElement(A.a,{className:"mt-2"},n.a.createElement(P.a,{md:6},n.a.createElement(R.a,{component:K.c,name:"revoked",className:"form-control",id:"checkbox",label:"Revoked"}),n.a.createElement(be.a,{color:"muted"},"If the API key is revoked, clients cannot use it any more. (This cannot be undone.)")))),n.a.createElement(T.a,null,n.a.createElement("h4",{className:"mt-2 p-1 pl-3 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"Credentials"),n.a.createElement(A.a,null,n.a.createElement(P.a,{sm:6},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Token"),n.a.createElement(R.a,{type:"text",name:"token",id:"token",readOnly:!0,className:"form-control"})),n.a.createElement(be.a,{color:"muted"},"A public, unique identifier for this API key."))),e.addview&&n.a.createElement(St.a,{className:"mt-3"},n.a.createElement(Tt.a,{icon:"info"},"Info"),n.a.createElement(Nt.a,null,"Token will be generated when clicking save."))),n.a.createElement("div",{className:e.addview?"submit-row d-flex align-items-center justify-content-end bg-light p-3 mt-5":"submit-row d-flex align-items-center justify-content-between bg-light p-3 mt-5"},!e.addview&&n.a.createElement(U.a,{color:"danger",onClick:function(){e.toggleAreYouSureSetModal("Are you sure you want to delete API key?","Delete API key",(function(){return e.doDelete(e.name)}))}},"Delete"),n.a.createElement(U.a,{color:"success",id:"submit-button",type:"submit"},"Save")))}})):void 0}}]),s}(r.Component),Rt=function(e){return n.a.createElement("div",null,n.a.createElement("h1",null,"Not found"))},Wt=a("Ty5D"),Bt=a("of9s");function Kt(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,r=y()(e);if(t()){var n=y()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return b()(this,a)}}var zt=Ft(),Yt=Ft(!0),Vt=ne.object().shape({name:ne.string().matches(/^\S*$/,"Name cannot contain white spaces").required("Required"),content:ne.string().required("Required"),description:ne.string().required("Required")}),Qt=function(e){E()(r,e);var t,a=Kt(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).location=e.location,t.state={loading:!1,list_repos:null,list_tags:null,isTenantSchema:null,search_name:"",search_description:"",search_tag:"",error:null},t.backend=new z.a,t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData("/api/v2/internal/yumrepos");case 4:return t=e.sent,e.next=7,this.backend.fetchData("/api/v2/internal/ostags");case 7:return a=e.sent,e.next=10,this.backend.isTenantSchema();case 10:r=e.sent,this.setState({list_repos:t,list_tags:a,isTenantSchema:r,loading:!1}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 17:case 18:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,a=t.list_repos,r=t.isTenantSchema,i=t.loading,s=t.error,o=void 0;o=r?"/ui/administration/yumrepos/":"/ui/yumrepos/";var c=[{Header:"#",id:"row",minWidth:12,Cell:function(e){return n.a.createElement("div",{style:{textAlign:"center"}},e.index+1)}},{Header:"Name",id:"name",minWidth:80,accessor:function(e){return n.a.createElement(Z.b,{to:o+e.name+"-"+e.tag.replace(/\s/g,"").toLowerCase()},"".concat(e.name," (").concat(e.tag,")"))},filterable:!0,Filter:n.a.createElement("input",{value:this.state.search_name,onChange:function(t){return e.setState({search_name:t.target.value})},placeholder:"Search by name",style:{width:"100%"}})},{Header:"Description",accessor:"description",filterable:!0,Filter:n.a.createElement("input",{type:"text",placeholder:"Search by description",value:this.state.search_description,onChange:function(t){return e.setState({search_description:t.target.value})},style:{width:"100%"}})},{Header:"Tag",accessor:"tag",Cell:function(e){return n.a.createElement("div",{style:{textAlign:"center"}},e.value)},filterable:!0,Filter:n.a.createElement(K.g,{value:this.state.tag,onChange:function(t){return e.setState({search_tag:t.target.value})},data:this.state.list_tags})}];return this.state.search_name&&(a=a.filter((function(t){return t.name.toLowerCase().includes(e.state.search_name.toLowerCase())}))),this.state.search_description&&(a=a.filter((function(t){return t.description.toLowerCase().includes(e.state.search_description.toLowerCase())}))),this.state.search_tag&&(a=a.filter((function(t){return t.tag.toLowerCase().includes(e.state.search_tag.toLowerCase())}))),i?n.a.createElement(K.m,null):s?n.a.createElement(K.h,{error:s}):!i&&a?n.a.createElement(K.b,{resourcename:"YUM repo",location:this.location,listview:!0,addnew:!r},n.a.createElement($.a,{data:a,columns:c,className:"-highlight",defaultPageSize:20,rowsText:"repos",getTheadThProps:function(){return{className:"table-active font-weight-bold p-2"}}})):null}}]),r}(r.Component);function Ft(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){E()(o,t);var a,r,i,s=Kt(o);function o(e){var t;return d()(this,o),t=s.call(this,e),e.match.params.name&&(t.tag=e.match.params.name.split("-")[e.match.params.name.split("-").length-1],t.name=e.match.params.name.replace("-"+t.tag,"")),t.addview=e.addview,t.disabled=e.disabled,t.location=e.location,t.history=e.history,t.backend=new z.a,t.state={repo:{id:"",name:"",tag:"CentOS 6",content:"",description:""},tagslist:[],loading:!1,areYouSureModal:!1,modalFunc:void 0,modalTitle:void 0,modalMsg:void 0,error:null},t.toggleAreYouSure=t.toggleAreYouSure.bind(f()(t)),t.toggleAreYouSureSetModal=t.toggleAreYouSureSetModal.bind(f()(t)),t.onSubmitHandle=t.onSubmitHandle.bind(f()(t)),t.doChange=t.doChange.bind(f()(t)),t.doDelete=t.doDelete.bind(f()(t)),t}return _()(o,[{key:"toggleAreYouSure",value:function(){this.setState((function(e){return{areYouSureModal:!e.areYouSureModal}}))}},{key:"toggleAreYouSureSetModal",value:function(e,t,a){this.setState((function(r){return{areYouSureModal:!r.areYouSureModal,modalFunc:a,modalMsg:e,modalTitle:t}}))}},{key:"onSubmitHandle",value:function(t,a){var r=this,n=void 0,i=void 0;!this.addview||e?(n="Are you sure you want to change YUM repo?",i="Change YUM repo"):(n="Are you sure you want to add YUM repo?",i="Add YUM repo"),this.toggleAreYouSureSetModal(n,i,(function(){return r.doChange(t,a)}))}},{key:"doChange",value:(i=u()(c.a.mark((function t(a,r){var n,i,s,o,l,u,m=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.addview&&!e){t.next=24;break}return t.next=3,this.backend.addObject("/api/v2/internal/yumrepos/",{name:a.name,tag:a.tag,content:a.content,description:a.description});case 3:if((n=t.sent).ok){t.next=20;break}return i="",t.prev=6,t.next=9,n.json();case 9:s=t.sent,i=s.detail,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),i="Error adding YUM repo";case 16:Object(K.q)({title:"Error: ".concat(n.status," ").concat(n.statusText),msg:i}),t.next=21;break;case 20:Object(K.r)({msg:"YUM repo successfully added",title:"Added",callback:function(){return m.history.push("/ui/yumrepos")}});case 21:t.next=45;break;case 24:return t.next=26,this.backend.changeObject("/api/v2/internal/yumrepos/",{id:a.id,name:a.name,tag:a.tag,content:a.content,description:a.description});case 26:if((o=t.sent).ok){t.next=43;break}return l="",t.prev=29,t.next=32,o.json();case 32:u=t.sent,l=u.detail,t.next=39;break;case 36:t.prev=36,t.t1=t.catch(29),l="Error changing YUM repo";case 39:Object(K.q)({title:"Error: ".concat(o.status," ").concat(o.statusText),msg:l}),t.next=44;break;case 43:Object(K.r)({msg:"YUM repo successfully changed",title:"Changed",callback:function(){return m.history.push("/ui/yumrepos")}});case 44:case 45:case 46:case"end":return t.stop()}}),t,this,[[6,13],[29,36]])}))),function(e,t){return i.apply(this,arguments)})},{key:"doDelete",value:(r=u()(c.a.mark((function e(t,a){var r,n,i,s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backend.deleteObject("/api/v2/internal/yumrepos/".concat(t,"/").concat(a));case 2:if((r=e.sent).ok){e.next=19;break}return n="",e.prev=5,e.next=8,r.json();case 8:i=e.sent,n=i.detail,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),n="Error deleting YUM repo";case 15:Object(K.q)({title:"Error: ".concat(r.status," ").concat(r.statusText),msg:n}),e.next=20;break;case 19:Object(K.r)({msg:"YUM repo successfully deleted",title:"Deleted",callback:function(){return s.history.push("/ui/yumrepos")}});case 20:case 21:case"end":return e.stop()}}),e,this,[[5,12]])}))),function(e,t){return r.apply(this,arguments)})},{key:"componentDidMount",value:(a=u()(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData("/api/v2/internal/ostags");case 4:if(t=e.sent,this.addview){e.next=12;break}return e.next=8,this.backend.fetchData("/api/v2/internal/yumrepos/".concat(this.name,"/").concat(this.tag));case 8:a=e.sent,this.setState({repo:a,tagslist:t,loading:!1}),e.next=13;break;case 12:this.setState({tagslist:t,loading:!1});case 13:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 19:case 20:case"end":return e.stop()}}),e,this,[[1,16]])}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var t=this,a=this.state,r=a.repo,i=a.tagslist,s=a.loading,o=a.error;return s?n.a.createElement(K.m,null):o?n.a.createElement(K.h,{error:o}):!s&&r?n.a.createElement(K.b,{resourcename:"YUM repo",location:this.location,addview:this.addview,cloneview:e,clone:!0,modal:!0,state:this.state,toggle:this.toggleAreYouSure,history:!1},n.a.createElement(R.d,{initialValues:{id:r.id,name:r.name,tag:r.tag,content:r.content,description:r.description},onSubmit:function(e,a){return t.onSubmitHandle(e,a)},validationSchema:Vt,render:function(a){return n.a.createElement(R.c,null,n.a.createElement(T.a,null,n.a.createElement(A.a,null,n.a.createElement(P.a,{md:6},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Name"),n.a.createElement(R.a,{type:"text",name:"name",className:"form-control ".concat(a.errors.name&&"border-danger"),id:"name",disabled:t.disabled})),a.errors.name&&Object(K.i)(a.errors.name),n.a.createElement(be.a,{color:"muted"},"Name of YUM repo file.")),n.a.createElement(P.a,{md:2},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Tag"),t.disabled?n.a.createElement(R.a,{type:"text",name:"tag",className:"form-control",id:"tag",disabled:!0}):n.a.createElement(R.a,{component:"select",name:"tag",className:"form-control",id:"tag"},i.map((function(e,t){return n.a.createElement("option",{key:t,value:e},e)})))),n.a.createElement(be.a,{color:"muted"},"OS tag.")))),n.a.createElement(T.a,null,n.a.createElement(A.a,null,n.a.createElement(P.a,{md:8},n.a.createElement(N.a,{for:"content"},"File content"),n.a.createElement(R.a,{component:"textarea",name:"content",rows:"20",className:"form-control ".concat(a.errors.content&&"border-danger"),id:"content",disabled:t.disabled}),a.errors.content&&Object(K.i)(a.errors.content),n.a.createElement(be.a,{color:"muted"},"Content of the repo file.")))),n.a.createElement(T.a,null,n.a.createElement(A.a,null,n.a.createElement(P.a,{md:8},n.a.createElement(N.a,{for:"description"},"Description"),n.a.createElement(R.a,{component:"textarea",name:"description",rows:"5",className:"form-control ".concat(a.errors.description&&"border-danger"),id:"description",disabled:t.disabled}),a.errors.description&&Object(K.i)(a.errors.description),n.a.createElement(be.a,{color:"muted"},"Short free text description.")))),!t.disabled&&n.a.createElement("div",{className:"submit-row d-flex align-items-center justify-content-between bg-light p-3 mt-5"},t.addview||e?n.a.createElement("div",null):n.a.createElement(U.a,{color:"danger",onClick:function(){t.toggleAreYouSureSetModal("Are you sure you want to delete YUM repo?","Delete YUM repo",(function(){return t.doDelete(t.name,t.tag)}))}},"Delete"),n.a.createElement(U.a,{color:"success",id:"submit-button",type:"submit"},"Save")))}})):null}}]),o}(r.Component)}var qt=a("iqOp"),Ht=a("glTy"),Gt=a("YGfb");function Zt(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,r=y()(e);if(t()){var n=y()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return b()(this,a)}}var Jt=Object(K.k)("thresholdsprofile"),Xt=ne.object().shape({name:ne.string().required("Required"),groupname:ne.string().required("Required"),rules:ne.array().of(ne.object().shape({metric:ne.string().required("Required"),thresholds:ne.array().of(ne.object().shape({label:ne.string().matches(/^[a-zA-Z][A-Za-z0-9]*$/,"Label can contain alphanumeric characters, but must always begin with a letter.").required("Required"),value:ne.string().matches(/^([-](?=\.?\d))?(\d+)?(\.\d+)?$/,"Must be a number.").required("Required"),warn1:ne.string().matches(/^[@]?(~|[-](?=\.?\d))?(\d+)?(\.\d+)?$/,"Must be a number.").required("Required"),warn2:ne.string().matches(/^([-](?=\.?\d))?(\d+)?(\.\d+)?$/,"Must be a number.").test("greater-than","Should be greater than lower warning limit",(function(e){var t="@"===this.parent.warn1.charAt(0)?this.parent.warn1.substr(1):this.parent.warn1;return!t||!e||("~"===t||(!(!isNaN(Number(t))&&!isNaN(Number(e)))||Number(t)<=Number(e)))})),crit1:ne.string().matches(/^[@]?(~|[-](?=\.?\d))?(\d+)?(\.\d+)?$/,"Must be a number.").required("Required"),crit2:ne.string().matches(/^([-](?=\.?\d))?(\d+)?(\.\d+)?$/,"Must be a number.").test("greater-than","Should be greater than lower critical limit",(function(e){var t="@"===this.parent.crit1.charAt(0)?this.parent.crit1.substr(1):this.parent.crit1;return!t||!e||("~"===t||(!(!isNaN(Number(t))&&!isNaN(Number(e)))||Number(t)<=Number(e)))})),min:ne.string().matches(/^([-](?=\.?\d))?(\d+)?(\.\d+)?$/,"Must be a number."),max:ne.string().matches(/^([-](?=\.?\d))?(\d+)?(\.\d+)?$/,"Must be a number.").test("greater-than-min","Should be greater than min value.",(function(e){var t=this.parent.min;return!t||(!(!isNaN(Number(t))&&!isNaN(Number(e)))||Number(t)<Number(e))}))}))}))});function $t(e){return e.forEach((function(e){var t=e.thresholds.split(" "),a=[];t.forEach((function(e){var t="",r="",n="",i="",s="",o="",c="",l="",u="",m=e.split("=");if(2===m.length){t=m[0];var d=m[1].split(";");if(d.length>0&&(n=function(e){return isNaN(e.charAt(e.length-1))?e.endsWith("us")?"us":e.endsWith("ms")?"ms":e.endsWith("s")?"s":e.endsWith("%")?"%":e.endsWith("KB")?"KB":e.endsWith("MB")?"MB":e.endsWith("TB")?"TB":e.endsWith("B")?"B":e.endsWith("c")?"c":void 0:""}(d[0]),r=d[0].replace(n,""),d.length>1))for(var p=1;p<d.length;p++)if(1===p){var _=d[p].split(":");_.length>1?(i=_[0],s=_[1]):(i="0",s=d[p])}else if(2===p){var h=d[p].split(":");h.length>1?(o=h[0],c=h[1]):(o="0",c=d[p])}else 3===p?l=d[p]:4===p&&(u=d[p])}a.push({label:t,value:r,uom:n,warn1:i,warn2:s,crit1:o,crit2:c,min:l,max:u})})),e.thresholds=a})),e}var ea=function(e){var t=e.values,a=e.errors,r=e.setFieldValue,i=e.historyview,s=void 0!==i&&i,o=e.groups_list,c=void 0===o?void 0:o,l=e.metrics_list,u=void 0===l?void 0:l,m=e.write_perm,d=void 0!==m&&m,p=e.onSelect,_=e.state,h=e.toggleWarningPopOver,f=e.toggleCriticalPopOver;return n.a.createElement(n.a.Fragment,null,n.a.createElement(K.t,{values:t,errors:a,grouplist:d?c:[t.groupname],fieldsdisable:s,profiletype:"thresholds"}),n.a.createElement(T.a,null,n.a.createElement("h4",{className:"mt-4 p-1 pl-3 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"Thresholds rules"),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:12},n.a.createElement(R.b,{name:"rules",render:function(e){return n.a.createElement("div",null,t.rules&&t.rules.length>0?t.rules.map((function(i,o){return n.a.createElement(n.a.Fragment,{key:"fragment.rules.".concat(o)},n.a.createElement(C.a,{className:"mt-".concat(0===o?"1":"4")},n.a.createElement(I.a,{className:"p-1 font-weight-bold text-uppercase"},n.a.createElement("div",{className:"d-flex align-items-center justify-content-between no-gutters"},"Rule ",o+1,!s&&n.a.createElement(U.a,{size:"sm",color:"danger",type:"button",onClick:function(){return d&&e.remove(o)}},n.a.createElement(ee.a,{icon:te.s})))),n.a.createElement(S.a,{className:"p-1"},n.a.createElement(A.a,{className:"d-flex align-items-center no-gutters"},n.a.createElement(P.a,{md:12},s?n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Metric"),n.a.createElement(R.a,{name:"rules.".concat(o,".metric"),className:"form-control",disabled:!0})):n.a.createElement(K.a,{req:a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].metric,setFieldValue:r,lists:u,icon:"metrics",field:"rules[".concat(o,"].metric"),val:t.rules[o].metric,onselect_handler:p,label:"Metric"}),a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].metric&&Object(K.i)(a.rules[o].metric))),n.a.createElement(A.a,{className:"mt-2"},n.a.createElement(P.a,{md:12},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Host"),n.a.createElement(R.a,{name:"rules.".concat(o,".host"),className:"form-control",disabled:s})))),n.a.createElement(A.a,{className:"mt-2"},n.a.createElement(P.a,{md:12},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Endpoint group"),n.a.createElement(R.a,{name:"rules.".concat(o,".endpoint_group"),className:"form-control",disabled:s}))))),n.a.createElement(j.a,null,n.a.createElement(A.a,{className:"mt-2"},n.a.createElement(P.a,{md:12},n.a.createElement("h6",{className:"text-uppercase rounded"},"Thresholds"),n.a.createElement(R.b,{name:"rules.".concat(o,".thresholds"),render:function(e){return n.a.createElement("div",null,n.a.createElement("table",{className:"table table-bordered table-sm"},n.a.createElement("thead",{className:"table-active"},n.a.createElement("tr",{className:"align-middle text-center"},n.a.createElement("th",{style:{width:"4%"}},"#"),n.a.createElement("th",{style:{width:"13%"}},"Label"),n.a.createElement("th",{colSpan:2,style:{width:"13%"}},"Value"),s?n.a.createElement("th",{colSpan:3,style:{width:"13%"}},"Warning"):n.a.createElement("th",{colSpan:3,style:{width:"13%"}},"Warning ",n.a.createElement(ee.a,{id:"warning-popover",icon:te.i,style:{color:"#416090"}}),n.a.createElement(qt.a,{placement:"bottom",isOpen:_.popoverWarningOpen,target:"warning-popover",toggle:h,trigger:"hover"},n.a.createElement(Ht.a,null,"Warning range"),n.a.createElement(Gt.a,null,n.a.createElement("p",null,"Defined in format: ",n.a.createElement("code",null,"@{floor}:{ceil}")),n.a.createElement("p",null,n.a.createElement("code",null,"@")," - optional - negates the range (value should belong outside limits)"),n.a.createElement("p",null,n.a.createElement("code",null,"{floor}"),": integer/float or ",n.a.createElement("code",null,"~")," that defines negative infinity"),n.a.createElement("p",null,n.a.createElement("code",null,"{ceil}"),": integer/float or empty (defines positive infinity)")))),s?n.a.createElement("th",{colSpan:3,style:{width:"13%"}},"Critical"):n.a.createElement("th",{colSpan:3,style:{width:"13%"}},"Critical ",n.a.createElement(ee.a,{id:"critical-popover",icon:te.i,style:{color:"#416090"}}),n.a.createElement(qt.a,{placement:"bottom",isOpen:_.popoverCriticalOpen,target:"critical-popover",toggle:f,trigger:"hover"},n.a.createElement(Ht.a,null,"Critical range"),n.a.createElement(Gt.a,null,n.a.createElement("p",null,"Defined in format: ",n.a.createElement("code",null,"@{floor}:{ceil}")),n.a.createElement("p",null,n.a.createElement("code",null,"@")," - optional - negates the range (value should belong outside limits)"),n.a.createElement("p",null,n.a.createElement("code",null,"{floor}"),": integer/float or ",n.a.createElement("code",null,"~")," that defines negative infinity"),n.a.createElement("p",null,n.a.createElement("code",null,"{ceil}"),": integer/float or empty (defines positive infinity)")))),n.a.createElement("th",{style:{width:"12%"}},"min"),n.a.createElement("th",{style:{width:"12%"}},"max"),!s&&n.a.createElement("th",{style:{width:"8%"}},"Action"))),n.a.createElement("tbody",null,t.rules&&t.rules.length>o&&t.rules[o]&&t.rules[o].thresholds&&t.rules[o].thresholds.length>0?t.rules[o].thresholds.map((function(r,i){return n.a.createElement("tr",{key:"rule-".concat(o,"-threshold-").concat(i)},n.a.createElement("td",{className:"align-middle text-center"},i+1),n.a.createElement("td",null,s?t.rules[o].thresholds[i].label:n.a.createElement(R.a,{type:"text",className:"form-control ".concat(a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].thresholds&&a.rules[o].thresholds.length>i&&a.rules[o].thresholds[i]&&a.rules[o].thresholds[i].label&&"border-danger"),name:"rules[".concat(o,"].thresholds[").concat(i,"].label"),id:"values.rules.".concat(o,".thresholds.").concat(i,".label")}),a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].thresholds&&a.rules[o].thresholds.length>i&&a.rules[o].thresholds[i]&&a.rules[o].thresholds[i].label&&Object(K.i)(a.rules[o].thresholds[i].label)),n.a.createElement("td",null,s?t.rules[o].thresholds[i].value:n.a.createElement(R.a,{type:"text",className:"form-control ".concat(a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].thresholds&&a.rules[o].thresholds.length>i&&a.rules[o].thresholds[i]&&a.rules[o].thresholds[i].value&&"border-danger"),name:"rules.".concat(o,".thresholds.").concat(i,".value"),id:"values.rules.".concat(o,".thresholds.").concat(i,".value")}),a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].thresholds&&a.rules[o].thresholds.length>i&&a.rules[o].thresholds[i]&&a.rules[o].thresholds[i].value&&Object(K.i)(a.rules[o].thresholds[i].value)),n.a.createElement("td",{style:{width:"6%"}},s?t.rules[o].thresholds[i].uom:n.a.createElement(R.a,{component:"select",className:"form-control custom-select",name:"rules.".concat(o,".thresholds.").concat(i,".uom"),id:"values.rules.".concat(o,".thresholds.").concat(i,".uom")},n.a.createElement("option",{key:"option-0",value:""}),n.a.createElement("option",{key:"option-1",value:"s"},"s"),n.a.createElement("option",{key:"option-2",value:"us"},"us"),n.a.createElement("option",{key:"option-3",value:"ms"},"ms"),n.a.createElement("option",{key:"option-4",value:"B"},"B"),n.a.createElement("option",{key:"option-5",value:"KB"},"KB"),n.a.createElement("option",{key:"option-6",value:"MB"},"MB"),n.a.createElement("option",{key:"option-7",value:"TB"},"TB"),n.a.createElement("option",{key:"option-8",value:"%"},"%"),n.a.createElement("option",{key:"option-9",value:"c"},"c"))),n.a.createElement("td",null,s?t.rules[o].thresholds[i].warn1:n.a.createElement(R.a,{type:"text",className:"form-control ".concat(a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].thresholds&&a.rules[o].thresholds.length>i&&a.rules[o].thresholds[i]&&a.rules[o].thresholds[i].warn1&&"border-danger"),name:"rules.".concat(o,".thresholds.").concat(i,".warn1"),id:"values.rules.".concat(o,".thresholds.").concat(i,".warn1")}),a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].thresholds&&a.rules[o].thresholds.length>i&&a.rules[o].thresholds[i]&&a.rules[o].thresholds[i].warn1&&Object(K.i)(a.rules[o].thresholds[i].warn1)),n.a.createElement("td",null,":"),n.a.createElement("td",null,s?t.rules[o].thresholds[i].warn2:n.a.createElement(R.a,{type:"text",className:"form-control ".concat(a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].thresholds&&a.rules[o].thresholds.length>i&&a.rules[o].thresholds[i]&&a.rules[o].thresholds[i].warn2&&"border-danger"),name:"rules.".concat(o,".thresholds.").concat(i,".warn2"),id:"values.rules.".concat(o,".thresholds.").concat(i,".warn2")}),a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].thresholds&&a.rules[o].thresholds.length>i&&a.rules[o].thresholds[i]&&a.rules[o].thresholds[i].warn2&&Object(K.i)(a.rules[o].thresholds[i].warn2)),n.a.createElement("td",null,s?t.rules[o].thresholds[i].crit1:n.a.createElement(R.a,{type:"text",className:"form-control ".concat(a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].thresholds&&a.rules[o].thresholds.length>i&&a.rules[o].thresholds[i]&&a.rules[o].thresholds[i].crit1&&"border-danger"),name:"rules.".concat(o,".thresholds.").concat(i,".crit1"),id:"values.rules.".concat(o,".thresholds.").concat(i,".crit1")}),a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].thresholds&&a.rules[o].thresholds.length>i&&a.rules[o].thresholds[i]&&a.rules[o].thresholds[i].crit1&&Object(K.i)(a.rules[o].thresholds[i].crit1)),n.a.createElement("td",null,":"),n.a.createElement("td",null,s?t.rules[o].thresholds[i].crit2:n.a.createElement(R.a,{type:"text",className:"form-control ".concat(a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].thresholds&&a.rules[o].thresholds.length>i&&a.rules[o].thresholds[i]&&a.rules[o].thresholds[i].crit2&&"border-danger"),name:"rules.".concat(o,".thresholds.").concat(i,".crit2"),id:"values.rules.".concat(o,".thresholds.").concat(i,".crit2")}),a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].thresholds&&a.rules[o].thresholds.length>i&&a.rules[o].thresholds[i]&&a.rules[o].thresholds[i].crit2&&Object(K.i)(a.rules[o].thresholds[i].crit2)),n.a.createElement("td",null,s?t.rules[o].thresholds[i].min:n.a.createElement(R.a,{type:"text",className:"form-control ".concat(a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].thresholds&&a.rules[o].thresholds.length>i&&a.rules[o].thresholds[i]&&a.rules[o].thresholds[i].min&&"border-danger"),name:"rules.".concat(o,".thresholds.").concat(i,".min"),id:"values.rules.".concat(o,".thresholds.").concat(i,".min")}),a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].thresholds&&a.rules[o].thresholds.length>i&&a.rules[o].thresholds[i]&&a.rules[o].thresholds[i].min&&Object(K.i)(a.rules[o].thresholds[i].min)),n.a.createElement("td",null,s?t.rules[o].thresholds[i].max:n.a.createElement(R.a,{type:"text",className:"form-control ".concat(a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].thresholds&&a.rules[o].thresholds.length>i&&a.rules[o].thresholds[i]&&a.rules[o].thresholds[i].max&&"border-danger"),name:"rules.".concat(o,".thresholds.").concat(i,".max"),id:"values.rules.".concat(o,".thresholds.").concat(i,".max")}),a.rules&&a.rules.length>o&&a.rules[o]&&a.rules[o].thresholds&&a.rules[o].thresholds.length>i&&a.rules[o].thresholds[i]&&a.rules[o].thresholds[i].max&&Object(K.i)(a.rules[o].thresholds[i].max)),!s&&n.a.createElement("td",{className:"align-middle d-flex justify-content-center align-items-center"},n.a.createElement(U.a,{size:"sm",color:"light",type:"button",onClick:function(){e.remove(i),1===t.rules[o].thresholds.length&&e.push({label:"",value:"",uom:"",warn1:"",warn2:"",crit1:"",crit2:"",min:"",max:""})}},n.a.createElement(ee.a,{icon:te.s})),n.a.createElement(U.a,{size:"sm",color:"light",type:"button",onClick:function(){return e.push({label:"",value:"",uom:"",warn1:"",warn2:"",crit1:"",crit2:"",min:"",max:""})}},n.a.createElement(ee.a,{icon:te.l}))))})):null)))}}))))),o+1===t.rules.length&&!s&&n.a.createElement(U.a,{color:"success",className:"mt-4",onClick:function(){return e.push({metric:"",thresholds:[{label:"",value:"",uom:"",warn1:"",warn2:"",crit1:"",crit2:"",min:"",max:""}],host:"",endpoint_group:""})}},"Add new rule"))})):!s&&n.a.createElement(U.a,{color:"success",onClick:function(){return e.push({metric:"",thresholds:[{label:"",value:"",uom:"",warn1:"",warn2:"",crit1:"",crit2:"",min:"",max:""}],host:"",endpoint_group:""})}},"Add a rule"))}})))))},ta=function(e){E()(r,e);var t,a=Zt(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).location=e.location,t.backend=new z.a,t.publicView=e.publicView,t.publicView?t.apiUrl="/api/v2/internal/public_thresholdsprofiles":t.apiUrl="/api/v2/internal/thresholdsprofiles",t.state={loading:!1,list_thresholdsprofiles:null,write_perm:!1,error:null},t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData(this.apiUrl);case 4:if(t=e.sent,this.publicView){e.next=12;break}return e.next=8,this.backend.isActiveSession();case 8:a=e.sent,this.setState({list_thresholdsprofiles:t,loading:!1,write_perm:a.userdetails.is_superuser||a.userdetails.groups.thresholdsprofiles.length>0}),e.next=13;break;case 12:this.setState({list_thresholdsprofiles:t,loading:!1});case 13:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 19:case 20:case"end":return e.stop()}}),e,this,[[1,16]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=[{Header:"Name",id:"name",maxWidth:350,accessor:function(t){return n.a.createElement(Z.b,{to:"/ui/".concat(e.publicView?"public_":"","thresholdsprofiles/")+t.name},t.name)}},{Header:"Description",accessor:"description"},{Header:"Group",accessor:"groupname",className:"text-center",maxWidth:150}],a=this.state,r=a.loading,i=a.list_thresholdsprofiles,s=a.write_perm,o=a.error;return r?n.a.createElement(K.m,null):o?n.a.createElement(K.h,{error:o}):!r&&i?n.a.createElement(K.b,{resourcename:"thresholds profile",location:this.location,listview:!0,addnew:!this.publicView,addperm:s,publicview:this.publicView},n.a.createElement($.a,{data:i,columns:t,className:"-highlight",defaultPageSize:12,rowsText:"profiles",getTheadThProps:function(){return{className:"table-active font-weight-bold p-2"}}})):null}}]),r}(r.Component),aa=function(e){E()(s,e);var t,a,r,i=Zt(s);function s(e){var t;return d()(this,s),(t=i.call(this,e)).name=e.match.params.name,t.addview=e.addview,t.history=e.history,t.location=e.location,t.tenant_name=e.tenantname,t.webapithresholds=e.webapithresholds,t.token=e.webapitoken,t.backend=new z.a,t.webapi=new z.b({token:t.token,thresholdsProfiles:t.webapithresholds}),t.publicView=e.publicView,t.state={thresholds_profile:{apiid:"",name:"",groupname:""},thresholds_rules:[],groups_list:[],metrics_list:[],write_perm:!1,areYouSureModal:!1,loading:!1,modalFunc:void 0,modalTitle:void 0,modalMsg:void 0,popoverWarningOpen:!1,popoverCriticalOpen:!1,error:null},t.toggleAreYouSure=t.toggleAreYouSure.bind(f()(t)),t.toggleAreYouSureSetModal=t.toggleAreYouSureSetModal.bind(f()(t)),t.onSelect=t.onSelect.bind(f()(t)),t.toggleWarningPopOver=t.toggleWarningPopOver.bind(f()(t)),t.toggleCriticalPopOver=t.toggleCriticalPopOver.bind(f()(t)),t.thresholdsToString=t.thresholdsToString.bind(f()(t)),t.onSubmitHandle=t.onSubmitHandle.bind(f()(t)),t.doChange=t.doChange.bind(f()(t)),t.doDelete=t.doDelete.bind(f()(t)),t}return _()(s,[{key:"toggleAreYouSureSetModal",value:function(e,t,a){this.setState((function(r){return{areYouSureModal:!r.areYouSureModal,modalFunc:a,modalMsg:e,modalTitle:t}}))}},{key:"toggleAreYouSure",value:function(){this.setState((function(e){return{areYouSureModal:!e.areYouSureModal}}))}},{key:"toggleWarningPopOver",value:function(){this.setState({popoverWarningOpen:!this.state.popoverWarningOpen})}},{key:"toggleCriticalPopOver",value:function(){this.setState({popoverCriticalOpen:!this.state.popoverCriticalOpen})}},{key:"onSelect",value:function(e,t){var a=this.state.thresholds_rules,r=e.split("[")[1].split("]")[0];a.length==r&&a.push({metric:"",thresholds:[],host:"",endpoint_group:""}),a[r].metric=t,this.setState({thresholds_rules:a})}},{key:"thresholdsToString",value:function(e){return e.forEach((function(e){var t=[];e.host||delete e.host,e.endpoint_group||delete e.endpoint_group,e.thresholds.forEach((function(e){var a=void 0;a=e.label+"="+e.value+e.uom+";"+e.warn1+":"+e.warn2+";"+e.crit1+":"+e.crit2,e.min&&e.max&&(a=a+";"+e.min+";"+e.max),t.push(a)}));var a=t.join(" ");e.thresholds=a})),e}},{key:"onSubmitHandle",value:function(e,t){var a=this,r=void 0,n=void 0;this.addview?(r="Are you sure you want to add thresholds profile?",n="Add thresholds profile"):(r="Are you sure you want to change thresholds profile?",n="Change thresholds profile"),this.toggleAreYouSureSetModal(r,n,(function(){return a.doChange(e,t)}))}},{key:"doChange",value:(r=u()(c.a.mark((function e(t,a){var r,n,i,s,o,l,u,m,d,p,_,h,f,g,E,v,b=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=JSON.parse(JSON.stringify(t)),!this.addview){e.next=50;break}return e.next=4,this.webapi.addThresholdsProfile({name:r.name,rules:this.thresholdsToString(r.rules)});case 4:if((n=e.sent).ok){e.next=23;break}return i="",e.prev=7,e.next=10,n.json();case 10:s=e.sent,o=[],s.errors.forEach((function(e){return o.push(e.details)})),i=o.join(" "),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),i="Web API error adding thresholds profile";case 19:Object(K.q)({title:"Web API error: ".concat(n.status," ").concat(n.statusText),msg:i}),e.next=47;break;case 23:return e.next=25,n.json();case 25:return l=e.sent,e.next=28,this.backend.addObject("/api/v2/internal/thresholdsprofiles/",{apiid:l.data.id,name:r.name,groupname:t.groupname,rules:r.rules});case 28:if(!(u=e.sent).ok){e.next=33;break}Object(K.r)({msg:"Thresholds profile successfully added",title:"Added",callback:function(){return b.history.push("/ui/thresholdsprofiles")}}),e.next=46;break;case 33:return m="",e.prev=34,e.next=37,u.json();case 37:d=e.sent,m=d.detail,e.next=44;break;case 41:e.prev=41,e.t1=e.catch(34),m="Internal API error adding thresholds profile";case 44:Object(K.q)({title:"Internal API error: ".concat(u.status," ").concat(u.statusText),msg:m});case 46:case 47:e.next=85;break;case 50:return e.next=52,this.webapi.changeThresholdsProfile({id:r.id,name:r.name,rules:this.thresholdsToString(r.rules)});case 52:if((p=e.sent).ok){e.next=60;break}_="";try{h=p.json(),f=[],h.errors.forEach((function(e){return f.push(e.details)})),_=f.join(" ")}catch(e){_="Web API error changing thresholds profile"}Object(K.q)({title:"Web API error: ".concat(p.status," ").concat(p.statusText),msg:_}),e.next=84;break;case 60:return e.next=62,p.json();case 62:return e.sent,e.next=65,this.backend.changeObject("/api/v2/internal/thresholdsprofiles/",{apiid:r.id,name:r.name,groupname:t.groupname,rules:r.rules});case 65:if(!(g=e.sent).ok){e.next=70;break}Object(K.r)({msg:"Thresholds profile successfully changed",title:"Changed",callback:function(){return b.history.push("/ui/thresholdsprofiles")}}),e.next=83;break;case 70:return E="",e.prev=71,e.next=74,g.json();case 74:v=e.sent,E=v.detail,e.next=81;break;case 78:e.prev=78,e.t2=e.catch(71),E="Internal API error changing thresholds profile";case 81:Object(K.q)({title:"Internal API error: ".concat(g.status," ").concat(g.statusText),msg:E});case 83:case 84:case 85:case"end":return e.stop()}}),e,this,[[7,16],[34,41],[71,78]])}))),function(e,t){return r.apply(this,arguments)})},{key:"doDelete",value:(a=u()(c.a.mark((function e(t){var a,r,n,i,s,o,l,u=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.webapi.deleteThresholdsProfile(t);case 2:if((a=e.sent).ok){e.next=21;break}return r="",e.prev=5,e.next=8,a.json();case 8:n=e.sent,i=[],n.errors.forEach((function(e){return i.push(e.details)})),r=i.join(" "),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),r="Web API error deleting thresholds profile";case 17:Object(K.q)({title:"Web API error: ".concat(a.status," ").concat(a.statusText),msg:r}),e.next=42;break;case 21:return e.next=23,this.backend.deleteObject("/api/v2/internal/thresholdsprofiles/".concat(t));case 23:if(!(s=e.sent)){e.next=28;break}Object(K.r)({msg:"Thresholds profile successfully deleted",title:"Deleted",callback:function(){return u.history.push("/ui/thresholdsprofiles")}}),e.next=41;break;case 28:return o="",e.prev=29,e.next=32,s.json();case 32:l=e.sent,o=l.detail,e.next=39;break;case 36:e.prev=36,e.t1=e.catch(29),o="Internal API error deleting thresholds profile";case 39:Object(K.q)({title:"Internal API error: ".concat(s.status," ").concat(s.statusText),msg:o});case 41:case 42:case 43:case"end":return e.stop()}}),e,this,[[5,14],[29,36]])}))),function(e){return a.apply(this,arguments)})},{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t,a,r,n,i,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({loading:!0}),e.prev=1,!this.publicView){e.next=15;break}return e.next=5,this.backend.fetchData("/api/v2/internal/public_thresholdsprofiles/".concat(this.name));case 5:return t=e.sent,e.next=8,this.webapi.fetchThresholdsProfile(t.apiid);case 8:return a=e.sent,e.next=11,this.backend.fetchListOfNames("/api/v2/internal/public_metricsall");case 11:r=e.sent,this.setState({thresholds_profile:{apiid:a.id,name:a.name,groupname:t.groupname},thresholds_rules:$t(a.rules),groups_list:[],metrics_list:r,write_perm:!1,loading:!1}),e.next=33;break;case 15:return e.next=17,this.backend.isActiveSession();case 17:return n=e.sent,e.next=20,this.backend.fetchListOfNames("/api/v2/internal/metricsall");case 20:return i=e.sent,e.next=23,this.backend.fetchData("/api/v2/internal/thresholdsprofiles/".concat(this.name));case 23:if(s=e.sent,!this.addview){e.next=28;break}this.setState({loading:!1,groups_list:n.userdetails.groups.thresholdsprofiles,metrics_list:i,write_perm:n.userdetails.is_superuser||n.userdetails.groups.thresholdsprofiles.length>0}),e.next=32;break;case 28:return e.next=30,this.webapi.fetchThresholdsProfile(s.apiid);case 30:o=e.sent,this.setState({thresholds_profile:{apiid:o.id,name:o.name,groupname:s.groupname},thresholds_rules:$t(o.rules),groups_list:n.userdetails.groups.thresholdsprofiles,metrics_list:i,write_perm:n.userdetails.is_superuser||n.userdetails.groups.thresholdsprofiles.indexOf(s.groupname)>=0,loading:!1});case 32:case 33:e.next=38;break;case 35:e.prev=35,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 38:case 39:case"end":return e.stop()}}),e,this,[[1,35]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,a=t.thresholds_profile,r=t.thresholds_rules,i=t.metrics_list,s=t.groups_list,o=t.loading,c=t.write_perm,l=t.error;return o?n.a.createElement(K.m,null):l?n.a.createElement(K.h,{error:l}):!o&&a?n.a.createElement(K.b,{resourcename:"thresholds profile",location:this.location,modal:!0,state:this.state,toggle:this.toggleAreYouSure,submitperm:c,addview:this.publicView?!this.publicView:this.addview,publicview:this.publicView},n.a.createElement(R.d,{initialValues:{id:a.apiid,name:a.name,groupname:a.groupname,rules:r},validationSchema:Xt,onSubmit:function(t,a){return e.onSubmitHandle(t,a)},render:function(t){return n.a.createElement(R.c,null,n.a.createElement(ea,k()({},t,{groups_list:s,metrics_list:i,write_perm:c,onSelect:e.onSelect,state:e.state,toggleWarningPopOver:e.toggleWarningPopOver,toggleCriticalPopOver:e.toggleCriticalPopOver})),c&&n.a.createElement("div",{className:"submit-row d-flex align-items-center justify-content-between bg-light p-3 mt-5"},e.addview?n.a.createElement("div",null):n.a.createElement(U.a,{color:"danger",onClick:function(){e.toggleAreYouSureSetModal("Are you sure you want to delete thresholds profile?","Delete thresholds profile",(function(){return e.doDelete(t.values.id)}))}},"Delete"),n.a.createElement(U.a,{color:"success",id:"submit-button",type:"submit"},"Save")))}})):null}}]),s}(r.Component),ra=function(e){for(var t=e.title,a=e.item1,r=e.item2,i=[],s=[],o=0;o<a.length;o++){var c="metric: ".concat(a[o].metric,",\n");"host"in a[o]&&(c+="host: ".concat(a[o].host,",\n")),"endpoint_group"in a[o]&&(c+="endpoint_group: ".concat(a[o].endpoint_group,",\n")),c+="thresholds: ".concat(a[o].thresholds),i.push(c)}for(var l=0;l<r.length;l++){var u="metric: ".concat(r[l].metric,",\n");"host"in r[l]&&(u+="host: ".concat(r[l].host,",\n")),"endpoint_group"in r[l]&&(u+="endpoint_group: ".concat(r[l].endpoint_group,",\n")),u+="thresholds: ".concat(r[l].thresholds),s.push(u)}return n.a.createElement("div",{id:"argo-contentwrap",className:"ml-2 mb-2 mt-2 p-3 border rounded"},n.a.createElement("h6",{className:"mt-4 font-weight-bold text-uppercase"},t),n.a.createElement(re.a,{oldValue:s.join("\n"),newValue:i.join("\n"),showDiffOnly:!0,splitView:!0,hideLineNumbers:!0}))};var na=function(e){E()(r,e);var t,a=Zt(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).version1=e.match.params.id1,t.version2=e.match.params.id2,t.name=e.match.params.name,t.state={loading:!1,name1:"",groupname1:"",rules1:[],name2:"",groupname2:"",rules2:[],error:null},t.backend=new z.a,t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t,a,r,n,i,s,o,l=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.backend.fetchData("/api/v2/internal/tenantversion/thresholdsprofile/".concat(this.name));case 3:t=e.sent,a="",r="",n=[],i="",s="",o=[],t.forEach((function(e){e.version==l.version1?(a=e.fields.name,r=e.fields.groupname,n=e.fields.rules):e.version==l.version2&&(i=e.fields.name,s=e.fields.groupname,o=e.fields.rules)})),this.setState({name1:a,groupname1:r,rules1:n,name2:i,groupname2:s,rules2:o,loading:!1}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),this.setState({error:e.t0,loading:!1});case 17:case 18:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.name1,a=e.name2,r=e.groupname1,i=e.groupname2,s=e.rules1,o=e.rules2,c=e.loading,l=e.error;return c?n.a.createElement(K.m,null):l?n.a.createElement(K.h,{error:l}):!c&&t&&a?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},n.a.createElement("h2",{className:"ml-3 mt-1 mb-4"},"Compare ".concat(this.name," versions"))),t!==a&&n.a.createElement(K.e,{title:"name",item1:t,item2:a}),r!==i&&n.a.createElement(K.e,{title:"group name",item1:r,item2:i}),!function(e,t){if(e.length!==t.length)return!1;for(var a=e.length;a--;)if(e[a].metric!==t[a].metric||e[a].thresholds!==t[a].thresholds||e[a].host!==t[a].host||e[a].endpoint_group!==t[a].endpoint_group)return!1;return!0}(s,o)&&n.a.createElement(ra,{title:"rules",item1:s,item2:o})):null}}]),r}(r.Component),ia=function(e){E()(r,e);var t,a=Zt(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).name=e.match.params.name,t.version=e.match.params.version,t.backend=new z.a,t.state={name:"",groupname:"",rules:[],date_created:"",loading:!1,error:null},t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData("/api/v2/internal/tenantversion/thresholdsprofile/".concat(this.name));case 4:e.sent.forEach((function(e){e.version==t.version&&t.setState({name:e.fields.name,groupname:e.fields.groupname,rules:$t(e.fields.rules),date_created:e.date_created,loading:!1})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 11:case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.name,a=e.groupname,r=e.rules,i=e.date_created,s=e.loading,o=e.error;return s?n.a.createElement(K.m,null):o?n.a.createElement(K.h,{error:o}):!s&&t?n.a.createElement(K.b,{resourcename:"".concat(t," (").concat(i,")"),infoview:!0},n.a.createElement(R.d,{initialValues:{name:t,groupname:a,rules:r},render:function(e){return n.a.createElement(R.c,null,n.a.createElement(ea,k()({},e,{historyview:!0})))}})):null}}]),r}(r.Component),sa=a("9ONQ");a("/WES");function oa(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,r=y()(e);if(t()){var n=y()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return b()(this,a)}}var ca=ne.object().shape({name:ne.string().matches(/^\S*$/,"Name cannot contain white spaces").required("Required"),present_version:ne.boolean(),version:ne.string().matches(/^\S*$/,"Version cannot contain white spaces").when("present_version",{is:!1,then:ne.string().required("Required")}),repo_6:ne.string(),repo_7:ne.string()}).test("undefined","You must provide at least one repo!",(function(e){return!(!e.repo_6&&!e.repo_7)})),la=function(e){E()(r,e);var t,a=oa(r);function r(e){var t;return d()(this,r),(t=a.call(this,e)).location=e.location,t.backend=new z.a,t.state={loading:!1,list_packages:null,list_repos:null,search_name:"",search_repo:"",error:null},t}return _()(r,[{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData("/api/v2/internal/packages");case 4:return t=e.sent,e.next=7,this.backend.fetchData("/api/v2/internal/yumrepos");case 7:a=e.sent,r=[],a.forEach((function(e){return r.push(e.name+" ("+e.tag+")")})),this.setState({list_packages:t,list_repos:r,loading:!1}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 16:case 17:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,a=t.list_packages,r=t.loading,i=t.error,s=[{Header:"#",id:"row",minWidth:12,Cell:function(e){return n.a.createElement("div",{style:{textAlign:"center"}},e.index+1)}},{Header:"Name and version",id:"name",minWidth:80,accessor:function(e){return n.a.createElement(Z.b,{to:"/ui/packages/"+e.name+"-"+e.version},e.name+" ("+e.version+")")},filterable:!0,Filter:n.a.createElement("input",{value:this.state.search_name,onChange:function(t){return e.setState({search_name:t.target.value})},placeholder:"Search by name and version",style:{width:"100%"}})},{Header:"Repo",id:"repo",accessor:"repos",Cell:function(e){return n.a.createElement("div",{style:{textAlign:"center"}},e.value.join(", "))},filterable:!0,Filter:n.a.createElement(K.g,{value:this.state.repo,onChange:function(t){return e.setState({search_repo:t.target.value})},data:this.state.list_repos})}];return this.state.search_name&&(a=a.filter((function(t){return"".concat(t.name," + ' (' + ").concat(t.version," + ')").toLowerCase().includes(e.state.search_name.toLowerCase())}))),this.state.search_repo&&(a=a.filter((function(t){return"".concat(t.repos.join(", ")).toLowerCase().includes(e.state.search_repo.toLowerCase())}))),r?n.a.createElement(K.m,null):i?n.a.createElement(K.h,{error:i}):!r&&a?n.a.createElement(K.b,{resourcename:"package",location:this.location,listview:!0},n.a.createElement($.a,{data:a,columns:s,className:"-highlight",defaultPageSize:50,rowsText:"packages",getTheadThProps:function(){return{className:"table-active font-weight-bold p-2"}}})):null}}]),r}(r.Component),ua=function(e){E()(s,e);var t,a,r,i=oa(s);function s(e){var t;return d()(this,s),(t=i.call(this,e)).nameversion=e.match.params.nameversion,t.addview=e.addview,t.location=e.location,t.history=e.history,t.backend=new z.a,t.state={pkg:{id:"",name:"",version:""},repo_6:"",repo_7:"",list_repos_6:[],list_repos_7:[],list_probes:[],present_version:!1,loading:!1,areYouSureModal:!1,modalFunc:void 0,modalTitle:void 0,modalMsg:void 0,error:null},t.toggleAreYouSure=t.toggleAreYouSure.bind(f()(t)),t.toggleAreYouSureSetModal=t.toggleAreYouSureSetModal.bind(f()(t)),t.onSelect=t.onSelect.bind(f()(t)),t.onSubmitHandle=t.onSubmitHandle.bind(f()(t)),t.doChange=t.doChange.bind(f()(t)),t.doDelete=t.doDelete.bind(f()(t)),t.toggleCheckbox=t.toggleCheckbox.bind(f()(t)),t}return _()(s,[{key:"toggleAreYouSure",value:function(){this.setState((function(e){return{areYouSureModal:!e.areYouSureModal}}))}},{key:"toggleAreYouSureSetModal",value:function(e,t,a){this.setState((function(r){return{areYouSureModal:!r.areYouSureModal,modalFunc:a,modalMsg:e,modalTitle:t}}))}},{key:"onSelect",value:function(e,t){var a=this.state.pkg;a[e]=t,this.setState({pkg:a})}},{key:"onSubmitHandle",value:function(e,t){var a=this,r=void 0,n=void 0;this.addview?(r="Are you sure you want to add package?",n="Add package"):(r="Are you sure you want to change package?",n="Change package"),this.toggleAreYouSureSetModal(r,n,(function(){return a.doChange(e,t)}))}},{key:"doChange",value:(r=u()(c.a.mark((function e(t,a){var r,n,i,s,o,l,u,m=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],t.repo_6&&r.push(t.repo_6),t.repo_7&&r.push(t.repo_7),!this.addview){e.next=26;break}return e.next=6,this.backend.addObject("/api/v2/internal/packages/",{name:t.name,version:t.version,use_present_version:t.present_version,repos:r});case 6:if((n=e.sent).ok){e.next=22;break}return i="",e.prev=9,e.next=12,n.json();case 12:s=e.sent,i=s.detail,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),i="Error adding package";case 19:Object(K.q)({title:"Error: ".concat(n.status," ").concat(n.statusText),msg:i}),e.next=23;break;case 22:Object(K.r)({msg:"Package successfully added",title:"Added",callback:function(){return m.history.push("/ui/packages")}});case 23:e.next=46;break;case 26:return e.next=28,this.backend.changeObject("/api/v2/internal/packages/",{id:t.id,name:t.name,version:t.version,use_present_version:t.present_version,repos:r});case 28:if((o=e.sent).ok){e.next=44;break}return l="",e.prev=31,e.next=34,o.json();case 34:u=e.sent,l=u.detail,e.next=41;break;case 38:e.prev=38,e.t1=e.catch(31),l="Error changing package";case 41:Object(K.q)({title:"Error: ".concat(o.status," ").concat(o.statusText),msg:l}),e.next=45;break;case 44:Object(K.r)({msg:"Package successfully changed",title:"Changed",callback:function(){return m.history.push("/ui/packages")}});case 45:case 46:case 47:case"end":return e.stop()}}),e,this,[[9,16],[31,38]])}))),function(e,t){return r.apply(this,arguments)})},{key:"doDelete",value:(a=u()(c.a.mark((function e(t){var a,r,n,i=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backend.deleteObject("/api/v2/internal/packages/".concat(t));case 2:if((a=e.sent).ok){e.next=19;break}return r="",e.prev=5,e.next=8,a.json();case 8:n=e.sent,r=n.detail,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),r="Error deleting package";case 15:Object(K.q)({title:"Error: ".concat(a.status," ").concat(a.statusText),msg:r}),e.next=20;break;case 19:Object(K.r)({msg:"Package successfully deleted",title:"Deleted",callback:function(){return i.history.push("/ui/packages")}});case 20:case 21:case"end":return e.stop()}}),e,this,[[5,12]])}))),function(e){return a.apply(this,arguments)})},{key:"toggleCheckbox",value:function(){this.setState({present_version:!present_version})}},{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t,a,r,n,i,s,o,l,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.backend.fetchData("/api/v2/internal/yumrepos");case 4:if(t=e.sent,a=[],r=[],t.forEach((function(e){"CentOS 6"===e.tag?a.push(e.name+" ("+e.tag+")"):"CentOS 7"===e.tag&&r.push(e.name+" ("+e.tag+")")})),!this.addview){e.next=12;break}this.setState({list_repos_6:a,list_repos_7:r,loading:!1}),e.next=24;break;case 12:return e.next=14,this.backend.fetchData("/api/v2/internal/packages/".concat(this.nameversion));case 14:return n=e.sent,e.next=17,this.backend.fetchData("/api/v2/internal/probes");case 17:for(i=e.sent,s=[],o="",l="",u=0;u<n.repos.length;u++)"CentOS 6"===n.repos[u].split("(")[1].slice(0,-1)&&(o=n.repos[u]),"CentOS 7"===n.repos[u].split("(")[1].slice(0,-1)&&(l=n.repos[u]);i.forEach((function(e){e.package==="".concat(n.name," (").concat(n.version,")")&&s.push(e.name)})),this.setState({pkg:n,list_repos_6:a,list_repos_7:r,repo_6:o,repo_7:l,list_probes:s,loading:!1});case 24:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(1),this.setState({error:e.t0,loading:!1});case 30:case 31:case"end":return e.stop()}}),e,this,[[1,27]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,a=t.pkg,r=t.repo_6,i=t.repo_7,s=t.list_repos_6,o=t.list_repos_7,c=t.list_probes,l=t.loading,u=t.present_version,m=t.error;return l?n.a.createElement(K.m,null):m?n.a.createElement(K.h,{error:m}):!l&&s?n.a.createElement(K.b,{resourcename:"package",location:this.location,addview:this.addview,modal:!0,state:this.state,toggle:this.toggleAreYouSure,history:!1},n.a.createElement(R.d,{initialValues:{id:a.id,name:a.name,version:a.version,repo_6:r,repo_7:i,present_version:u},onSubmit:function(t,a){return e.onSubmitHandle(t,a)},validationSchema:ca,enableReinitialize:!0,render:function(t){return n.a.createElement(R.c,null,n.a.createElement(T.a,null,n.a.createElement(A.a,{className:"align-items-center"},n.a.createElement(P.a,{md:6},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Name"),n.a.createElement(R.a,{type:"text",name:"name",className:"form-control ".concat(t.errors.name&&"border-danger"),id:"name"})),t.errors.name&&Object(K.i)(t.errors.name),n.a.createElement(be.a,{color:"muted"},"Package name.")),n.a.createElement(P.a,{md:2},n.a.createElement(A.a,null,n.a.createElement(P.a,{md:12},n.a.createElement(Ee.a,null,n.a.createElement(ve.a,{addonType:"prepend"},"Version"),n.a.createElement(R.a,{type:"text",name:"version",value:t.values.present_version?"present":t.values.version,disabled:t.values.present_version,className:"form-control ".concat(t.errors.version&&"border-danger"),id:"version"})),t.errors.version&&Object(K.i)(t.errors.version),n.a.createElement(be.a,{color:"muted"},"Package version.")))),n.a.createElement(P.a,{md:3},n.a.createElement(R.a,{component:K.c,name:"present_version",className:"form-control",id:"checkbox",label:"Use version which is present in repo",onChange:e.toggleCheckbox})))),n.a.createElement(T.a,null,n.a.createElement("h4",{className:"mt-2 p-1 pl-3 text-light text-uppercase rounded",style:{backgroundColor:"#416090"}},"Yum repo"),n.a.createElement(A.a,null,n.a.createElement(P.a,{md:8},n.a.createElement(K.a,k()({},t,{lists:s,icon:"yumrepos",field:"repo_6",val:t.values.repo_6,onselect_handler:e.onSelect,req:t.errors.undefined,label:"CentOS 6 repo"})),t.errors.undefined&&Object(K.i)(t.errors.undefined),n.a.createElement(be.a,{color:"muted"},"Package is part of selected CentOS 6 repo."))),n.a.createElement(A.a,{className:"mt-4"},n.a.createElement(P.a,{md:8},n.a.createElement(K.a,k()({},t,{lists:o,icon:"yumrepos",field:"repo_7",val:t.values.repo_7,onselect_handler:e.onSelect,req:t.errors.undefined,label:"CentOS 7 repo"})),t.errors.undefined&&Object(K.i)(t.errors.undefined),n.a.createElement(be.a,{color:"muted"},"Package is part of selected CentOS 7 repo."))),!e.addview&&n.a.createElement(A.a,{className:"mt-3"},n.a.createElement(P.a,{md:8},"Probes:",c.length>0&&n.a.createElement("div",null,c.map((function(e,t){return n.a.createElement(Z.b,{key:t,to:"/ui/probes/"+e},e)})).reduce((function(e,t){return[e,", ",t]})))))),n.a.createElement("div",{className:"submit-row d-flex align-items-center justify-content-between bg-light p-3 mt-5"},e.addview?n.a.createElement("div",null):n.a.createElement(U.a,{color:"danger",onClick:function(){e.toggleAreYouSureSetModal("Are you sure you want to delete package?","Delete package",(function(){return e.doDelete(e.nameversion)}))}},"Delete"),n.a.createElement(U.a,{color:"success",id:"submit-button",type:"submit"},"Save")))}})):null}}]),s}(r.Component);var ma=Object(Wt.g)(K.o),da=Object(Wt.g)(K.p),pa=Object(Wt.g)(K.d),_a=function(e){var t=e.isSuperUser,a=O()(e,["isSuperUser"]);return t?n.a.createElement(Wt.b,a):n.a.createElement(Wt.b,{component:Rt})},ha=function(e){var t=e.usergroups,a=O()(e,["usergroups"]);return t.length>0?n.a.createElement(Wt.b,a):n.a.createElement(Wt.b,{component:Rt})},fa=function(e){var t=e.isSuperUser,a=(O()(e,["isSuperUser"]),""),r="",i="",s=localStorage.getItem("referrer");if(i=t?"/ui/administration":"/ui/metricprofiles",s){var o=JSON.parse(s);1===o.length?r=a=o.pop():(a=o.pop(),r=o.pop())}return a!==r&&(i=r),localStorage.removeItem("referrer"),n.a.createElement(Wt.a,{to:i})},ga=function(e){var t=e.webApiAggregation,a=e.webApiMetric,r=e.webApiThresholds,i=e.token,s=e.tenantName,o=e.isSuperUser,c=e.userGroups;return n.a.createElement(Wt.d,null,n.a.createElement(Wt.b,{exact:!0,path:"/ui/login",render:function(e){return n.a.createElement(fa,k()({isSuperUser:o},e))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/home",component:ge}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/services",component:ut}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/reports",component:lt}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/probes",component:Ae}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/probes/:name/history",render:function(e){return n.a.createElement(ye,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/probes/:name/history/compare/:id1/:id2",render:function(e){return n.a.createElement(Ce,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/probes/:name/history/:version",render:function(e){return n.a.createElement(Ie,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/probes/:name/:metrictemplatename",render:function(e){return n.a.createElement(Ue,k()({},e,{tenantview:!0,probeview:!0}))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/probes/:name",render:function(e){return n.a.createElement(De,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metrics",component:Se.f}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metrics/:name/history",render:function(e){return n.a.createElement(Se.e,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metrics/:name/history/compare/:id1/:id2",render:function(e){return n.a.createElement(Se.h,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metrics/:name/history/:version",render:function(e){return n.a.createElement(Se.g,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metrics/:name",render:function(e){return n.a.createElement(Se.c,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metricprofiles",component:pe}),n.a.createElement(ha,{usergroups:c.metricprofiles,exact:!0,path:"/ui/metricprofiles/add",render:function(e){return n.a.createElement(ce,k()({},e,{webapimetric:a,webapitoken:i,tenantname:s,addview:!0}))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metricprofiles/:name",render:function(e){return n.a.createElement(ce,k()({},e,{webapimetric:a,webapitoken:i,tenantname:s}))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metricprofiles/:name/clone",render:function(e){return n.a.createElement(oe,k()({},e,{webapimetric:a,webapitoken:i,tenantname:s}))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metricprofiles/:name/history",render:function(e){return n.a.createElement(se,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metricprofiles/:name/history/compare/:id1/:id2",render:function(e){return n.a.createElement(he,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metricprofiles/:name/history/:version",render:function(e){return n.a.createElement(fe,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/aggregationprofiles",component:it}),n.a.createElement(ha,{usergroups:c.aggregations,exact:!0,path:"/ui/aggregationprofiles/add",render:function(e){return n.a.createElement(nt,k()({},e,{webapiaggregation:t,webapimetric:a,webapitoken:i,tenantname:s,addview:!0}))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/aggregationprofiles/:name",render:function(e){return n.a.createElement(nt,k()({},e,{webapiaggregation:t,webapimetric:a,webapitoken:i,tenantname:s}))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/aggregationprofiles/:name/history",render:function(e){return n.a.createElement(Ge,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/aggregationprofiles/:name/history/compare/:id1/:id2",render:function(e){return n.a.createElement(ot,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/aggregationprofiles/:name/history/:version",render:function(e){return n.a.createElement(ct,e)}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration",component:Ve}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/users",component:gt}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/users/add",render:function(e){return n.a.createElement(_t,k()({},e,{addview:!0}))}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/users/:user_name",render:function(e){return n.a.createElement(_t,e)}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/groupofmetrics",component:yt}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/groupofmetrics/add",render:function(e){return n.a.createElement(Dt,k()({},e,{addview:!0}))}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/groupofmetrics/:group",render:function(e){return n.a.createElement(Dt,e)}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/groupofaggregations",component:kt}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/groupofaggregations/add",render:function(e){return n.a.createElement(wt,k()({},e,{addview:!0}))}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/groupofaggregations/:group",render:function(e){return n.a.createElement(wt,e)}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/groupofmetricprofiles",component:Ot}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/groupofmetricprofiles/add",render:function(e){return n.a.createElement(xt,k()({},e,{addview:!0}))}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/groupofmetricprofiles/:group",render:function(e){return n.a.createElement(xt,e)}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/apikey",component:Ut}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/apikey/add",render:function(e){return n.a.createElement(jt,k()({},e,{addview:!0}))}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/metrictemplates/",component:Le}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/metrictemplates/:name",render:function(e){return n.a.createElement(Ue,k()({},e,{tenantview:!0}))}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/metrictemplates/:name/history",render:function(e){return n.a.createElement(We,e)}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/metrictemplates/:name/history/compare/:id1/:id2",render:function(e){return n.a.createElement(Be,e)}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/metrictemplates/:name/history/:version",render:function(e){return n.a.createElement(Ye,e)}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/apikey/:name",render:function(e){return n.a.createElement(jt,e)}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/yumrepos/",component:Qt}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/yumrepos/:name",render:function(e){return n.a.createElement(zt,k()({},e,{disabled:!0}))}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/groupofthresholdsprofiles",component:At}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/groupofthresholdsprofiles/add",render:function(e){return n.a.createElement(Pt,k()({},e,{addview:!0}))}}),n.a.createElement(_a,{isSuperUser:o,exact:!0,path:"/ui/administration/groupofthresholdsprofiles/:group",render:function(e){return n.a.createElement(Pt,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/thresholdsprofiles",component:ta}),n.a.createElement(ha,{usergroups:c.thresholdsprofiles,exact:!0,path:"/ui/thresholdsprofiles/add",render:function(e){return n.a.createElement(aa,k()({},e,{webapithresholds:r,webapitoken:i,tenantname:s,addview:!0}))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/thresholdsprofiles/:name",render:function(e){return n.a.createElement(aa,k()({},e,{webapithresholds:r,webapitoken:i,tenantname:s}))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/thresholdsprofiles/:name/history",render:function(e){return n.a.createElement(Jt,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/thresholdsprofiles/:name/history/compare/:id1/:id2",render:function(e){return n.a.createElement(na,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/thresholdsprofiles/:name/history/:version",render:function(e){return n.a.createElement(ia,e)}}),n.a.createElement(Wt.b,{component:Rt}))},Ea=function(e){e.props;return n.a.createElement(Wt.d,null,n.a.createElement(Wt.b,{exact:!0,path:"/ui/login",render:function(){return n.a.createElement(Wt.a,{to:"/ui/administration"})}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/home",component:ge}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/probes",component:Ae}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/probes/add",render:function(e){return n.a.createElement(De,k()({},e,{addview:!0}))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/probes/:name/clone",render:function(e){return n.a.createElement(ke,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/probes/:name/history",render:function(e){return n.a.createElement(ye,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/probes/:name/history/compare/:id1/:id2",render:function(e){return n.a.createElement(Ce,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/probes/:name/history/:version",render:function(e){return n.a.createElement(Ie,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/probes/:name",render:function(e){return n.a.createElement(De,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metrictemplates",component:Ne}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metrictemplates/add",render:function(e){return n.a.createElement(Ue,k()({},e,{addview:!0}))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metrictemplates/:name/clone",render:function(e){return n.a.createElement(je,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metrictemplates/:name/history",render:function(e){return n.a.createElement(Re,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metrictemplates/:name/history/compare/:id1/:id2",render:function(e){return n.a.createElement(Be,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metrictemplates/:name/history/:version",render:function(e){return n.a.createElement(Ye,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/metrictemplates/:name",render:function(e){return n.a.createElement(Ue,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/yumrepos/",render:function(e){return n.a.createElement(Qt,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/yumrepos/add",render:function(e){return n.a.createElement(zt,k()({addview:!0},e))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/yumrepos/:name/clone",render:function(e){return n.a.createElement(Yt,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/yumrepos/:name",render:function(e){return n.a.createElement(zt,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/packages/",render:function(e){return n.a.createElement(la,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/packages/add",render:function(e){return n.a.createElement(ua,k()({addview:!0},e))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/packages/:nameversion",render:function(e){return n.a.createElement(ua,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/administration",component:Qe}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/administration/users",component:gt}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/administration/users/add",render:function(e){return n.a.createElement(ht,k()({},e,{addview:!0}))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/administration/users/:user_name/change_password",render:function(e){return n.a.createElement(vt,e)}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/administration/users/:user_name",render:function(e){return n.a.createElement(ht,e)}}),n.a.createElement(Wt.b,{component:Rt}))},va=function(e){E()(o,e);var t,a,r,i,s=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,r=y()(e);if(t()){var n=y()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return b()(this,a)}}(o);function o(e){var t;return d()(this,o),(t=s.call(this,e)).cookies=new sa.a,t.backend=new z.a,t.state={isSessionActive:void 0,areYouSureModal:!1,userDetails:void 0,webApiAggregation:void 0,webApiMetric:void 0,webApiThresholds:void 0,publicView:void 0,tenantName:void 0,token:void 0,isTenantSchema:null},t.onLogin=t.onLogin.bind(f()(t)),t.onLogout=t.onLogout.bind(f()(t)),t.toggleAreYouSure=t.toggleAreYouSure.bind(f()(t)),t}return _()(o,[{key:"onLogin",value:(i=u()(c.a.mark((function e(t){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Object({active:!0,userdetails:t}),e.next=3,this.backend.isTenantSchema();case 3:return r=e.sent,e.next=6,this.initalizeState(r,a);case 6:e.sent;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"onLogout",value:function(){this.setState({isSessionActive:!1}),localStorage.removeItem("referrer")}},{key:"toggleAreYouSure",value:function(){this.setState((function(e){return{areYouSureModal:!e.areYouSureModal}}))}},{key:"initalizeState",value:(r=u()(c.a.mark((function e(t,a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,this.backend.fetchConfigOptions();case 3:r=e.sent,this.setState({isTenantSchema:t,isSessionActive:a.active,userDetails:a.userdetails,token:a.userdetails.token,webApiMetric:r&&r.result.webapimetric,webApiAggregation:r&&r.result.webapiaggregation,webApiThresholds:r&&r.result.webapithresholds,tenantName:r&&r.result.tenant_name,publicView:!1}),e.next=8;break;case 7:this.setState({isTenantSchema:t,isSessionActive:a.active,userDetails:a.userdetails,publicView:!1});case 8:case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"initalizePublicState",value:(a=u()(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backend.fetchPublicToken();case 2:return t=e.sent,e.next=5,this.backend.fetchConfigOptions();case 5:a=e.sent,this.setState({isTenantSchema:!0,isSessionActive:!1,userDetails:{username:"Anonymous"},token:t,webApiMetric:a&&a.result.webapimetric,webApiAggregation:a&&a.result.webapiaggregation,webApiThresholds:a&&a.result.webapithresholds,tenantName:a&&a.result.tenant_name,publicView:!0});case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"isPublicUrl",value:function(){return window.location.pathname.includes("public_")}},{key:"getAndSetReferrer",value:function(){var e=localStorage.getItem("referrer"),t=void 0;(t=e?JSON.parse(e):new Array).push(window.location.pathname),localStorage.setItem("referrer",JSON.stringify(t))}},{key:"componentDidMount",value:(t=u()(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPublicUrl()){e.next=4;break}this.initalizePublicState(),e.next=11;break;case 4:return e.next=6,this.backend.isTenantSchema();case 6:return t=e.sent,e.next=9,this.backend.isActiveSession(t);case 9:(a=e.sent).active&&this.initalizeState(t,a);case 11:this.getAndSetReferrer();case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,a=t.isSessionActive,r=t.userDetails,i=t.publicView;return i?n.a.createElement(Z.a,null,n.a.createElement(Wt.d,null,n.a.createElement(Wt.b,{exact:!0,path:"/ui/public_probes",render:function(e){return n.a.createElement(K.u,null,n.a.createElement(Ae,k()({publicView:!0},e)))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/public_probes/:name",render:function(e){return n.a.createElement(K.u,null,n.a.createElement(De,k()({publicView:!0},e)))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/public_probes/:name/history",render:function(e){return n.a.createElement(K.u,null,n.a.createElement(ye,k()({publicView:!0},e)))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/public_probes/:name/history/compare/:id1/:id2",render:function(e){return n.a.createElement(K.u,null,n.a.createElement(Ce,k()({publicView:!0},e)))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/public_probes/:name/history/:version",render:function(e){return n.a.createElement(K.u,null,n.a.createElement(Ie,k()({publicView:!0},e)))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/public_metrics",render:function(e){return n.a.createElement(K.u,null,n.a.createElement(Se.f,k()({publicView:!0},e)))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/public_metrics/:name",render:function(e){return n.a.createElement(K.u,null,n.a.createElement(Se.c,k()({publicView:!0},e)))}})),n.a.createElement(Wt.b,{exact:!0,path:"/ui/public_services",render:function(e){return n.a.createElement(K.u,null,n.a.createElement(ut,k()({publicView:!0},e)))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/public_metricprofiles",render:function(e){return n.a.createElement(K.u,null,n.a.createElement(pe,k()({publicView:!0},e)))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/public_metricprofiles/:name",render:function(t){return n.a.createElement(K.u,null,n.a.createElement(ce,k()({},t,{webapimetric:e.state.webApiMetric,webapitoken:e.state.token,tenantname:e.state.tenantName,publicView:!0})))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/public_aggregationprofiles",render:function(e){return n.a.createElement(K.u,null,n.a.createElement(it,k()({publicView:!0},e)))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/public_aggregationprofiles/:name",render:function(t){return n.a.createElement(K.u,null,n.a.createElement(nt,k()({},t,{webapimetric:e.state.webApiMetric,webapiaggregation:e.state.webApiAggregation,webapitoken:e.state.token,tenantname:e.state.tenantName,publicView:!0})))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/public_thresholdsprofiles",render:function(e){return n.a.createElement(K.u,null,n.a.createElement(ta,k()({publicView:!0},e)))}}),n.a.createElement(Wt.b,{exact:!0,path:"/ui/public_thresholdsprofiles/:name",render:function(t){return n.a.createElement(K.u,null,n.a.createElement(aa,k()({},t,{webapithresholds:e.state.webApiThresholds,webapiaggregation:e.state.webApiAggregation,webapitoken:e.state.token,tenantname:e.state.tenantName,publicView:!0})))}})):i||a?a&&r&&null!==this.state.isTenantSchema?n.a.createElement(Z.a,null,n.a.createElement(x.a,{fluid:!0},n.a.createElement(A.a,null,n.a.createElement(Bt.NotificationContainer,null),n.a.createElement(P.a,null,n.a.createElement(ma,{onLogout:this.onLogout,isOpenModal:this.state.areYouSureModal,toggle:this.toggleAreYouSure,titleModal:"Log out",msgModal:"Are you sure you want to log out?",userDetails:r,isTenantSchema:this.state.isTenantSchema,publicView:i}))),n.a.createElement(A.a,{className:"no-gutters"},n.a.createElement(P.a,{sm:{size:2},md:{size:2},id:"sidebar-col",className:"d-flex flex-column"},n.a.createElement(da,{isTenantSchema:this.state.isTenantSchema,userDetails:r}),n.a.createElement("div",{id:"sidebar-grow",className:"flex-grow-1 border-left border-right rounded-bottom"})),n.a.createElement(P.a,null,n.a.createElement(pa,null),this.state.isTenantSchema?n.a.createElement(ga,{webApiMetric:this.state.webApiMetric,webApiAggregation:this.state.webApiAggregation,webApiThresholds:this.state.webApiThresholds,token:this.state.token,tenantName:this.state.tenantName,isSuperUser:r.is_superuser,userGroups:r.groups}):n.a.createElement(Ea,null))),n.a.createElement(A.a,null,n.a.createElement(P.a,null,n.a.createElement(K.j,{loginPage:!1}))))):null===this.state.isTenantSchema&&a?n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Something went wrong"),n.a.createElement("p",null,"Cannot obtain schema.")):null:n.a.createElement(Z.a,null,n.a.createElement(Wt.d,null,n.a.createElement(Wt.b,{path:"/ui/",render:function(t){return n.a.createElement(Y,k()({onLogin:e.onLogin},t))}}),n.a.createElement(Wt.b,{component:Rt})))}}]),o}(r.Component),ba=a("dLgX");a("q4sD");s.a.render(n.a.createElement(va,null),document.getElementById("react")),ba.a()},hQ4L:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAdCAYAAAC9pNwMAAAABmJLR0QAngCeAJ53Twm3AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4wQcDRUGZUVdGQAABRJJREFUSMell2tsFFUUx393drcv+oIWKpZFSrFuSmo24oMQSCSGogVtDOERWEHUGA2SILZUDCImBMFVCBLAmGIhKdEgJgSs0AEaNBKw8phS0LYqpQylAmH7Jt3HzPjBWVjKbLuN/y+7M/ee87/nzHldgQWc7kJURQ7/twEpQB7wEjAZyAEygB7gKnAOOAKcArpVRQ7019MfYhDSScALwDtAFoNDA74CDqiKLA9ELgYgXQ28Z1o2VGhABbBWVeQ2K3IRSQoIVZENp7vwAjARkPh/aAWmqYrcbGlxP0v9QFyMigOAH9DNZwmIt5DPUBXZF8kjwg9Od6EEnAceH4xN17WaUMB/ZVhaxtEla8prJ7gzxbA0gif21xnfeJdPEUK8bHfEO4UQU0yRPiBPVWQ1zBfp6jXAx4O497SuhfbMW7mlJTk9c27Q78/SQsEnwUgFeoQQf9sdcbX2uIT2czXf7zx58OvnktMztwNpwK+qIk/u7+pngGpzQzT8iOb3TL9wouPaCVJTe0hNCmHL7LuVHq/5NgIz+31F1Wa3bdi4YEKFGTN5QKmqyJ853YUIp7vQDnwIrB2AtE5VZDdA1aaCOebeEUAHGOuLNl/cV/b5H1MNxAHzfSS2ej2uFSZ5F1CsKvJt4XQXDgeaB7D2T1WR8w5/WjBLN9gVJZ97E0Nts445j/iCUvIh4BHzvWF6dafX41rpdBfeAF5RFfmgcLoLpwM10Uw1DHJ3L76e7w+J74CEgWIuKdQ6+4dxZzolI3AyUgUgJJv93R0lxVfSR2bnAF9IQHE0TQI2XKuTL8dACiDdsWcfKDs3vtEsn/fFka6FyhaW7WjUdW0SkCoBT0fTdLXdsa9qU8G6GEjDiDszauKzmohbYLH20MgxufO1YKArnPC5UZRcoSWzBXhzKKXKQFq2edH4zoiicq/a9N2ZINkdm0JBf5cEjIyaPuzpAGxDLJMTMQyA9gcOpetTF67antZ26SdNstpg4pb5Gxoi8WXaEECyxVq2EP8ZKgGXB1F0cIjE2188D2bN7g8bCClMfMZKOhjoY9XehiWzyurfHgKpnttZf9zV3lgRZb0d6A4TH7LMDck25Xab6iipbFqQoN1cGgtrvObzlOc3ZQGLo2w5DzSEiWvNxn2/T+yOGbtKZh8T6Dtl5/HGYUF1jtkCLeHQu+b+Mnp3rcDYazXZmGj0elwdYeJOYJvVrtQxj+YA+3Vhr6kad9pRdLY+BVgO3DS3+ICSdP/FtKPO6rpeh7MajPwopN1mI6K0suFud5oGHLMaAFRFFqWVDV3mwPdzr2Ps678PT7zdlE4gpxvHY+3EZ/Q1bQDjtUG+xGGvx1VUWtmA1+O6rx9vAVZYCGxbXVFd3nyp8beIg2mmp5JirGoNwFNej6vnbgyZsxbAGkC1EFr+ydKZRVlj8+ZF5LTNbH+xkF4Air0eV09pZcO94DXHHlRF7gXGRhH+aMuyGaMyRudMNuesWFEFzPB6XE1hFw82ZbYCDz+QpJq2rrX++PpVext3AM8bhjECSDSD1DA/QbcQ4nooGNi6+dWC8gE6n+VNIsWM9PkR7gw39ZYu340P4uITmxe9/+WoxJS0fJvNHmcYBoaut7f+VX+qcuNbCQlJKb7M7PFdWiioXqs7OuSbxDSzGLxhcT6fFgqd0rVQNxgaiGQhSelCko7YbPazQL2qyP9Eu02IGO5O8WbBfwLYDORbTKI+c277Fgioitwz2N3pX3OCCLv6PHumAAAAAElFTkSuQmCC"},kWNB:function(e,t,a){(e.exports=a("JPst")(!1)).push([e.i,"#argo-contentwrap {\n  background-color: white;\n}\n#sidebar-grow {\n  background-color: white;\n  margin-bottom: 1px;\n}\n#argo-nav {\n  background-color: #416090;\n}\n\n#argo-breadcrumb {\n  background-color: #ecf0f5;\n}\n\n#sidebar-col {\n  max-width: 215px;\n}\n\n#argo-breadcrumb > ol {\n  background-color: #ecf0f5;\n}\n",""])},lrsP:function(e,t,a){var r=a("eVqg");"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,n);r.locals&&(e.exports=r.locals)},"p3/T":function(e,t,a){(e.exports=a("JPst")(!1)).push([e.i,"#argo-footer {\n  background-color: #ffffff;\n  max-height: 92px;\n}\n\n#argo-loginfooter {\n  background-color: #ffffff;\n  max-height: 155px;\n}\n\n#argo-navbar-logout {\n  color: #ffffff;\n  border-color: #ffffff;\n  background-color: #416090;\n}\n#argo-navbar-logout:hover {\n  color: #ffffff;\n  background-color: #31496d;\n}\n\n#argo-navlinks {\n  background-color: #ffffff;\n}\n\n.argo-autocomplete-menu {\n  display: block;\n  width: 94%;\n  color: #495057;\n  position: absolute;\n  background-color: white;\n  z-index: 1000;\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  border: 1px solid #ced4da;\n  border-radius: 0.25rem;\n  overflow-y: auto;\n  max-height: 400px;\n}\n\n.argo-autocomplete-entries {\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  color: #495057;\n  padding: 0.375rem 1.75rem 0.375rem 0.75rem;\n}\n\n.argo-autocomplete-entries-highlighted {\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  background-color: #4A90D9;\n  color: white;\n  padding: 0.375rem 1.75rem 0.375rem 0.75rem;\n}\n\n.ReactTable .rt-thead.-filters select {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  background: transparent;\n  background-image: url(\"data:image/svg+xml;utf8,<svg fill='black' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>\");\n  background-repeat: no-repeat;\n  background-position-x: 100%;\n  background-position-y: 5px;\n  border: 1px solid #dfdfdf;\n  border-radius: 2px;\n  margin-right: 2rem;\n  padding: 1rem;\n  padding-right: 2rem;\n}\n\n",""])},s1Uj:function(e,t,a){(e.exports=a("JPst")(!1)).push([e.i,"#argo-td {\n  vertical-align: middle;\n}\n",""])},"tYV+":function(e,t,a){(e.exports=a("JPst")(!1)).push([e.i,"#select-field{\n    width: 150px;\n}\n\n.grouplabel {\n    width: 180px;\n}\n\n.col-md-6 {\n    padding: 5px;\n}\n\n#checkbox {\n    margin-right: 5px;\n}",""])},uU5Y:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAZCAIAAAA5RHCCAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAA6cAAAOdQGIKBt4AAAGqklEQVRIiY1WSYxdVxGtuve++f3/e/jt73Y7aRts05A2ih0jAxEICGKIQBAEG6JYEUhIWbDIgh0LiAQBNiyQEOsIkAIRyhZEcIiwE4eEJHZIHCKP6W735D+/6Q5VLH73l91xSym9xbuqUp1X51TderjnyD+JyDnngAGAEQCAmQMrpQiK3CbNm+UwBQhl8j/dWyhqa1NuUpQeT1br3XIiIagsu1iF0845Y6vQUwhkjPaUQESQiogQUSmFiALeZ8wMAE6VhbhaCTvM5jBxWtl2e5HClHRM1Cax1rkpvNRUIHIbUzCZVTcNDwjLyuVOOKHQMhly45yjtHfAG1nORLAQTwUFXhnoNgQ9r96z/rVQBopD1g09rKc1r+zNBbG0VkofpY8qUE6QEwSeNEAWeYw0QhXjgnY4HCqQusi15KSuZvVG6A2SeDhHWdRqDX70m98vnnixc1XKzA8K6VUbTKGupDZgndAGDCMoH7xgnHlkYgx2K5kA4Cuo9IagoqHq0BXH771w6gd/rfFFkkt3Lbx99OS1u+dKlcvFe1555LFnDzY3JYVgPEGxr2rAvrEA6DmW44QjU7vpx1olooHct8MSivQzX1158LuvX3xhz/W3Tlx4ufzxdw6trc3VauXsofPfeuz5bOnI2890fN9nRoUeIBhHoICdA7wtuUymH72N4223Yut7OMhXAFnJxtpG+cpL8ZU37y8nsLsSZAOoZFxh2t70Lry4eO7MdD9fbu6JjO1bm6FwjpzvhQzobycUQiCiTKYfJSJmJmZEhPE8RMv9jenDJ5aPf/F6pxteuriwdP3unESleoGcCsJgwOTSYQVw+fynq6A6eKA6evRDTEWpc9/znQMpfSb2EJgZEcXIAC0KRsFCAm6ZBBBF2Yrr8sRC/uQTv1ts/dtH8lRrImxHJkGZ5Ww8QX7py2oynHpPoFqoZz/97fdPHnvXtT/SH86WdkZBv1YYQ44QWKADNuRkMn2KGbb5HNWHzMyYurJsrwzfef3gy2c/Bw3GdCMbRqjuPEKDdvTq2QNvvjbfKRyng7CmbRYGMrLCbZeBAIAzR/5OBETkgIEFIzAjEVmv63emIpB97dt6KdObhnLmicgmd8RzOuUM09iWZMVEXlkJmqeCWLMbkTnC23XecagOH3rj/gefN+EmpH3PzdfoY1L4u8VDeDWaeueTXzl9YH5FlFEcUlLXeZHuiNoVry6mvvHI+R/+7MzisY4buGwzU9RVhdkVrth3YK94/OenH3r4Xezt0d3Iahumgx1hu+oHubZl78rFyf+c/qhQM0nSAFdSriDA94MBQCM0VReydXHhpenlpVimOQBJ22TUH0i/JMwGm3VVNVS4xmmVsU+2aAXNLtk74lXVZqsWDa7u9+uZmlAF+cydAKVD8YH0G5RNO1mKvZuzH+44PU1hREmZDXeNh0YYtBJ/H9PEalu3yc/JSYSdHyfICXJADpgkMzIJJgBGK3tprr737af/+Ocn7jt4kbpNhXeTKjQweZuI6wGIokKTdNhTOKh97ciVp5558usPPctr85M+SFN5SdDHumCQgIJh9MikeWprySIgChAwutNEtG67s2l9WJnk1TP3asdkurFUGYYpTcWQFEUY1HMa1sQwDvx26IFRwzfO7e9s7McAjfOdyIVyyonb9Gsefo6ZyYEDBhBb+53AgEmkNGWhlNI9O7e3J/xqdXVf3tLiejjTyNezubDZl4P+gbu6q8vzuRkme97LB3WmOYDIoSJvQwWkyvoITAixpR8zMzhmBqDtI/myrm00lF4vqEPQeODL13/11F8WPj7UN1upp2thT6mSLR77xFu/+NOvP/vN/xpv/+qN+6zYL2NJQiolFCSst7cAbnW1YHbMjpkBiZnHR1eR4QxjzQG4oLO6rK9dNks3ViBqf+pLl37y9B+Ofv5s/4bNO7Ov/eP40qWAPPCSQARsSYComDPhasrVd/TLeP8RgACk7Y4la0p/ouPMpG3PRFOrZ144ee5fXxjKEqpyfQNLg0ASE3v56uwvH39YRKKUa77nysqArQUeaFPFsiFVal02Lm40f38bzx+iZABmZOYw6PUHrTDuRKispUHeMEAzTWdKGUPHdGYqKdTejWwQ+sJglUKUo2CgCAiVZ4uiSoIGkQUQt+mHiELAaDdt9xEjYpVHQUSQq1grKBs86anZYSfLWfctJVZMxPXNfq+wQUJpYtRQkHO5r+ykRCcYAhnJKNfc28Enzt/z3K3/M2OH4zvfW4C09cIj5sf7G29tjTGHihEARsUBwP8BoRsQdzWv4kYAAAAASUVORK5CYII="}},[["f1jT",1,2]]]);